(()=>{"use strict";var e={6169:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.update_commentTags=t.is_line_continue=t.checksamenameerr=t.samenameerr=t.formatMarkdowndetail=t.getincludetable=t.getFuncCallInfo=t.searchNode=t.detectExp=t.detectVariableType=t.detectExpType=t.getcacheproperty=t.cleardetectcache=t.getClassMembers=t.parseinclude=t.pathanalyze=t.Lexer=t.allIdentifierChar=t.isIdentifierChar=t.FuncNode=t.SymbolNode=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.FuncScope=void 0;const o=n(7147),i=n(1017),r=n(7282),s=n(2374),a=n(6288),c=n(6630),l=n(4780),d=n(7994),u=n(3939);var f,p,h,m,g,y;function v(e){return!(e<48)&&(e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||e>127)))}!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.STATIC=1]="STATIC",e[e.GLOBAL=2]="GLOBAL"}(f=t.FuncScope||(t.FuncScope={})),function(e){e[e.class=0]="class",e[e.function=1]="function",e[e.method=2]="method",e[e.parameter=3]="parameter",e[e.variable=4]="variable",e[e.property=5]="property",e[e.keyword=6]="keyword",e[e.string=7]="string",e[e.number=8]="number"}(p=t.SemanticTokenTypes||(t.SemanticTokenTypes={})),function(e){e[e.definition=0]="definition",e[e.readonly=1]="readonly",e[e.static=2]="static",e[e.deprecated=3]="deprecated",e[e.modification=4]="modification",e[e.documentation=5]="documentation",e[e.defaultLibrary=6]="defaultLibrary"}(h=t.SemanticTokenModifiers||(t.SemanticTokenModifiers={})),function(e){e.create=function(e,t,n,o,i){return{name:e,kind:t,range:n,selectionRange:o,children:i}}}(m=t.SymbolNode||(t.SymbolNode={})),function(e){e.create=function(e,t,n,o,i,r,s){var a,c;let l="",d=[],u=!1;return null===(c=(a=i).format)||void 0===c||c.call(a,i),i.map((e=>{"*"!==e.name&&d.push(e),l+=", "+(e.ref?(u=!0,"&"):"")+e.name+(e.defaultVal?" := "+e.defaultVal:e.arr?"*":null===e.defaultVal?"?":"")})),l=(s?"static ":"")+e+"("+l.substring(2)+")",i=d,{assume:f.DEFAULT,static:s,hasref:u,name:e,kind:t,range:n,selectionRange:o,params:i,full:l,children:r,funccall:[],declaration:{},global:{},local:{},labels:{}}}}(g=t.FuncNode||(t.FuncNode={})),function(e){e.create=function(e,t,n){return{name:e,kind:t,range:n,selectionRange:n}}}(y||(y={})),t.isIdentifierChar=v,t.allIdentifierChar=new RegExp("^[^\0-/:-@[\\]^`{-]+$");let b=new RegExp("^;;\\s*(?<tag>.+)");const _=new RegExp(/(?<=['"\s])(c|background|#)?((0x)?[\da-f]{6}([\da-f]{2})?|(black|silver|gray|white|maroon|red|purple|fuchsia|green|lime|olive|yellow|navy|blue|teal|aqua))\b/i),k=JSON.parse('{ "black": "000000", "silver": "c0c0c0", "gray": "808080", "white": "ffffff", "maroon": "800000", "red": "ff0000", "purple": "800080", "fuchsia": "ff00ff", "green": "008000", "lime": "00ff00", "olive": "808000", "yellow": "ffff00", "navy": "000080", "blue": "0000ff", "teal": "008080", "aqua": "00ffff" }'),T=" \t\r\n",R="+ - * / % & ++ -- ** // = += -= *= /= //= .= == := != !== ~= > < >= <= >>> >> << >>>= >>= <<= && &= | || ! ~ , ?? : ? ^ ^= |= =>".split(" "),S="try,throw,return,global,local,static,if,switch,case,for,while,loop,continue,break,goto".split(","),w=S.concat(["class","in","is","isset","contains","else","until","catch","finally","and","or","not","as","super"]),D={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",Conditional:"Conditional",Expression:"Expression"},C=/^(alttab|alttabandmenu|alttabmenu|alttabmenudismiss|shiftalttab|shift|lshift|rshift|alt|lalt|ralt|control|lcontrol|rcontrol|ctrl|lctrl|rctrl|lwin|rwin|appskey|lbutton|rbutton|mbutton|wheeldown|wheelup|wheelleft|wheelright|xbutton1|xbutton2|joy1|joy2|joy3|joy4|joy5|joy6|joy7|joy8|joy9|joy10|joy11|joy12|joy13|joy14|joy15|joy16|joy17|joy18|joy19|joy20|joy21|joy22|joy23|joy24|joy25|joy26|joy27|joy28|joy29|joy30|joy31|joy32|joyx|joyy|joyz|joyr|joyu|joyv|joypov|joyname|joybuttons|joyaxes|joyinfo|space|tab|enter|escape|esc|backspace|bs|delete|del|insert|ins|pgdn|pgup|home|end|up|down|left|right|printscreen|ctrlbreak|pause|scrolllock|capslock|numlock|numpad0|numpad1|numpad2|numpad3|numpad4|numpad5|numpad6|numpad7|numpad8|numpad9|numpadmult|numpadadd|numpadsub|numpaddiv|numpaddot|numpaddel|numpadins|numpadclear|numpadleft|numpadright|numpaddown|numpadup|numpadhome|numpadend|numpadpgdn|numpadpgup|numpadenter|f1|f2|f3|f4|f5|f6|f7|f8|f9|f10|f11|f12|f13|f14|f15|f16|f17|f18|f19|f20|f21|f22|f23|f24|browser_back|browser_forward|browser_refresh|browser_stop|browser_search|browser_favorites|browser_home|volume_mute|volume_down|volume_up|media_next|media_prev|media_stop|media_play_pause|launch_mail|launch_media|launch_app1|launch_app2|vk[a-f\d]{1,2}(sc[a-f\d]+)?|sc[a-f\d]+|`[;{]|[\x21-\x3A\x3C-\x7E])$/i,x={type:"",content:"",offset:0,length:0,topofline:0,next_token_offset:-1};let K={},O={};class P{constructor(e,t){this.message=e,this.token=t}}class E{constructor(e,n,i=0){let r,_,k,K,O,A,N,q,L,j,F,I,W,$,V,z;this.actived=!1,this.children=[],this.d=0,this.declaration={},this.diagnostics=[],this.diags=0,this.foldingranges=[],this.funccall=[],this.include={},this.includedir=new Map,this.dlldir=new Map,this.dllpaths=[],this.labels={},this.libdirs=[],this.object={method:{},property:{},userdef:{}},this.reflat=!1,this.isparsed=!1,this.scriptdir="",this.scriptpath="",this.tokens={},this.STB=new s.SemanticTokensBuilder,this.linepos={},this.strcommpos=[],this.texts={},this.uri="",this.anonymous=[];let X,G,Q,J,Y,Z,ee,te,ne,oe,ie,re,se,ae,ce,le=this,de=u.isahk2_h,ue="",fe=[],pe=!1,he={},me=!0,ge=!1,ye=!1,ve={TK_START_EXPR:function(){var e,t;Le()?k.last_word="_":(Ue()||Q&&!B(null!==(e=ce.previous_token)&&void 0!==e?e:x,ce))&&Ke();let n=D.Expression;if("["===q){if(!Q)if(null===(t=ce.previous_token)||void 0===t?void 0:t.callinfo)J=!0;else if(["TK_WORD","TK_STRING","TK_END_EXPR"].includes(F))return Me(n),O.indentation_level=We(),Oe(),k.indentation_level=O.indentation_level+1,void(K.space_in_paren&&(J=!0));"TK_RESERVED"===F&&(J=!0),n=D.ArrayLiteral,Ae(k.mode)&&("["!==k.last_text&&(","!==k.last_text||"]"!==W&&"}"!==W)||K.keep_array_indentation||Ke())}else ce.ignore?Ke(!0):"TK_END_EXPR"===F||"TK_WORD"===F?J=T.includes(ce.prefix_is_whitespace||"\0"):"TK_STRING"===F?J=!0:"TK_RESERVED"===F&&(J=!I.match(/^(break|continue|goto)$/i)&&(["if","for","while","loop","case","catch","switch"].includes(I)?Boolean(K.space_before_conditional):ne));if(Q&&K.preserve_newlines?Ke(!0):"TK_EQUALS"!==F&&"TK_COMMA"!==F&&"TK_OPERATOR"!==F||qe()||xe(),Me(n),k.indentation_level=We(),Oe(),ce.ignore){let e=ce.data.content;e&&Oe(e)}else K.space_in_paren&&(J=!0);Pe(),"["===q&&!K.keep_array_indentation&&K.preserve_newlines&&Ke(!0)},TK_END_EXPR:function(){for(;k.mode===D.Statement;)Ne();("TK_END_EXPR"===F||"TK_END_BLOCK"===F)&&k.indentation_level<k.parent.indentation_level?De():"TK_START_EXPR"!==F&&xe("]"===q&&Ae(k.mode)&&!K.keep_array_indentation&&K.preserve_newlines),J=Boolean(K.space_in_paren&&!("TK_START_EXPR"===F&&!K.space_in_empty_paren)),Ne(),Ce()&&O.indentation_level===k.indentation_level&&(Ee(),O.indentation_level===k.indentation_level&&De()),Oe()},TK_START_BLOCK:function(){var e;if(ce.data)Me(D.ObjectLiteral),Z=!(null===(e=le.tokens[ce.next_token_offset])||void 0===e?void 0:e.topofline),k.indentation_level=We(),O.mode!==D.Conditional&&(O.indentation_level=k.indentation_level),Ae(O.mode)&&","===k.last_text&&Q&&K.preserve_newlines&&(k.indentation_level=++O.indentation_level,Ke()),J||(J="TK_START_EXPR"!==F&&ne),Oe(),Pe(),Z?J=ne:Ke(!0);else{if(!["try","if","for","while","loop","catch","else","finally"].includes(k.last_word))for(;k.mode===D.Statement;)Ne();k.declaration_statement=!1,Me(D.BlockStatement),k.had_comment=O.had_comment,J=ne,O.in_case_statement&&k.last_text.endsWith(":")&&(k.indentation_level--,De()),(0===K.one_true_brace||Q&&K.preserve_newlines&&!K.one_true_brace)&&Ke(!0);let e=!Ce();Oe(),Pe(),e||void 0!==K.one_true_brace?Ke():J=ne}},TK_END_BLOCK:function(){for(;k.mode===D.Statement;)Ne();let e=k.mode===D.ObjectLiteral;e?"TK_START_BLOCK"===F?J=!1:Ae(k.mode)&&K.keep_array_indentation?(K.keep_array_indentation=!1,Ke(),K.keep_array_indentation=!0):(J=ne,("TK_END_EXPR"===F||"TK_END_BLOCK"===F)&&k.indentation_level<k.parent.indentation_level?De():(Q&&K.preserve_newlines||k.mode!==D.ObjectLiteral||!Z)&&Ke()):(void 0!==K.one_true_brace||Q)&&Ke(),Ne(),O.indentation_level===k.indentation_level&&Ce()&&Ee(),Oe(),e||(k.in_case_statement&&k.last_text.endsWith(":")&&k.indentation_level++,void 0!==K.one_true_brace&&Ke(!0),J=ne)},TK_WORD:$e,TK_RESERVED:$e,TK_STRING:function(){if(Le()?Q&&K.preserve_newlines?Ke(!0):J=!0:"TK_RESERVED"===F||"TK_WORD"===F?Q?Ke():J=!0:"TK_COMMA"===F||"TK_START_EXPR"===F||"TK_EQUALS"===F||"TK_OPERATOR"===F?qe()||xe():(Q&&Ke(),J=!ce.ignore&&void 0===ce.data),ce.ignore)return Ke(!0),void(_[_.length-1].text=[q]);Oe()},TK_EQUALS:function(){Le(),J=ne,Oe(),J=ne},TK_OPERATOR:function(){var e,t,n,o;let i=Boolean(ne||q.match(/^\w/)),s=i;if((null===(e=ce.previous_token)||void 0===e?void 0:e.callinfo)&&(J=!0),Le()){if(k.declaration_statement&&L.match(/^(\+\+|--|%|!|~|not)$/))return J=!0,k.last_word="_",Oe(),void(J="not"===L)}else if("=>"===q)k.mode===D.BlockStatement?Me(D.Statement):Y&&k.parent.mode===D.BlockStatement&&(Y=!1),Pe();else if(L.match(/^(\+\+|--|%|!|~|not)$/)&&Ue())return Ke(),Oe(),void(J="not"===L);if("TK_RESERVED"===F&&(J=!0),"%"===q)return s=Boolean(void 0!==ce.previous_pair_pos&&" \t".includes(r.charAt(ce.offset+1)||"\0")),J||(J=Boolean(ce.next_pair_pos&&" \t".includes(ce.prefix_is_whitespace||"\0"))),Q&&K.preserve_newlines&&k.mode===D.Statement&&B(null!==(t=ce.previous_token)&&void 0!==t?t:x,ce)&&Ke(!0),Oe(),void(J=s);if(":"===q&&(k.in_case||k.mode===D.Statement&&k.parent.in_case))return k.in_case||Ne(),Pe(),Oe(),je("\n")?Ke():J=ne,k.in_case=!1,void(k.case_body=!0);if(Q&&K.preserve_newlines?Ke(!0):"TK_OPERATOR"!==F||I.match(/^(--|\+\+|%|!|~|not)$/)||xe(),["--","++","!","~"].includes(q)||"-+".includes(q)&&(["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR","TK_COMMA","TK_RESERVED"].includes(F)||(null===(n=ce.previous_token)||void 0===n?void 0:n.callinfo)))s=!1,i="!"===q&&"TK_WORD"===F,J||"++"!==q&&"--"!==q||!["TK_END_EXPR","TK_WORD"].includes(F)||(s=!0);else if(":"===q)k.ternary_depth?k.ternary_depth--:i=!1;else if("?"===q)if(ce.ignore)i=s=!1;else if(k.ternary_depth+=1,k.indentation_level){if(_.length){let e=_[_.length-1].text;e[k.indentation_level-(e[0]===se?0:1)]===$&&Pe()}}else Pe();else"."===q?s=i=!0:"&"===q?(("TK_WORD"!==F&&"TK_END_EXPR"!==F||(null===(o=ce.previous_token)||void 0===o?void 0:o.callinfo))&&(s=!1),"TK_COMMA"!==F&&"TK_START_EXPR"!==F||(i=!1)):"*"===q&&("("===I||"TK_WORD"===F&&(je(")")||je("]"))?i=s=!1:","===I&&(s=!1));J||(J=i),Oe(),J=s},TK_COMMA:function(){var e;(k.mode===D.BlockStatement||k.declaration_statement)&&(Me(D.Statement),Pe()),"TK_WORD"===F&&T.includes(ce.prefix_is_whitespace||"\0")&&(null===(e=ce.previous_token)||void 0===e?void 0:e.callinfo)?Q&&K.preserve_newlines?Ke(!0):J=!0:(J=ne&&"TK_COMMA"===F,k.mode===D.Statement&&k.parent.mode===D.ObjectLiteral&&Ne(),Q&&K.preserve_newlines?Ke(!0):Ce()||(Q=!1)),Oe(),Q||Z||k.mode!==D.ObjectLiteral?J=ne:Ke()},TK_BLOCK_COMMENT:function(){var e,t;let n,o,i=q.split("\n"),r=!i[0].match(/^\/\*(@ahk2exe-keep|[^*]|$)/i),s="";if(!r&&(n=i[i.length-1].match(/^(\s)\1*/))&&" "!==n[0]&&(s=new RegExp(`^${n[1]}{1,${n[0].length}}`)),Ke(!0),k.mode===D.Statement){let n=le.tokens[null===(e=ce.previous_token)||void 0===e?void 0:e.next_token_offset];n&&(k.in_expression||B(null!==(t=n.previous_token)&&void 0!==t?t:x,n))?k.had_comment<2&&De():Ke()}for(Oe(i[0].trimRight()),o=1;o<i.length-1;o++)Ke(!0),Oe(r?" * "+i[o].replace(/^\s*\* ?|\s+$/g,""):i[o].trimRight().replace(s,""));i.length>1&&(Ke(!0),Oe((r?" ":"")+i[i.length-1].trim())),Ke(!0),k.had_comment=3},TK_INLINE_COMMENT:function(){if(K.ignore_comment)return q="";Ce()&&_.pop(),_[_.length-1].text.push(K.white_space_before_inline_comment,q),Ke(!0),k.had_comment=1},TK_COMMENT:function(){var e,t;if(!K.ignore_comment){if(Ke(!0),k.mode===D.Statement){let n=le.tokens[null===(e=ce.previous_token)||void 0===e?void 0:e.next_token_offset];n&&(k.in_expression||B(null!==(t=n.previous_token)&&void 0!==t?t:x,n))?k.had_comment<2&&De():Ke()}q.split("\n").map((e=>{Ke(!0),Oe(e.trim())})),Ke(!0),k.had_comment=2}},TK_DOT:function(){Le(),xe(")"===k.last_text&&K.break_chained_methods),Oe()},TK_HOT:Ve,TK_SHARP:Ve,TK_NUMBER:function(){j="TK_WORD",$e()},TK_LABEL:function(){if(Ke(),"default:"===L&&(k.in_case_statement||k.mode===D.BlockStatement&&"switch"===k.last_word))return k.case_body?Ee():k.case_body=!0,Oe(),Pe(),k.in_case=!1,k.in_case_statement=!0,void(J=ne);Oe();let e=_[_.length-1].text;""===e[0].trim()?_[_.length-1].text=e.slice(1):Pe()},TK_HOTLINE:Ve,TK_UNKNOWN:function(){Oe(),Ke()}};function be(e,t){K={keep_array_indentation:!0,max_preserve_newlines:1},ne=!0,$="\t",delete t.format,ge=!0,se="";for(let n of t){if(!n.range_offset)continue;let[t,o]=n.range_offset;for(delete n.range_offset,F=W=I="",_=[{text:[],indent:0}],J=!1,A=[],k=null,Me(D.Expression),ce=e[e[t].next_token_offset];ce&&ce.offset<o;ce=e[ce.next_token_offset])j=ce.type,q=ce.content,L=q.toLowerCase(),ve[j](),W=k.last_text,F=j,k.last_text=I=L;n.defaultVal=_.map((e=>e.text.join(""))).join("\n").trim()}ge=!1,_=[]}function _e(e=0,n=new Map,o=""){var i,a;const c=[],b=le.document,_=le.tokens;let k,R,w,D,C,K=n.get("#parent")||le,O=null!==(i=le.tokens[X-1])&&void 0!==i?i:x,E=null!==(a=O.previous_token)&&void 0!==a?a:x,M=0,A=!0,N="",q=[],L=[];return me=!0,0!==e&&(L.push(X-1),delete O.data),F(),"TK_EOF"===O.type&&M>(0===e?0:-1)&&le.addDiagnostic(d.diagnostic.missing("}"),L[M-(0===e?1:0)],1),c;function j(e){if("("!==r.charAt(O.offset+O.length))return!1;let t=E,n=O,o=ae,i=X,s="",a=0,c=O.topofline>0,l="";for(me=!1;ve();)if("("===(s=O.content))a++;else if(")"===s&&!--a){ve(),l=O.content;break}return E=t,O=n,ae=o,X=i,A=!0,"=>"===l||c&&"{"===l}function F(n=0){var i,a,l,u,f,v,S,P,F,W;for("TK_START_BLOCK"===O.type&&(delete O.data,ve(),A=!1,O.topofline||E.topofline||le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length));me=!0,ve();){let U;switch(1===O.topofline&&(R=O.offset,2===e?"TK_RESERVED"!==O.type&&t.allIdentifierChar.test(O.content)&&(O.type="TK_WORD",delete O.semantic):":"===r.charAt(X)&&(T.includes(r.charAt(X+1))&&t.allIdentifierChar.test(O.content)||q.length&&"default"===O.content.toLowerCase())&&((U=_[X])&&((O.next_token_offset=U.next_token_offset)>0&&(_[U.next_token_offset].previous_token=O),delete _[X]),O.content+=":",O.length++,O.type="TK_LABEL",X++,R=void 0)),O.type){case"TK_EOF":return;case"TK_WORD":if(O.topofline>0){let t=j();if(ve(),t||!de||2===e||1!==E.topofline||O.topofline||"TK_WORD"!==O.type||"macro"!==E.content.toLowerCase()||(O.topofline=1,(t=j())?ve():O.topofline=0),t){let t,n,r,a=E,l=c.length,u=E.semantic={type:2===e?p.method:p.function},f=Z(void 0,!0),m=2===a.topofline,y=m?null===(i=a.previous_token)||void 0===i?void 0:i.offset:a.offset;if(R=void 0,(r=a.content.toLowerCase()).match(/^\d/)&&le.addDiagnostic(d.diagnostic.invalidsymbolname(a.content),a.offset,a.length),f||(f=[],le.addDiagnostic(d.diagnostic.invalidparam(),a.offset,O.offset+1-a.offset)),a.symbol=t=g.create(a.content,2===e?s.SymbolKind.Method:s.SymbolKind.Function,s.Range.create(a.pos=b.positionAt(a.offset),{line:0,character:0}),Re(a.offset,a.length),f,void 0,m),0!==e&&(t.parent=K),ve()&&"=>"===O.content){let n=c.splice(l),o=e,i=K;e|=1,K=t;let r=G(C={},void 0,"return",1);c.push(t),K=i,e=o,t.range.end=b.positionAt(E.offset+E.length),le.addFoldingRangePos(t.range.start,t.range.end,"line"),t.returntypes=C,t.children=n.concat(r);for(const e in C)C[e]=t.range.end;le.linepos[t.range.end.line]=y}else{if("{"!==O.content){le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length);break}{let n=c.splice(l),i=new Map,r=O.offset;O.previous_pair_pos=y,i.set("#parent",t),t.funccall=[],c.push(t),t.children=n,t.children.push(..._e(1|e,i,o)),t.range.end=b.positionAt(X),le.addSymbolFolding(t,r)}}u.modifier=1<<h.definition|1<<h.readonly|(m?1<<h.static:0),(n=he[t.selectionRange.start.line])&&(t.detail=Te(n.content)),t.closure=!!(1&e)&&!m,ye(t),2===e&&(t.full=`(${o.slice(0,-1)}) `+t.full,m||"__new"!==t.name.toLowerCase()||(t.returntypes={[o.replace(/([^.]+)\.?$/,"@$1")]:t.range.end}),le.object.method[r]||(le.object.method[r]=[]),le.object.method[r].push(t));break}if(2===e){if("["===r.charAt(E.offset+E.length)||O.content.match(/^(=>|\{)$/)){let t,n=E,i=c.length,r=[];if(R=void 0,"["===O.content&&(r=null!==(a=Z(void 0,!0,"]"))&&void 0!==a?a:[],ve(),0===r.length&&le.addDiagnostic(d.diagnostic.propemptyparams(),n.offset,E.offset-n.offset+1),!O.content.match(/^(=>|\{)$/))){le.addDiagnostic(d.diagnostic.propdeclaraerr(),n.offset,n.length),A=!1;break}let m=2===n.topofline,_=m?null===(l=n.previous_token)||void 0===l?void 0:l.offset:n.offset,T=n.symbol=s.DocumentSymbol.create(n.content,void 0,s.SymbolKind.Property,t=Re(n.offset,n.length),Object.assign({},t));if((k=he[T.selectionRange.start.line])&&(T.detail=Te(k.content)),null===(u=r.format)||void 0===u||u.call(r,r),T.parent=K,T.params=r,T.full=`(${o.slice(0,-1)}) ${m?"static ":""}${n.content}`+(r.length?`[${r.map((e=>(e.ref?"&":"")+e.name+(e.defaultVal?" := "+e.defaultVal:e.arr?"*":null===e.defaultVal?"?":""))).join(", ")}]`:""),T.static=m,T.children=c.splice(i),c.push(T),fe(n),T.funccall=[],n.semantic={type:p.property,modifier:1<<h.definition|(m?1<<h.static:0)},"{"===O.content){let t,n,i,a=e,c=O.offset;for(O.previous_pair_pos=_,ve(),A=!1,e=1,"TK_END_BLOCK"!==O.type||E.topofline||O.topofline||le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length);ve()&&"TK_END_BLOCK"!==O.type;)if(O.topofline&&(O.content=O.content.toLowerCase()).match(/^[gs]et$/)){let a;if(O.semantic={type:p.function,modifier:1<<h.definition|1<<h.readonly},ve(),t=E,"=>"===O.content){let n,o={},c=K.funccall.length;i=g.create(E.content.toLowerCase(),s.SymbolKind.Function,Re(E.offset,X-E.offset),Re(E.offset,E.length),[...r]),E.content.match(/^\d/)&&le.addDiagnostic(d.diagnostic.invalidsymbolname(E.content),E.offset,E.length),E.symbol=i,e=3,i.parent=T,n=G(o,void 0,"return",1),e=2,null===(f=i.funccall)||void 0===f||f.push(...K.funccall.splice(c)),i.range.end=b.positionAt(E.offset+E.length),T.range.end=i.range.end,le.addFoldingRangePos(i.range.start,i.range.end,"line"),i.returntypes=o,i.children=[],"=>"===E.content&&le.addDiagnostic(d.diagnostic.invaliddefinition("function"),t.offset,t.length);for(const e in o)o[e]=i.range.end;"set"===t.content.toLowerCase()&&(i.params.unshift(a=y.create("Value",s.SymbolKind.Variable,s.Range.create(0,0,0,0))),a.detail=d.completionitem.value()),i.children.push(...n),ye(i),le.linepos[i.range.end.line]=t.offset}else if("{"===O.content){n=O,t.symbol=i=g.create(t.content,s.SymbolKind.Function,Re(t.offset,X-t.offset),Re(t.offset,3),[...r]);let e=new Map([["#parent",i]]);i.parent=T,i.children=_e(3,e,o),i.range.end=b.positionAt(X),"set"===t.content.toLowerCase()&&(i.params.unshift(a=y.create("Value",s.SymbolKind.Variable,s.Range.create(0,0,0,0))),a.detail=d.completionitem.value()),ye(i),le.addSymbolFolding(i,n.offset),t.content.match(/^\d/)&&le.addDiagnostic(d.diagnostic.invalidsymbolname(t.content),t.offset,t.length)}else{if(le.addDiagnostic(d.diagnostic.invalidprop(),O.offset,O.length),"}"===O.content){A=!1;break}{i=void 0;let e=0;for(;"TK_EOF"!==O.type;){if("{"===O.content)e++;else if("}"===O.content&&--e<0)break;ve()}A=!1}}i&&T.children.push(i)}else{let e=0;for(le.addDiagnostic(d.diagnostic.invalidprop(),O.offset,O.length),A=!1;ve();)if("{"===O.content)e++;else if("}"===O.content&&--e<0)break;A=!1}T.range.end=b.positionAt(X-1),e=a,le.addSymbolFolding(T,c)}else if("=>"===O.content){let n,o=X,i={},a=K.funccall.length;e=3,n=g.create("get",s.SymbolKind.Function,t=Re(o,X-o),Object.assign({},t),r),n.parent=T,n.children=G(i,void 0,"return",1),n.returntypes=i,null===(v=n.funccall)||void 0===v||v.push(...K.funccall.splice(a)),e=2,n.range.end=b.positionAt(E.offset+E.length),T.range.end=n.range.end,le.addFoldingRangePos(n.range.start,n.range.end,"line");for(const e in i)i[e]=n.range.end;0!==e&&(n.parent=K),ye(n),T.children.push(n),le.linepos[T.range.end.line]=_}1===T.children.length&&"get"===T.children[0].name&&(n.semantic.modifier=(n.semantic.modifier||0)|1<<h.readonly);break}":="!==O.content&&"TK_DOT"!==O.type?(le.addDiagnostic(d.diagnostic.propdeclaraerr(),E.offset,E.length),A=!1,O.topofline||(O=E,E=x,X=O.offset+O.length,G())):(O=E,E=x,A=!1,X=O.offset+O.length,c.push(...J("")),void 0!==R&&(le.linepos[(null!==(S=E.pos)&&void 0!==S?S:E.pos=b.positionAt(E.offset)).line]=R))}else $(O),O=E,E=x,X=O.offset+O.length,V(),void 0!==R&&(le.linepos[(null!==(P=E.pos)&&void 0!==P?P:E.pos=b.positionAt(E.offset)).line]=R);break}2===e?c.push(...J("")):(O.topofline?V():(A=!1,c.push(...G())),void 0!==R&&(le.linepos[(null!==(F=E.pos)&&void 0!==F?F:E.pos=b.positionAt(E.offset)).line]=R));break;case"TK_SHARP":Q();break;case"TK_RESERVED":I();break;case"TK_START_BLOCK":2===e?le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length):(M++,L.push(X-1));break;case"TK_END_BLOCK":if(--M>=0&&L.length){let e=L.pop();le.addFoldingRange(O.previous_pair_pos=e,X-1),_[e].next_pair_pos=O.offset,1===O.topofline&&(re=O.offset,ee=!0)}if(M<n){if(0!==e||0!==n)return void(L.length&&(_[O.previous_pair_pos=L[L.length-1]].next_pair_pos=O.offset));le.addDiagnostic(d.diagnostic.unexpected("}"),O.offset,1),M=0,L.length=0}break;case"TK_END_EXPR":le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,1),R=void 0;break;case"TK_LABEL":if(q.length&&"default:"===O.content.toLowerCase()){let e=q.pop();q.push(O.offset),e&&le.addFoldingRange(e,E.offset,"case"),ve(),A=!1,O.topofline||(O.topofline=-1);break}if(2===e){le.addDiagnostic(d.diagnostic.propdeclaraerr(),O.offset,O.length);break}O.symbol=w=m.create(O.content,s.SymbolKind.Field,Re(O.offset,O.length),Re(O.offset,O.length-1)),c.push(w),K.labels&&(N=O.content.toLowerCase().slice(0,-1),w.def=!0,K.labels[N]?K.labels[N][0].def?(le.addDiagnostic(d.diagnostic.duplabel(),O.offset,O.length-1),K.labels[N].push(w)):K.labels[N].unshift(w):K.labels[N]=[w]),(k=he[w.selectionRange.start.line])&&(w.detail=Te(k.content)),(U=le.get_token(X,!0)).topofline||le.addDiagnostic(d.diagnostic.unexpected(U.content),U.offset,U.length);break;case"TK_HOTLINE":if(O.symbol=w=m.create(O.content,s.SymbolKind.Event,Re(O.offset,O.length),Re(O.offset,O.length-2)),w.range.end=b.positionAt(X-1),c.push(w),(k=he[w.selectionRange.start.line])&&(w.detail=Te(k.content)),0!==e&&le.addDiagnostic(d.diagnostic.hotdeferr(),O.offset,O.length),O.ignore){for(;ve()&&O.ignore&&"TK_STRING"===O.type;);w.range.end=b.positionAt(E.offset+E.length),A=!1;break}(O.content.match(/\s::$/)||(D=O.content.match(/\S(\s*)&(\s*)\S+::/))&&(""===D[1]||""===D[2]))&&le.addDiagnostic(d.diagnostic.invalidhotdef(),O.offset,O.length);break;case"TK_HOT":{0!==e?le.addDiagnostic(d.diagnostic.hotdeferr(),O.offset,O.length):O.ignore||!O.content.match(/\s::$/)&&(!(D=O.content.match(/\S(\s*)&(\s*)\S+::/))||""!==D[1]&&""!==D[2])||le.addDiagnostic(d.diagnostic.invalidhotdef(),O.offset,O.length);let t=m.create(O.content,s.SymbolKind.Event,Re(O.offset,O.length),Re(O.offset,O.length-2));(k=he[t.selectionRange.start.line])&&(t.detail=Te(k.content)),O.symbol=t,ve();let n,o=E,i=new Map([["#parent",t]]);for(t.funccall=[],t.declaration={},c.push(t),t.global={},t.local={};"TK_SHARP"===O.type;)Q(),ve();if("{"===O.content)O.previous_pair_pos=o.offset,t.params=[n=y.create("ThisHotkey",s.SymbolKind.Variable,Re(0,0))],n.detail=d.completionitem.thishotkey(),t.children=[],t.children.push(..._e(1,i)),t.range=Re(o.offset,X-o.offset),le.addSymbolFolding(t,O.offset),ye(t);else if(O.topofline){if(ye(t),A=!1,O.type.startsWith("TK_HOT"))break;"TK_WORD"===O.type&&j()||(we(o),le.addDiagnostic(d.diagnostic.hotmissbrace(),o.offset,o.length)),A=!1}else{let n=K,i=e,s=O.content.toLowerCase();if(K=t,e=1,"return"===s)t.children=G(void 0,void 0,"return");else if(["global","local","static"].includes(s)){let e=K,n=c.length;K=t,I(),t.children=c.splice(n),K=e}else{let e=c.length;A=!1,z(null,o.offset),t.children=c.splice(e)}K=n,e=i,ye(t);let a=E.offset+E.length;for(;" \t".includes(r.charAt(a)||"\0");)a++;t.range=Re(o.offset,a-o.offset),le.linepos[t.range.end.line]=o.offset}break}case"TK_UNKNOWN":le.addDiagnostic(d.diagnostic.unknowntoken(O.content),O.offset,O.length);break;default:O.topofline&&(E=x),A=!1,2===e?(le.addDiagnostic(d.diagnostic.propdeclaraerr(),O.offset,O.length),G()):(c.push(...G()),void 0!==R&&(le.linepos[(null!==(W=E.pos)&&void 0!==W?W:E.pos=b.positionAt(E.offset)).line]=R))}}}function I(){let n,i=O.content.toLowerCase(),a=O.offset,l=E,u=X;if(me=!1,2===e){if(n=Ie(),A=!1,X=u,O.type="TK_WORD",".[(".includes(r.charAt(O.offset+O.length))||n.content.match(/^(:=|=>|\{)$/))return;if("TK_EQUALS"===n.type||"class"!==i&&"static"!==i)return;n=void 0,A=!0,O.type="TK_RESERVED"}else if("%"===r.charAt(O.offset-1)||"%"===r.charAt(O.offset+O.length))return O.type="TK_WORD",A=!1,void(O.semantic={type:p.variable});switch(i){case"class":if(!O.topofline||1&e){A=!1,O.type="TK_WORD";break}let g,v,_="",T=new Map;if(ve(),O.topofline||"TK_RESERVED"!==O.type||(O.type="TK_WORD",2!==e&&le.addDiagnostic(d.diagnostic.reservedworderr(O.content),O.offset,O.length)),!O.topofline&&"TK_WORD"===O.type){if(1&e&&le.addDiagnostic(d.diagnostic.classinfuncerr(),O.offset,O.length),g=O,ve(),"extends"===O.content.toLowerCase())if(O=Ie(),"TK_WORD"===O.type){for(_=O.content,c.push(y.create(O.content,s.SymbolKind.Variable,v=Re(O.offset,O.length)));X<oe&&"."===r.charAt(X)&&(Ie(),O=Ie(),"TK_WORD"===O.type);)_+="."+O.content,fe(O);"TK_WORD"===O.type&&ve()}else le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length);if("TK_START_BLOCK"!==O.type){A=!1;break}O.previous_pair_pos=a,g.content.match(/^\d/)&&le.addDiagnostic(d.diagnostic.invalidsymbolname(g.content),g.offset,g.length);let t=s.DocumentSymbol.create(g.content,void 0,s.SymbolKind.Class,Re(0,0),Re(g.offset,g.length));g.symbol=t,T.set("#parent",t),t.full=o+g.content,t.funccall=[],t.children=[],t.cache=[],t.staticdeclaration={},t.declaration={},t.returntypes={[(o+"@"+g.content).toLowerCase()]:!0},(k=he[t.selectionRange.start.line])&&(t.detail=Te(k.content)),_&&(t.extends=_),t.children.push(..._e(2,T,o+g.content+".")),t.range=Re(a,X-a),ye(t),g.semantic={type:p.class,modifier:1<<h.definition|1<<h.readonly},le.addSymbolFolding(t,O.offset);for(const e of t.children)e.children&&e.kind!=s.SymbolKind.Property&&(e.parent=t);return c.push(t),!0}A=!1,E.type="TK_WORD",X=E.offset+E.length,O=E,E=l;break;case"global":case"static":case"local":if(ve(),2===e&&!O.topofline&&t.allIdentifierChar.test(O.content)&&(O.type="TK_WORD"),O.topofline)2===e?le.addDiagnostic(d.diagnostic.propdeclaraerr(),E.offset,E.length):"local"===i?le.addDiagnostic(d.diagnostic.declarationerr(),E.offset,E.length):(K.assume>0&&le.addDiagnostic(d.diagnostic.declarationerr(),E.offset,E.length),K.assume="static"===i?f.STATIC:f.GLOBAL);else if("TK_WORD"===O.type||"TK_RESERVED"===O.type){if(0===e){A=!1,"global"!==i&&le.addDiagnostic(d.diagnostic.declarationerr(),E.offset,E.length);break}if(2===e&&"static"!==i){le.addDiagnostic(d.diagnostic.propdeclaraerr(),E.offset,E.length),A=!1;break}if("([".includes(r.charAt(X))||le.get_token(X,!0).content.match(/^(\{|=>)$/))O.topofline=2;else{let t;if(A=!1,t=J("global"===i?"":i),"global"===i)t.map((e=>{K.global[e.name.toLowerCase()]=e}));else if(2===e)for(const e of t)e.kind===s.SymbolKind.Property&&(e.static=!0,e.full=e.full.replace(") ",") static "));else{let e="static"===i;t.map((t=>{K.local[t.name.toLowerCase()]=t,e&&(t.static=!0)}))}c.push(...t)}}else"TK_EQUALS"===O.type&&(X=E.offset+E.length,E.type="TK_WORD",O=E,E=l,2!==e&&le.addDiagnostic(d.diagnostic.reservedworderr(O.content),O.offset,O.length));A=!1;break;case"loop":if(2===e){n=le.get_token(X),A=!1,O.type="TK_WORD",":="!==n.content&&le.addDiagnostic(d.diagnostic.propdeclaraerr(),O.offset,O.length);break}ve(),"TK_COMMA"===O.type&&we(E);let S,w=0,D=1,C="loop";if("TK_EQUALS"===O.type){X=E.offset+E.length,E.type="TK_WORD",O=E,E=l,A=!1,2!==e&&le.addDiagnostic(d.diagnostic.reservedworderr(O.content),O.offset,O.length);break}if(2===e){le.addDiagnostic(d.diagnostic.propdeclaraerr(),E.offset,E.length);break}if((A="TK_WORD"===O.type&&["parse","files","read","reg"].includes(S=O.content.toLowerCase()))&&(w=1,D="parse"===S?3:2,O.type="TK_RESERVED",C+=" "+S,ve(),"TK_COMMA"===O.type&&ve()&&(O.topofline=0),A=!1),O.topofline&&"TK_COMMA"!==O.type||"TK_START_BLOCK"===O.type?w&&le.addDiagnostic(d.diagnostic.acceptparams(C,`${w}~${D}`),l.offset,l.length):c.push(...G(void 0,"{",C,w,D)),z(void 0,a))return;"TK_RESERVED"===O.type&&"until"===O.content.toLowerCase()&&(A=!0,R=O.offset,c.push(...G(void 0,void 0,"until",1)));break;case"for":for(je("(")&&(n=Ie());ve();)switch(O.type){case"TK_COMMA":break;case"TK_RESERVED":if(!("class"===O.content.toLowerCase()&&1&e)){le.addDiagnostic(d.diagnostic.reservedworderr(O.content),O.offset,O.length);break}O.type="TK_WORD";case"TK_WORD":ue(O,0)&&(c[c.length-1].def=!0);break;case"TK_OPERATOR":return"in"===O.content.toLowerCase()?(c.push(...Y()),n&&(")"!==O.content?le.addDiagnostic(d.diagnostic.missing(")"),n.offset,n.length):(A=!0,ve())),void(z(void 0,a)||"TK_RESERVED"!==O.type||"until"!==O.content.toLowerCase()||(A=!0,R=O.offset,c.push(...G(void 0,void 0,"until",1))))):(le.addDiagnostic(d.diagnostic.unknownoperatoruse(),O.offset,O.length),void(A=!1));default:A=!1;case"TK_END_EXPR":return void le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length);case"TK_EQUALS":return void le.addDiagnostic(d.diagnostic.reservedworderr(E.content),E.offset,E.length)}break;case"continue":case"break":case"goto":if(2===e){A=!1,O.type="TK_WORD",":="!==le.get_token(X,!0).content&&le.addDiagnostic(d.diagnostic.propdeclaraerr(),O.offset,O.length);break}if(ve(),"TK_COMMA"===O.type&&(we(E),le.addDiagnostic(d.diagnostic.unexpected(","),O.offset,1)),O.topofline)A=!1,"goto"===i&&le.addDiagnostic(d.diagnostic.acceptparams(i,1),E.offset,E.length);else{if(t.allIdentifierChar.test(O.content))"TK_NUMBER"===O.type&&"goto"!==i?O.content.match(/[^\d]/)&&le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length):(O.ignore=!0,O.type="TK_WORD",m(O),delete O.semantic),ve(),A=!1;else{if("("!==r.charAt(E.offset+E.length)){X=E.offset+E.length,E.type="TK_WORD",O=E,E=l,A=!1,le.addDiagnostic(d.diagnostic.reservedworderr(O.content),O.offset,O.length);break}{let e=[];ie("(",")",void 0,{},e),e.map((e=>{e.content.indexOf("\n")<0&&m({content:e.content.slice(1,-1),offset:e.offset+1,length:e.length-2,type:"",topofline:0,next_token_offset:-1})})),ve(),A=!1}}O.topofline||le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length)}break;case"as":case"catch":case"else":case"finally":case"until":le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length);break;case"super":3&e?O.ignore=!0:le.addDiagnostic(d.diagnostic.reservedworderr(O.content),O.offset,O.length),O.type="TK_WORD",A=!1;break;case"case":if(q.length&&O.topofline){let e=q.pop();q.push(O.offset),e&&le.addFoldingRange(e,E.offset,"case"),ve(),A=!1,":"===O.content||O.topofline?(A=":"===O.content,le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length)):(c.push(...G(void 0,":","case",1,20)),":"!==O.content?(le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length),A=!1):(A=!0,ve(),A=!1,"TK_START_BLOCK"===O.type?O.previous_pair_pos=a:O.topofline||(O.topofline=-1)))}else O.type="TK_WORD",le.addDiagnostic(d.diagnostic.reservedworderr(O.content),O.offset,O.length);break;case"try":if(ve(),A=!1,"TK_COMMA"===O.type&&we(E),z(!0,a),"TK_RESERVED"===O.type&&"else"!==O.content.toLowerCase()){for(;"catch"===O.content.toLowerCase();)A=!0,R=O.offset,W();for(let e of["else","finally"])O.content.toLowerCase()===e&&(A=!0,R=O.offset,ve(),A=!1,z(!0,E.offset))}break;case"isset":"("===r.charAt(O.offset+5)?(O.type="TK_WORD",A=!1):le.addDiagnostic(d.diagnostic.missing("("),O.offset,5);break;default:if(n=Fe(),"TK_EQUALS"===n.type||n.content.match(/^([<>]=?|~=|&&|\|\||[.&|?:^]|\*\*?|\/\/?|<<|>>|!?==?)$/))O.type="TK_WORD",X=u,le.addDiagnostic(d.diagnostic.reservedworderr(O.content),O.offset,O.length);else{let t={};if(E=O,O=n,A=!1,"return"===i){if("TK_COMMA"===O.type&&we(E),c.push(...G(t,void 0,i)),1&e){let e=b.positionAt(E.offset+E.length);K.returntypes||(K.returntypes={});for(const n in t)K.returntypes[n]=e}}else if("switch"===i)if(c.push(...G(void 0,"{",i,0,2)),"{"===O.content){O.previous_pair_pos=a,A=!0,L.push(X-1),q.push(0),F(++M);let e=q.pop();e&&le.addFoldingRange(e,E.offset,"case"),ve(),A=!1}else le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length);else"if"!==i&&"while"!==i||("TK_COMMA"===O.type&&we(E),c.push(...G(void 0,"{",i,1)),z(void 0,a))}}function m(e){if(K.labels){i=e.content.toLowerCase(),K.labels[i]||(K.labels[i]=[]);let t=Re(e.offset,e.length);K.labels[i].push(e.symbol=w=s.DocumentSymbol.create(e.content,void 0,s.SymbolKind.Field,t,t))}}}function W(){let e,n,o=O.offset;if(R=o,E=n=O,e=Fe(),e.topofline||"("!==e.content?(O=e,e=void 0):O=Fe(),O.topofline||"TK_WORD"!==O.type&&!t.allIdentifierChar.test(O.content))e?(X=e.offset-1,le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length)):(A=!1,O.topofline||"{"===O.content?z(null,o):le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length));else{if(A=!0,"as"!==O.content.toLowerCase()){for(;;){if("TK_WORD"!==O.type?le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length):ue(O),E=O,O=Fe(),"TK_DOT"===O.type)for(ve();;){if("TK_WORD"===O.type)fe(O),ve();else{if("%"!==O.content)break;le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length),ie("%","%"),ve()}if("TK_DOT"!==O.type)break;ve()}if(","!==O.content)break;if(E=O,O=Fe(),!t.allIdentifierChar.test(O.content))break}if(e){if("{"===O.content)return le.addDiagnostic(d.diagnostic.missing(")"),e.offset,1),z(null,o);if(")"===O.content)return ve(),A=!1,z(null,o)}else if("{"===O.content||O.topofline)return A=!1,z(null,o)}if("as"===O.content.toLowerCase())if(E=O,O=Fe(),A=!1,"TK_WORD"===O.type||t.allIdentifierChar.test(O.content))if("TK_WORD"!==O.type)le.addDiagnostic(d.diagnostic.reservedworderr(O.content),O.offset,O.length),O.type="TK_WORD";else{let t=Fe();X=O.offset+O.length,t.topofline||"{"===t.content||e&&")"===t.content?(ue(O)&&(A=!0,c[c.length-1].def=!0),e&&(")"===t.content?(X=t.offset+1,A=!0):le.addDiagnostic(d.diagnostic.missing(")"),e.offset,1)),A&&(ve(),A=!1,z(null,o))):(le.addDiagnostic(d.diagnostic.unexpected(n.content),n.offset,n.length),A=!1)}else le.addDiagnostic(d.diagnostic.unexpected(n.content),n.offset,n.length);else e&&(")"===O.content?(E=O,O=Fe()):le.addDiagnostic(d.diagnostic.missing(")"),e.offset,1)),O.topofline?(A=!1,z(null,o)):le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length)}}function $(e){let t=e.previous_extra_tokens;t&&(t.i=0)}function V(){var e;let t="";if(A=!0,ve(),A=!1,"TK_EQUALS"===O.type||"=??".includes(O.content||" ")||"TK_DOT"!==O.type&&!", \t\r\n".includes(t=r.charAt(E.offset+E.length))){let t,n;"="===O.content&&(t="=",n=O.offset),$(O),O=E,E=x,A=!1,X=null!==(e=O.skip_pos)&&void 0!==e?e:O.offset+O.length,c.push(...G(void 0,void 0,t,n))}else if("TK_DOT"===O.type)for(A=!0,ue(E);ve();){if("TK_WORD"===O.type){if(fe(O),ve(),":="===O.content)se(E);else{if("TK_DOT"===O.type)continue;"%"===O.content&&E.offset+E.length===O.offset&&se(E,null)}A=!1,"TK_EQUALS"!==O.type&&!"=??".includes(O.content||" ")&&", \t\r\n".includes(t=r.charAt(E.offset+E.length))?H(s.SymbolKind.Method,t):c.push(...G())}else A=!1,c.push(...G());break}else ue(E),H(s.SymbolKind.Function,t)}function H(e,t){let n,o,i=E;if(","===t){if(e===s.SymbolKind.Function&&l.builtin_ahkv1_commands.includes(i.content.toLowerCase())&&we(i,!0))return;le.addDiagnostic(d.diagnostic.funccallerr(),O.offset,1)}if("TK_OPERATOR"!==O.type||O.content.match(/^(not|\+\+?|--?|!|~|%|&)$/i)||le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length),o=G(),c.push(...o),i.semantic={type:e===s.SymbolKind.Function?p.function:p.method},K.funccall.push(n=s.DocumentSymbol.create(i.content,void 0,e,Re(i.offset,E.offset+E.length-i.offset),Re(i.offset,i.length))),n.paraminfo=o.paraminfo,n.offset=i.offset,i.callinfo=n,E===i){let e=r.indexOf("\n",i.offset);n.range.end=b.positionAt(e<0?oe:e)}e===s.SymbolKind.Method&&se(i,!0)}function z(e=!1,t){var n;if(me=!1,"TK_START_BLOCK"===O.type)void 0!==t&&(O.previous_pair_pos=t),A=!0,L.push(X-1),F(++M),ve(),A="TK_RESERVED"===O.type&&"else"===O.content.toLowerCase();else{if("TK_RESERVED"===O.type&&S.includes(O.content.toLowerCase())){let t=O;if("try"!==E.content.toLowerCase()&&(R=O.offset),A=!0,I())return e;t!==O&&(t!==E||A||O.topofline)||c.push(...G())}else"TK_WORD"===O.type?V():"TK_EOF"!==O.type&&(E=x,A=!1,c.push(...G())),void 0!==R&&(le.linepos[(null!==(n=E.pos)&&void 0!==n?n:E.pos=b.positionAt(E.offset)).line]=R);A="TK_RESERVED"===O.type&&"else"===O.content.toLowerCase()}if("boolean"==typeof e){if(e)A=!1;else if(A)return R=O.offset,ve(),A=!1,z(!0,E.offset),!0}else A=!1;return!1}function G(e,t,n,o=0,i=1){var r,s;let a,c,l=[],u=0,f=0,p=[],h={count:0,comma:[],miss:[],unknown:!1};if(me=!1,A){let e=le.get_token(X,!0);a=e.content?e.offset:X+1,"TK_COMMA"===e.type?h.miss.push(h.count++):e.topofline&&!B(O,e)||(++h.count,c=e)}else a=O.content?O.offset:E.offset+E.length+1,"TK_COMMA"===O.type?h.miss.push(h.count++):O.topofline&&!B(E,O)||(++h.count,c=O);for(;;){let e={};if(l.push(...Y(void 0,e,0,t)),(e=null===(r=Object.keys(e).pop())||void 0===r?void 0:r.toLowerCase())&&p.push(e),"TK_COMMA"===O.type)A=!0,++u,++h.count,"TK_COMMA"===E.type||"("===E.content?h.miss.push(h.comma.length):"TK_OPERATOR"!==E.type||E.ignore||E.content.match(/(--|\+\+|%)/)||le.addDiagnostic(d.diagnostic.unexpected(","),O.offset,1),h.comma.push(O.offset);else{if(O.topofline){A=!1;break}if(t===O.content)break;f!==X&&(le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length),A=!1)}if(f===X&&(!te||O.length))break;f=X}if(e&&(e[null!==(s=p.pop())&&void 0!==s?s:"#void"]=!0),"="===n){let e,t=p[0];!t||-1!==(e=t.indexOf("?"))&&-1!==t.indexOf(":",e)||(we(le.tokens[c.next_token_offset]),le.addDiagnostic(`${d.diagnostic.unexpected("=")}, ${d.diagnostic.didyoumean(":=").toLowerCase()}`,o,1))}else n&&(u>=i||h.count-(O===c?1:0)<o)&&le.addDiagnostic(d.diagnostic.acceptparams(n,i===o?o:`${o}~${i}`),a,E.offset+E.length-a);return"*"===E.content&&(h.unknown=!0),Object.defineProperty(l,"paraminfo",{value:h,configurable:!0}),l}function Q(){var t;let n,o=!1,i=null!==(t=O.data)&&void 0!==t?t:{content:"",offset:O.offset+O.length,length:0};switch(n=O.content.toLowerCase()){case"#dllload":o=!0;case"#include":case"#includeagain":ke(i.content.replace(/`;/g,";"),i,e,o);break;case"#dllimport":if(D=i.content.match(/^((\w|[^\x00-\x7f])+)/i)){let e,t=Re(i.offset,D[0].length),n=s.Range.create(0,0,0,0),o={t:"ptr",i:"int",s:"str",a:"astr",w:"wstr",h:"short",c:"char",f:"float",d:"double",I:"int64"},r=D[0],a=[],l="",u=0;if(de=!0,D=i.content.substring(D[0].length).match(/^\s*,[^,]+,([^,]*)/),D)for(let t of D[1].replace(/\s/g,"").replace(/^\w*[=@]?=/,"").toLowerCase().replace(/i6/g,"I"))if("u"===t)l="u";else if(o[t])a.push(e=y.create(`p${++u}_${l+o[t]}`,s.SymbolKind.Variable,n)),l="";else{if(!e||"*"!==t&&"p"!==t)return void le.addDiagnostic(d.diagnostic.invalidparam(),i.offset,i.length);e.name+="p",e=void 0}c.push(g.create(r,s.SymbolKind.Function,t,t,a))}break;case"#requires":(D=i.content.match(/^AutoHotkey\s+v(1|2)/i))&&("2"===D[1]?pe=!0:(le.maybev1=3,we(i,!0,d.diagnostic.requirev1())||le.addDiagnostic(d.diagnostic.unexpected(i.content),i.offset,i.length)));break;default:n.match(/^#(if|hotkey|(noenv|persistent|commentflag|escapechar|menumaskkey|maxmem|maxhotkeysperinterval|keyhistory)\b)/i)&&!we(O,!0)&&le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length)}}function J(n){var o;let i,s,a=[];me=!1;e:for(;ve();){if(O.topofline&&!B(E,O,K)){A=!1;break}switch(O.type){case"TK_WORD":if(i=E,ve(),"TK_EQUALS"===O.type){let t,r={},l=O.content;if("TK_DOT"===i.type?fe(E):ue(E,e,a)?(t=a[a.length-1],(s=he[t.selectionRange.start.line])&&(t.detail=Te(s.content))):n&&le.addDiagnostic(d.diagnostic.conflictserr(n,"built-in variable",E.content),E.offset,E.length),c.push(...Y(void 0,r)),t){t.returntypes={[":="===l?(null===(o=Object.keys(r).pop())||void 0===o?void 0:o.toLowerCase())||"#any":".="===l?"#string":"#number"]:!0},t.range={start:t.range.start,end:b.positionAt(E.offset+E.length)},t.def=!0,":="===l&&"object"==typeof r[" #object"]&&(t.property=Object.values(r[" #object"]));let e=t.returntypes;for(const n in e)e[n]=t.range.end}}else{if(2===e&&"."!==r.charAt(E.offset+E.length)){if(le.addDiagnostic(d.diagnostic.propnotinit(),E.offset,E.length),O.topofline&&t.allIdentifierChar.test(O.content)){E=x,A=!1;break e}O.topofline||"TK_COMMA"===O.type||Y(","),A=!1;break}if("TK_COMMA"===O.type||O.topofline&&(!["TK_COMMA","TK_OPERATOR","TK_EQUALS"].includes(O.type)||O.content.match(/^(!|~|not)$/i))){if(ue(E,e,a)){let e=a[a.length-1];(s=he[e.selectionRange.start.line])&&(e.detail=Te(s.content))}else n&&le.addDiagnostic(d.diagnostic.conflictserr(n,"built-in variable",E.content),E.offset,E.length);if("TK_COMMA"!==O.type)break e}}break;case"TK_COMMA":continue;case"TK_UNKNOWN":le.addDiagnostic(d.diagnostic.unknowntoken(O.content),O.offset,O.length);break;case"TK_RESERVED":2!==e&&le.addDiagnostic(d.diagnostic.reservedworderr(O.content),O.offset,O.length),A=!1,O.type="TK_WORD";break;case"TK_END_BLOCK":case"TK_END_EXPR":le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,1);default:break e}}return a}function Y(n,o={},i=1,a){var l,u,f;let m,v,_=c.length,T="",R=!1,S=[];for(me=!1;ve();){if(1===O.topofline){if(!n&&!B(E,O,K)){"TK_WORD"===E.type&&"."===r.charAt(E.offset-1)&&fe(E),A=!1;break}O.topofline=-1}switch(O.type){case"TK_WORD":let D="."===r.charAt(O.offset-1);if("("===r.charAt(X))break;if(ve(),"TK_COMMA"===O.type){if(D)fe(E),T+="."+E.content;else if("%"!==r.charAt(E.offset-1)){if(ue(E)&&R){let e=c[c.length-1];e.ref=e.def=!0}T+=" "+E.content}else E.ignore=!0;return o[T]=!0,A=!1,c.splice(_)}if(!("TK_OPERATOR"!==O.type||O.topofline&&O.content.match(/^(!|~|not|\+\+|--)$/i))){"%"!==r.charAt(E.offset-1)&&"%"!==r.charAt(E.offset+E.length)?D?(T+="."+E.content,fe(E)):(ue(E)&&(c[c.length-1].returntypes={"#number":!0}),T+=" "+E.content):D?(T+=".#any",se(E,null)):(T+=" #any",E.ignore=!0),A=!1;continue}if(O.topofline&&"TK_EQUALS"!==O.type&&"TK_DOT"!==O.type){if(A=!1,D)"%"!==r.charAt(E.offset-1)?(fe(E),o[T+"."+E.content]=!0):(o["#any"]=!0,E.ignore=!0);else{if("%"!==r.charAt(E.offset-1))if(ue(E)&&R){let e=c[c.length-1];e.ref=e.def=!0,T=T.slice(0,-1)+"#varref"}else T+=" "+E.content;else E.ignore=!0;o[T]=!0}return w(),c.splice(_)}if("=>"===O.content){let t={},o=c.length,r=K.funccall.length,l=E,d=e;e=1;let u=Re(l.offset,l.length),f=Y(n,t,i||1,null!=a?a:S.length?":":void 0);e=d;let p=g.create("",s.SymbolKind.Function,Re(l.offset,E.offset+E.length),Re(l.offset,0),[y.create(l.content,s.SymbolKind.Variable,u)],c.splice(o).concat(f));p.funccall=K.funccall.splice(r),p.returntypes=t;for(const e in t)t[e]=p.range.end;0!==e&&(p.parent=K),ye(p),c.push(p),T+=" $"+(le.anonymous.push(p)-1);break}if(D)"TK_EQUALS"===O.type?(T=T.replace(/\s*\S+$/,""),A=!0,":="===O.content&&se(E)):(T+="."+E.content,A=!1),fe(E);else if("%"!==r.charAt(E.offset-1)&&ue(E)){let e=c[c.length-1];if(R&&(e.ref=e.def=!0,R=!1),"TK_EQUALS"===O.type){(k=he[e.selectionRange.start.line])&&(e.detail=Te(k.content));let t={},o=O.content;A=!0,c.push(...Y(n,t,i||1,null!=a?a:S.length?":":void 0)),e.range={start:e.range.start,end:b.positionAt(E.offset+E.length)};let r=":="===o?(null===(l=Object.keys(t).pop())||void 0===l?void 0:l.toLowerCase())||"#any":".="===o?"#string":"#number";e.returntypes={[r]:e.range.end},e.ref?T=T.slice(0,-1)+"#varref":(T+=r,e.def=!0),":="===o&&"object"==typeof t[" #object"]&&(e.property=Object.values(t[" #object"]))}else A=!1,e.ref?T=T.slice(0,-1)+"#varref":T+=" "+E.content}else T+=" "+E.content,A=!1,E.ignore=!0;break;case"TK_START_EXPR":if("["===O.content){let e=!!r.charAt(O.offset-1).match(/^(\w|\)|%|[^\x00-\x7f])$/);ie("[","]"),e?T=T.replace(/\S+$/,"")+"#any":T+=" #array"}else{let t,l,m={},y=O.offset,v="("===r.charAt(E.offset+E.length);if("TK_WORD"===E.type&&v){if("."===r.charAt(E.offset-1)){let e,t=E,n={};ie("(",")",void 0,n),t.semantic={type:p.method},K.funccall.push(e=s.DocumentSymbol.create(t.content,void 0,s.SymbolKind.Method,Re(t.offset,X-t.offset),Re(t.offset,t.length))),e.paraminfo=n.paraminfo,e.offset=t.offset,t.callinfo=e,T+="."+t.content+"()",se(t,!0);continue}t=E}let b=c.length,_=O;if(ie("(",")",O.offset,m),l=X,"=>"===le.get_token(X).content){c.splice(b),E=null!==(u=(O=_).previous_token)&&void 0!==u?u:x,X=O.offset+1;let r=Z(),m=c.splice(b),v=K.funccall.length,k=t?t.offset:y;l=X,ve();let R=Y(n,C={},(null==t?void 0:t.topofline)?2:i||1,null!=a?a:S.length?":":void 0);t?(t.content.match(/^\d/)&&le.addDiagnostic(d.diagnostic.invalidsymbolname(t.content),t.offset,t.length),t.semantic={type:p.function,modifier:1<<h.definition|1<<h.readonly}):t=Object.assign({},x,{offset:_.offset}),r||(r=[],le.addDiagnostic(d.diagnostic.invalidparam(),k,l-k));let w=g.create(t.content,s.SymbolKind.Function,Re(t.offset,X-t.offset),Re(t.offset,t.length),r,m.concat(R));c.push(t.symbol=w),w.returntypes=C,le.addFoldingRangePos(w.range.start,w.range.end,"line"),w.closure=!!(1&e),ye(w),null===(f=w.funccall)||void 0===f||f.push(...K.funccall.splice(v));for(const e in C)C[e]=w.range.end;0!==e&&(w.parent=K),t.content?T+=" "+t.content.toLowerCase():T+=" $"+(le.anonymous.push(w)-1),o[T]=!0}else if(t)if("%"!==r.charAt(t.offset-1)){let e;T+=" "+t.content+"()",ue(t),t.semantic={type:p.function},K.funccall.push(e=s.DocumentSymbol.create(t.content,void 0,s.SymbolKind.Function,Re(t.offset,l-t.offset),Re(t.offset,t.length))),e.paraminfo=m.paraminfo,e.offset=t.offset,t.callinfo=e}else t.semantic={type:p.variable},t.ignore=!0;else{let e=Object.keys(m).pop()||"";if("("===r.charAt(l)){let t=e.trim().match(/^\(\s*(([\w.]|[^\x00-\x7f])+)\s*\)$/);t&&(e=t[1])}T+=v?""===T||T.slice(-1).match(/\s/)?e:"()":" "+e}}break;case"TK_START_BLOCK":if(T&&("TK_OPERATOR"!==E.type||E.content.match(/^(\+\+|--)$/))&&"TK_EQUALS"!==E.type)return o[T]=" #object"!==T||!v||v,A=!1,w(),c.splice(_);{let e=le.diagnostics.length,t=!1;if("TK_RESERVED"===E.type&&"switch"===E.content.toLowerCase()){let e;if(A=!1,O.topofline||(e=le.get_token(X)).topofline||e.type.endsWith("COMMENT"))return w(),c.splice(_);A=t=!0}else"TK_EQUALS"===E.type?":="!==E.content&&le.addDiagnostic(d.diagnostic.unknownoperatoruse(E.content),E.offset,E.length):1===i&&("TK_WORD"===E.type||"TK_OPERATOR"===E.type||E.type.startsWith("TK_END"))&&(i=0);if(ne(i>0||t,m={},v={})){T+=" "+(Object.keys(m).pop()||"#object");break}return o[T]=!0,le.diagnostics.splice(e)," #object"===T&&v&&(o[T]=v),w(),A=!1,c.splice(_)}case"TK_NUMBER":T+=" #number";break;case"TK_STRING":T+=" #string";break;case"TK_END_BLOCK":case"TK_END_EXPR":case"TK_COMMA":return A=!1,o[T]=!0," #object"===T&&v&&(o[T]=v),w(),c.splice(_);case"TK_LABEL":le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length);break;case"TK_UNKNOWN":le.addDiagnostic(d.diagnostic.unknowntoken(O.content),O.offset,O.length);break;case"TK_RESERVED":{let e=r.charAt(O.offset+O.length);if("%"===e||"%"===r.charAt(O.offset-1)){A=!1,O.type="TK_WORD",O.semantic={type:p.variable};break}if(O.content.match(/^(class|super|isset)$/i)){"isset"===O.content.toLowerCase()&&(O.ignore=!0,"("!==e&&le.addDiagnostic(d.diagnostic.missing("("),O.offset,O.length)),A=!1,O.type="TK_WORD";break}le.addDiagnostic(d.diagnostic.reservedworderr(O.content),O.offset,O.length);break}case"TK_OPERATOR":if("%"===O.content){if(r.charAt(O.offset-1).match(/\w|[^\x00-\x7f]/)?T=T.replace(/\S+$/,"#any"):"TK_DOT"===E.type?(T+=".#any",se(O,null)):T+=" #any","%"===n)return A=!1,o[T]=!0," #object"===T&&v&&(o[T]=v),w(),c.splice(_);ie("%","%")}else if("=>"===O.content&&"TK_WORD"===E.type){c.length&&c[c.length-1].name===E.content&&c.pop();let t=g.create("",s.SymbolKind.Function,Re(E.offset,E.length),Re(E.offset,0),[y.create(E.content,s.SymbolKind.Variable,Re(E.offset,E.length))]),o=K.funccall.length,i={};t.children=Y(n,i,1,null!=a?a:S.length?":":void 0),t.range.end=b.positionAt(E.offset+E.length),t.funccall=K.funccall.splice(o),t.returntypes=i;for(const e in i)i[e]=t.range.end;0!==e&&(t.parent=K),c.push(t),ye(t),T=T.replace(/\S+$/,"$"+(le.anonymous.push(t)-1))}else{if(T+=" "+O.content,t.allIdentifierChar.test(O.content)&&("%"===r[O.offset-1]||"%"===r[O.offset+O.length])){A=!1,O.type="TK_WORD",O.semantic={type:p.variable},T=T.slice(0,-1-O.length);break}if("TK_OPERATOR"!==E.type||E.content.match(/^([:?%]|\+\+|--|=>)$/)||O.content.match(/[+\-%!~]|^not$/i)||le.addDiagnostic(d.diagnostic.unknownoperatoruse(),O.offset,O.length),"&"===O.content&&("=>"===E.content||["TK_EQUALS","TK_COMMA","TK_START_EXPR"].includes(E.type))){R=!0;break}if("?"===O.content)O.ignore?T=T.slice(0,-2):S.push(O.offset);else if(":"===O.content&&void 0===S.pop()){if(":"===a)return A=!1,T=T.slice(0,-2),o[T]=!0," #object"===T&&v&&(o[T]=v),c.splice(_);le.addDiagnostic(d.diagnostic.unexpected(":"),O.offset,1)}}break;case"TK_EQUALS":T+=" :="}R=!1}return o[T]=!0," #object"===T&&v&&(o[T]=v),w(),c.splice(_);function w(){let e;for(;void 0!==(e=S.pop());)le.addDiagnostic(d.diagnostic.missing(":"),e,1)}}function Z(e={},t=!1,n=")"){var o;let i,r=!0,a=X-1,l=[],u=[",",")"===n?"(":"["],f=!1,p="",h={count:0,comma:[],miss:[],unknown:!1},m=X,g=O,v=!1;for(me=!1;ve();){if(1===O.topofline&&(O.topofline=-1),O.content===n){if("TK_COMMA"===E.type){if(t){le.addDiagnostic(d.diagnostic.unexpected(n),O.offset,O.length);break}return e["#void"]=!0,O.previous_pair_pos=a,h.miss.push(h.count++),Object.defineProperty(e,"paraminfo",{value:h,configurable:!0}),void c.push(...l)}break}if("TK_WORD"!==O.type){if(u.includes(E.content)){if("*"===O.content){let e=O;if(ve(),O.content===n){l.push(y.create("*",s.SymbolKind.Null,i=Re(0,0)));break}le.addDiagnostic(d.diagnostic.unexpected("*"),e.offset,1)}else if("&"===O.content){let e=O;if(O=Fe(),"TK_WORD"===O.type){f=!0,A=!1;continue}le.addDiagnostic(d.diagnostic.unexpected("&"),e.offset,1)}r=!1;break}r=!1;break}if(ce(O.content.toLowerCase())){r=!1;break}if(h.count++,!u.includes(E.content)&&E!==x){r=!1,h.count--;break}if(ve(),","!==O.content&&O.content!==n){if(":="===O.content||t&&"="===O.content){"="===O.content&&(we(E),le.addDiagnostic(`${d.diagnostic.unexpected("=")}, ${d.diagnostic.didyoumean(":=").toLowerCase()}`,O.offset,O.length));let e,t=O;E.content.match(/^\d/)&&le.addDiagnostic(d.diagnostic.invalidsymbolname(E.content),E.offset,E.length);let a=y.create(E.content,s.SymbolKind.Variable,i=Re(E.offset,E.length));(k=he[a.selectionRange.start.line])&&(a.detail=Te(k.content)),a.def=!0,a.defaultVal=null,l.push(a),c.push(...Y(",",e={},2)),A=!0,m=X,g=O;let u=Object.keys(e).pop();if(u)if(u=u.trim().toLowerCase(),"#string"===u)a.defaultVal=_[t.next_token_offset].content;else if("true"===u||"false"===u)a.defaultVal=u;else if(u.match(/^([-+]\s)?#number$/))if("#"===u.charAt(0))a.defaultVal=_[t.next_token_offset].content;else{let e=_[t.next_token_offset];a.defaultVal=e.content+_[e.next_token_offset].content}else"unset"!==u&&(a.range_offset=[t.offset,O.offset],v=!0);if(f?(f=!1,a.ref=!0,p="#varref",a.returntypes={"#varref":!0}):(p=null!==(o=Object.keys(e).pop())&&void 0!==o?o:"#void",a.returntypes=e),"TK_COMMA"===O.type){h.comma.push(O.offset);continue}r=O.content===n;break}if("TK_OPERATOR"===O.type){if("*"===O.content){let e=E;if(ve(),O.content===n){w=y.create(e.content,s.SymbolKind.Variable,i=Re(e.offset,e.length)),l.push(w),w.arr=!0,h.unknown=!0,m=X,g=O;break}r=!1,h.count--;break}if("?"===O.content&&O.ignore){let e=E;if(w=y.create(E.content,s.SymbolKind.Variable,i=Re(E.offset,E.length)),w.def=!0,w.defaultVal=null,l.push(w),f?(f=!1,w.ref=!0,p="#varref"):p=E.content,ve(),"TK_COMMA"===O.type){e.content.match(/^\d/)&&le.addDiagnostic(d.diagnostic.invalidsymbolname(e.content),e.offset,e.length),h.comma.push(O.offset),m=X,g=O;continue}(r=O.content===n)||(l.pop(),h.count--);break}r=!1,h.count--;break}if(t&&"TK_WORD"===E.type&&"byref"===E.content.toLowerCase()&&"TK_WORD"===O.type){we(E),le.addDiagnostic(d.diagnostic.deprecated("&","ByRef"),E.offset,E.length),A=!1,E=x;continue}r=!1,h.count--;break}{E.content.match(/^\d/)&&le.addDiagnostic(d.diagnostic.invalidsymbolname(E.content),E.offset,E.length);let e=y.create(E.content,s.SymbolKind.Variable,i=Re(E.offset,E.length));if((k=he[e.selectionRange.start.line])&&(e.detail=Te(null==k?void 0:k.content)),f?(f=!1,e.ref=e.def=!0,p="#varref"):p=e.name,l.push(e),m=X,g=O,","!==O.content)break;h.comma.push(O.offset)}}return r?(")"===n&&(e[p.toLowerCase()]=!0,Object.defineProperty(e,"paraminfo",{value:h,configurable:!0})),v&&Object.defineProperty(l,"format",{value:be.bind(void 0,le.tokens),configurable:!0}),O.previous_pair_pos=a,le.addFoldingRange(a,X,"block"),l):(c.push(...l),X=m,O=g,Object.defineProperty(e,"paraminfo",{value:h,configurable:!0}),void ie(")"===n?"(":"[",n,a,e))}function ne(e=!1,n={},i={}){var a;let l,u=E,f=O,h=c.length,m=!0,g={};for(me=!1,A=!0,O.data=i;y()&&!b(););if(!m){let t=O;return E=u,O=f,c.splice(h),X=null!==(a=O.skip_pos)&&void 0!==a?a:O.offset+O.length,e?(function(){let e=0;for(A||"TK_START_BLOCK"!==O.type||(A=!0);ve();)switch(O.type){case"TK_START_BLOCK":e++;break;case"TK_END_BLOCK":if(--e<0)return}}(),O.previous_pair_pos=f.offset,le.addDiagnostic(d.diagnostic.objectliteralerr(),t.offset,X-t.offset),!0):A=!1}return":"!==E.content&&"TK_LABEL"!==E.type||le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,O.length),"TK_END_BLOCK"===O.type?(le.addFoldingRange(O.previous_pair_pos=f.offset,O.offset),f.next_pair_pos=O.offset):le.addDiagnostic(d.diagnostic.missing("}"),f.offset,1),!0;function y(){for(;ve();)switch(l=void 0,1===O.topofline&&(O.topofline=-1),O.type){case"TK_RESERVED":case"TK_WORD":if("%"===r.charAt(X))break;return ve(),":"===O.content?(E.semantic={type:p.property},l=E,i[E.content.toLowerCase()]=E.content,!0):m=!1;case"TK_STRING":return ve(),":"===O.content?(le.addDiagnostic(d.diagnostic.invalidpropname(),E.offset,E.length),!0):m=!1;case"TK_OPERATOR":if("%"===O.content){if(ie("%","%"),v(r.charCodeAt(X)))break;if(ve(),":"===O.content)return!0}else if(t.allIdentifierChar.test(O.content)&&(ve(),":"===O.content))return E.semantic={type:p.property},E.type="TK_WORD",l=E,i[E.content.toLowerCase()]=E.content,!0;return m=!1;case"TK_LABEL":if(O.content.match(/^(\w|[^\x00-\x7f])+:$/)){let e;return ge(e=O.content.replace(":","")),i[e.toLowerCase()]=e,!0}return m=!1;case"TK_END_BLOCK":if("TK_START_BLOCK"===E.type||"TK_COMMA"===E.type)return!1;case"TK_NUMBER":if(t.allIdentifierChar.test(O.content)&&(ve(),":"===O.content))return E.type="TK_WORD",l=E,i[E.content.toLowerCase()]=E.content,E.semantic={type:p.property},!0;case"TK_START_EXPR":return m=!1;case"TK_COMMA":if("TK_COMMA"===E.type||"TK_START_BLOCK"===E.type)return!0;default:return m=!1}return!1}function b(){let e=Y(",",g={});if(c.push(...e),l)if("base"===l.content.toLowerCase()){let e=Object.keys(g).pop();e&&e.match(/\.prototype$/i)&&(e=e.slice(0,-10).trim().toLowerCase(),o&&"this"===e&&K.static&&K.kind===s.SymbolKind.Method&&(e=o.slice(0,-1).toLowerCase()),n[e.replace(/([^.]+)$/,"@$1")]=!0)}else fe(l);return"TK_COMMA"===O.type?!(A=!0):"TK_END_BLOCK"===O.type?A=!0:"TK_EOF"===O.type||!(m=!1)}}function ie(n,o,i,a={},l){var u;let f=0,m=c.length,v=X,T=E,R=[null!=i?i:O.offset],S=0,w="",D=!1,x=[],P={count:0,comma:[],miss:[],unknown:!1};for(me=!1,a.paraminfo&&(P=a.paraminfo,delete a.paraminfo);ve();){if(O.topofline){if("%"===n&&(!["TK_COMMA","TK_OPERATOR","TK_EQUALS"].includes(O.type)||O.content.match(/^(!|~|not)$/i))){we(le.tokens[R[0]]),le.tokens[R[0]].next_pair_pos=-1,le.addDiagnostic(d.diagnostic.missing("%"),R[0],1),A=!1,w="#any";break}1===O.topofline&&(O.topofline=-1)}if("("!==n&&"("===O.content)m=c.length,v=X,S=1,T=E,ie("(",")");else if(O.content===o){if(_[O.previous_pair_pos=R.pop()].next_pair_pos=O.offset,"%"!==o&&le.addFoldingRange(O.previous_pair_pos,O.offset+1,"block"),--f<0)break;")"===o&&(w+=")",S++)}else if(O.content===n){if("("===n){if(")"===r.charAt(O.offset-1)){ie("(",")",O.offset,C={}),w+="()";continue}m=c.length,v=X,S=0,w+="("}f++,R.push(X-1),T=E}else if("=>"===O.content){let t,n,i=c.splice(m),a=O,l=-1;if(")"===E.content){if(1!==S){le.addDiagnostic(d.diagnostic.unknownoperatoruse(),O.offset,2),A=!0;continue}E=T,X=v-1,O=Ie(),l=O.offset,t=Z(),t||(t=[],le.addDiagnostic(d.diagnostic.invalidparam(),l,O.offset-l+1)),n=Fe()}else{if("TK_WORD"!==E.type||"."===r.charAt(E.offset-1)){le.addDiagnostic(d.diagnostic.unknownoperatoruse(),O.offset,2),A=!0;continue}{let e;n=O,l=E.offset,t=[y.create(E.content,s.SymbolKind.Variable,e=Re(E.offset,E.length))]}}if("=>"!==n.content){O=a,X=a.offset+a.length,A=!0,w="",c.push(...i),le.addDiagnostic(d.diagnostic.unknownoperatoruse(),O.offset,2);continue}i=c.splice(m);let u=K.funccall.length,f=Y(o,void 0,1,x.length?":":void 0),p=g.create("",s.SymbolKind.Function,Re(l,E.offset+E.length-l),Re(l,0),t,i.concat(f));c.push(p),ye(p),p.funccall=K.funccall.splice(u);for(const e in C)C[e]=p.range.end;0!==e&&(p.parent=K),w=w.replace(/\([^()]*\)$/,"")+" $"+(le.anonymous.push(p)-1)}else if("TK_WORD"===O.type)if("."!==r.charAt(O.offset-1))if("("!==r.charAt(X))if("%"===n||"%"!==r.charAt(O.offset-1)&&"%"!==r.charAt(O.offset+O.length))if(ue(O)){let e=c[c.length-1];if(ve(),A=!1,D&&(e.ref=e.def=!0,D=!1),"TK_EQUALS"===O.type){(k=he[e.selectionRange.start.line])&&(e.detail=Te(k.content));let t={},n=O.content;A=!0,c.push(...Y(o,t,2,x.length?":":void 0)),e.range={start:e.range.start,end:b.positionAt(E.offset+E.length)};let i=":="===n?(null===(u=Object.keys(t).pop())||void 0===u?void 0:u.toLowerCase())||"#any":".="===n?"#string":"#number";e.returntypes={[i]:e.range.end},e.ref?w=w.slice(0,-1)+"#varref":(w+=i,e.def=!0),":="===n&&"object"==typeof t[" #object"]&&(e.property=Object.values(t[" #object"]))}else e.ref?w=w.slice(0,-1)+"#varref":w+=" "+E.content}else w+=" "+O.content;else O.ignore=!0;else{E=O,O=Ie(),E.semantic={type:p.function};let t=E,n=c.length,i={},a=Z(i),l=X;if(ve(),"=>"===O.content){let i={},r=K;a||le.addDiagnostic(d.diagnostic.invalidparam(),t.offset,O.offset-t.offset+1);let l=g.create(t.content,s.SymbolKind.Function,Re(t.offset,X-t.offset),Re(t.offset,t.length),a||[]);t.content.match(/^\d/)&&le.addDiagnostic(d.diagnostic.invalidsymbolname(t.content),t.offset,t.length),t.symbol=K=l,l.children=c.splice(n).concat(Y(o,i,2,x.length?":":void 0)),t.semantic.modifier=1<<h.definition|1<<h.readonly,K=r,l.range.end=b.positionAt(E.offset+E.length),l.closure=!!(1&e),l.returntypes=i,ye(l);for(const e in i)i[e]=l.range.end;0!==e&&(l.parent=K),c.push(l),le.addFoldingRangePos(l.range.start,l.range.end,"line"),t.content?w+=" "+t.content.toLowerCase():w+=" $"+(le.anonymous.push(l)-1)}else{if("%"!==r.charAt(t.offset-1)){let e;ue(t),K.funccall.push(e=s.DocumentSymbol.create(t.content,void 0,s.SymbolKind.Function,Re(t.offset,l-t.offset),Re(t.offset,t.length))),e.paraminfo=i.paraminfo,e.offset=t.offset,t.callinfo=e,w+=" "+t.content+"()",t.semantic={type:p.function}}else t.semantic={type:p.variable},t.ignore=!0;if(A=!1,a)for(const e of a)ce(e.name.toLowerCase())||(c.push(e),(e.ref||e.returntypes)&&(e.def=!0))}}else if("("===r.charAt(X)){let e,t=O,n={};O=Ie(),t.semantic={type:p.method},ie("(",")",void 0,n),w+="."+t.content+"()",t.semantic={type:p.method},K.funccall.push(e=s.DocumentSymbol.create(t.content,void 0,s.SymbolKind.Method,Re(t.offset,X-t.offset),Re(t.offset,t.length))),e.paraminfo=n.paraminfo,e.offset=t.offset,t.callinfo=e,se(t,!0)}else fe(O),ve(),A=!1,":="===O.content&&se(E);else if("TK_START_BLOCK"===O.type){let e={};["TK_WORD","TK_STRING","TK_NUMBER"].includes(E.type)&&le.addDiagnostic(d.diagnostic.unexpected("{"),O.offset,O.length),ne(!0,e),w+=" "+(Object.keys(e).pop()||"#object")}else if("TK_STRING"===O.type)w+=" #string",null==l||l.push(O),"["===n&&je("]")&&!O.content.match(/\n|`n/)&&ge(O.content.substring(1,O.content.length-1));else if("["===O.content){let e=!!r.charAt(O.offset-1).match(/^(\w|\)|%|[^\x00-\x7f])$/);ie("[","]"),e?w=w.replace(/\S+$/,"")+"#any":w+=" #array"}else if("%"===O.content)r.charAt(O.offset-1).match(/\w|[^\x00-\x7f]/)?w=w.replace(/\S+$/,"#any"):w+=" #any",ie("%","%");else{if(O.content.match(/^[)}]$/))return N(),A=!1,a[w.indexOf("#any")<0?"("+w+")":"#any"]=!0,void M();if("TK_RESERVED"===O.type){let e=r.charAt(O.offset+O.length);if("%"!==n&&("%"===e||"%"===r.charAt(O.offset-1))){A=!1,O.type="TK_WORD",O.semantic={type:p.variable};continue}if(O.content.match(/^(class|super|isset)$/i)){"isset"===O.content.toLowerCase()&&(O.ignore=!0,"("!==e&&le.addDiagnostic(d.diagnostic.missing("("),O.offset,O.length)),A=!1,O.type="TK_WORD";continue}le.addDiagnostic(d.diagnostic.reservedworderr(O.content),O.offset,O.length)}else if("TK_END_BLOCK"===O.type||"TK_END_EXPR"===O.type)le.addDiagnostic(d.diagnostic.unexpected(O.content),O.offset,1);else if("TK_COMMA"===O.type)if("("!==n)w+=" ,";else if(0===f)w="",++P.count,"TK_COMMA"===E.type||"("===E.content?P.miss.push(P.comma.length):"TK_OPERATOR"!==E.type||E.ignore||E.content.match(/(--|\+\+|%)/)||le.addDiagnostic(d.diagnostic.unexpected(","),O.offset,1),P.comma.push(O.offset);else{let e=w.lastIndexOf("(");w=e<0?"":w.substring(0,e+1)}else if("TK_NUMBER"===O.type)w+=" #number";else if("TK_OPERATOR"===O.type){if(w+=" "+O.content,"&"===O.content){D=!0;continue}"?"===O.content?O.ignore?w=w.slice(0,-2):x.push(O.offset):":"===O.content&&void 0===x.pop()?le.addDiagnostic(d.diagnostic.unexpected(":"),O.offset,1):"%"===n||!t.allIdentifierChar.test(O.content)||"%"!==r[O.offset-1]&&"%"!==r[O.offset+O.length]||(A=!1,O.type="TK_WORD",O.semantic={type:p.variable},w=w.slice(0,-1-O.length))}}D=!1}if(a[n+w+o]=!0,"TK_EOF"===O.type&&f>-1)"%"===o&&we(le.tokens[R[0]]),N();else if("("===n){","===E.content?P.miss.push(P.count++):"("!==E.content&&(P.count++,"*"===E.content&&(P.unknown=!0)),Object.defineProperty(a,"paraminfo",{value:P,configurable:!0});let e=_[O.previous_pair_pos];e.next_pair_pos=O.offset,void 0===e.ignore&&(e.data=P)}function M(){let e;for(;void 0!==(e=x.pop());)le.addDiagnostic(d.diagnostic.missing(":"),e,1)}function N(){let e;for(;void 0!==(e=R.pop());)le.addDiagnostic(d.diagnostic.missing(o),e,1)}M()}function se(e,t=!1){var n,i;if(""===o)return;let a,c=null===(n=e.previous_token)||void 0===n?void 0:n.previous_token;if(!c||"."===r.charAt(c.offset-1))return;if(N=c.content.toLowerCase(),"this"!==N&&"super"!==N)return;let l=K,d=!1;if(t){let t=e.callinfo.paraminfo;if("defineprop"===e.content.toLowerCase()&&t.count>1&&0!==t.miss[0]&&(u(),l&&l.kind===s.SymbolKind.Class)){let n=t.comma[0],c=_[e.next_token_offset];if("("===r.charAt(e.offset+e.length)&&(c=_[c.next_token_offset]),"TK_STRING"===c.type&&c.next_token_offset===n){let e,t=_[_[n].next_token_offset],r=c.content.slice(1,-1);return a=Re(c.offset+1,r.length),"TK_START_BLOCK"===t.type&&(null===(i=t.data)||void 0===i?void 0:i.call)?(e=g.create(r,s.SymbolKind.Method,a,a,[y.create("*",s.SymbolKind.Variable,Re(0,0))],void 0,d),e.full=`(${o.slice(0,-1)}) `+e.full):(e=y.create(r,s.SymbolKind.Property,a),e.static=d),l.cache.push(e),e}l.checkmember=!1}}else if(u(),l&&l.kind===s.SymbolKind.Class){if(null===t)return void(l.checkmember=!1);let n=y.create(e.content,s.SymbolKind.Property,a=Re(e.offset,e.length));return n.static=d,l.cache.push(n),n.def=!1,n}return;function u(){if(l.kind===s.SymbolKind.Method||l.kind===s.SymbolKind.Function)for(;l&&l.kind!==s.SymbolKind.Class;)l.kind===s.SymbolKind.Method&&l.static&&(d=!0),l=l.parent}}function ce(e,t=0){return 2!==t&&!!(l.builtin_variable.includes(e)||de&&l.builtin_variable_h.includes(e))}function ue(e,t=0,n){let i=e.content.toLowerCase();if(e.ignore||ce(i,t))return e.semantic&&delete e.semantic,e.ignore=!0,!1;let r=Re(e.offset,e.length),a=y.create(e.content,s.SymbolKind.Variable,r);return 2===t?(a.kind=s.SymbolKind.Property,fe(e),o&&(a.full=`(${o.slice(0,-1)}) ${a.name}`,e.symbol=a)):i.match(/^\d/)&&le.addDiagnostic(d.diagnostic.invalidsymbolname(e.content),e.offset,e.length),n?n.push(a):c.push(a),!0}function fe(e){let t=e.content.toLowerCase();e.semantic={type:p.property},le.object.property[t]||(le.object.property[t]=y.create(e.content,s.SymbolKind.Property,Re(e.offset,e.length)))}function ge(e){le.texts[e.toLowerCase()]=e}function ye(e){var t,n,o,i,r,a,c,l;let u=e.declaration,p=le.diagnostics,h=!1,m={},g={};if(u)if(e.kind===s.SymbolKind.Class){let i=e.staticdeclaration;null===(t=e.children)||void 0===t||t.map((t=>{if([s.SymbolKind.Property,s.SymbolKind.Method,s.SymbolKind.Class].includes(t.kind)){if(u=t.static||t.kind===s.SymbolKind.Class?i:e.declaration,!u)return;u[N=t.name.toLowerCase()]?(t.kind!==s.SymbolKind.Property||t.def)&&p.push({message:U(u[N],t),range:t.selectionRange,severity:s.DiagnosticSeverity.Error}):(t.kind!==s.SymbolKind.Variable||t.def)&&(u[N]=t)}})),null===(n=e.cache)||void 0===n||n.map((t=>{var n;u=t.static?i:e.declaration,u[N=t.name.toLowerCase()]||(u[N]=t,null===(n=e.children)||void 0===n||n.push(t))})),null===(o=e.cache)||void 0===o||o.splice(0)}else{if(e.assume===f.GLOBAL){null===(i=e.children)||void 0===i||i.map((e=>{if(e.kind===s.SymbolKind.Function){if(!(N=e.name.toLowerCase()))return;u[N]?p.push({message:U(u[N],e),range:e.selectionRange,severity:s.DiagnosticSeverity.Error}):u[N]=e,g[N]=e}})),null===(r=e.params)||void 0===r||r.map((t=>{var n;null===(n=e.children)||void 0===n||n.unshift(t),t.def=!0,t.kind=s.SymbolKind.TypeParameter,u[N=t.name.toLowerCase()]&&u[N].kind===s.SymbolKind.Function?p.push({message:U(t,u[N]),range:t.selectionRange,severity:s.DiagnosticSeverity.Error}):u[N]=t,void 0!==t.defaultVal||t.arr?h=!0:h&&p.push({message:d.diagnostic.defaultvalmissing(t.name),range:t.selectionRange,severity:s.DiagnosticSeverity.Error}),m[N]?p.push({message:d.diagnostic.conflictserr("parameter","parameter",t.name),range:t.selectionRange,severity:s.DiagnosticSeverity.Error}):m[N]=t}));for(const t in e.local)u[t]?m[t]&&p.push({message:d.diagnostic.conflictserr("local","parameter",m[t].name),range:e.local[t].selectionRange,severity:s.DiagnosticSeverity.Error}):u[t]=e.local[t];for(const t in e.global)m[t]?p.push({message:d.diagnostic.conflictserr("global","parameter",m[t].name),range:e.local[t].selectionRange,severity:s.DiagnosticSeverity.Error}):(u[t]?(le.declaration[t]=u[t],delete u[t]):le.declaration[t]=e.global[t],le.declaration[t].infunc=!0);let t=le.declaration;null===(a=e.children)||void 0===a||a.map((e=>{e.kind===s.SymbolKind.Variable&&(u[N=e.name.toLowerCase()]||(t[N]?t[N].kind!==s.SymbolKind.Variable&&p.push({message:U(t[N],e),range:e.selectionRange,severity:s.DiagnosticSeverity.Error}):(t[N]=e,e.infunc=!0)))}))}else{null===(c=e.children)||void 0===c||c.map((e=>{if(e.kind===s.SymbolKind.Function||e.def){if(!(N=e.name.toLowerCase()))return;u[N]?e.kind===s.SymbolKind.Variable&&u[N].kind===s.SymbolKind.Variable||(u[N].kind===s.SymbolKind.Variable?(p.push({message:U(e,u[N]),range:u[N].selectionRange,severity:s.DiagnosticSeverity.Error}),u[N]=e):p.push({message:U(u[N],e),range:e.selectionRange,severity:s.DiagnosticSeverity.Error})):u[N]=e,e.kind===s.SymbolKind.Function&&(g[N]=e)}})),null===(l=e.params)||void 0===l||l.map((t=>{var n;null===(n=e.children)||void 0===n||n.unshift(t),t.def=!0,t.kind=s.SymbolKind.TypeParameter,u[N=t.name.toLowerCase()]&&u[N].kind===s.SymbolKind.Function?p.push({message:U(t,u[N]),range:t.selectionRange,severity:s.DiagnosticSeverity.Error}):u[N]=t,void 0!==t.defaultVal||t.arr?h=!0:h&&p.push({message:d.diagnostic.defaultvalmissing(t.name),range:t.selectionRange,severity:s.DiagnosticSeverity.Error}),m[N]?p.push({message:d.diagnostic.conflictserr("parameter","parameter",t.name),range:t.selectionRange,severity:s.DiagnosticSeverity.Error}):m[N]=t}));for(const t in e.local)u[t]?m[t]&&p.push({message:d.diagnostic.conflictserr("local","parameter",m[t].name),range:e.local[t].selectionRange,severity:s.DiagnosticSeverity.Error}):u[t]=e.local[t];for(const t in e.global)m[t]?p.push({message:d.diagnostic.conflictserr("global","parameter",m[t].name),range:e.local[t].selectionRange,severity:s.DiagnosticSeverity.Error}):(u[t]?(le.declaration[t]=u[t],u[t].kind!==s.SymbolKind.Variable&&(e.global[t]=u[t]),delete u[t]):le.declaration[t]=e.global[t],le.declaration[t].infunc=!0)}for(const t in m)e.local[t]=m[t];for(const t in g)e.local[t]=g[t];e.kind===s.SymbolKind.Method&&m.this&&p.push({message:d.diagnostic.conflictserr("parameter","parameter","this"),range:m.this.selectionRange,severity:s.DiagnosticSeverity.Error});for(const t of["this","super"])if(e.declaration[t]){let n=e;for(;n&&(n.kind===s.SymbolKind.Method||n.kind===s.SymbolKind.Function);)n=n.local[t]||n.global[t]?void 0:n.parent;n&&n.kind===s.SymbolKind.Class&&delete e.declaration[t]}if(e.assume===f.STATIC){let t,n=e.local;for(const e in u)!n[e]&&(t=u[e]).def&&t.kind===s.SymbolKind.Variable&&(t.static=null)}}}function ve(){return A?(E=O,A="TK_EOF"!==(O=Fe()).type):A="TK_EOF"!==O.type}function we(e,t=!1,n=d.diagnostic.maybev1()){var o,i;if(pe)return!1;switch(null!==(o=le.maybev1)&&void 0!==o||(le.maybev1=1),null!==(i=le.actionwhenv1)&&void 0!==i?i:u.extsettings.ActionWhenV1IsDetected){case"SkipLine":if(!t)return!1;if(le.addDiagnostic(d.diagnostic.skipline(),e.offset,e.length,s.DiagnosticSeverity.Warning),"TK_WORD"===e.type)do{for(ve();" \t".includes(r.charAt(X)||"\0");)X++;let t=r.indexOf("\n",X);t<0&&(t=oe),E=e,e=Se(r.substring(X,t),"TK_STRING",X,t-X,0),X=t}while(je(","));return!0;case"SwitchToV1":if(!le.actived)break;u.connection.console.info([le.uri,n,d.diagnostic.tryswitchtov1()].join(" ")),n="",(0,u.setTextDocumentLanguage)(le.document.uri)&&(le.actionwhenv1="SwitchToV1");break;case"Continue":return!1;case"Warn":if(!le.actived)break;u.connection.window.showWarningMessage(n,{title:u.action.switchtov1(),action:"SwitchToV1"},{title:u.action.skipline(),action:"SkipLine"},{title:u.action.stopparsing(),action:"Stop"}).then((e=>{var t;"Stop"!==(le.actionwhenv1=null!==(t=null==e?void 0:e.action)&&void 0!==t?t:"Continue")&&("SwitchToV1"===le.actionwhenv1?(0,u.setTextDocumentLanguage)(le.document.uri):le.update())}))}throw le.clear(),X=oe,new P(n,e)}}function ke(e,t,n=0,i=!1){let r,a,c=!1,l=e[0];if("'\"".includes(l)&&e.endsWith(l)&&(e=e.slice(1,-1)),r=e.match(/^(\*[iI]\s)?(.*)$/))if(a=r[2],c=Boolean(r[1]),r=a.replace(/%(a_scriptdir|a_workingdir)%/i,le.scriptdir).replace(/%a_linefile%/i,ue),t&&le[i?"dlldir":"includedir"].set(le.document.positionAt(t.offset).line,i?z:V),r.trim()){if(!u.inBrowser)if(i)(0,o.existsSync)(r)&&(0,o.statSync)(r).isDirectory()?z=r.endsWith("/")||r.endsWith("\\")?r:r+"\\":(r.match(/\.\w+$/)||(r+=".dll"),r.includes(":")?le.dllpaths.push(r.replace(/\\/g,"/").toLowerCase()):le.dllpaths.push((z&&(0,o.existsSync)(z+r)?z+r:r).replace(/\\/g,"/").toLowerCase()));else if(t){if(r.startsWith("*")){let e=(0,u.getRCDATA)(t.content.substring(1));if(e)return N[e.uri]=e.path,void(t.data=[void 0,e.uri]);le.addDiagnostic(d.diagnostic.resourcenotfound(),t.offset,t.length,s.DiagnosticSeverity.Warning)}else(r=M(r.toLowerCase(),le.libdirs,V))&&(0,o.existsSync)(r.path)?(0,o.statSync)(r.path).isDirectory()?V=r.path:(N[r.uri]=r.path,t.data=[r.path,r.uri]):c||le.addDiagnostic(r?d.diagnostic.filenotexist(r.path):d.diagnostic.pathinvalid(),t.offset,t.length);0!==n&&le.addDiagnostic(d.diagnostic.unsupportinclude(),t.offset,t.length,s.DiagnosticSeverity.Warning)}else(r=M(r.toLowerCase().replace(/(\.d)?>$/,".d>"),le.libdirs,le.scriptpath))&&(0,o.existsSync)(r.path)&&!(0,o.statSync)(r.path).isDirectory()&&(N[r.uri]=r.path)}else i?z="":t&&le.addDiagnostic(d.diagnostic.pathinvalid(),t.offset,t.length);else e&&t&&le.addDiagnostic(d.diagnostic.pathinvalid(),t.offset,t.length)}function Te(e){if(e.startsWith(";"))return e.replace(/^\s*;\s*/gm,"");let t=e.split(/\r?\n/),n=e.startsWith("/**");return(t[0]=t[0].replace(/^\/\*+\s*/,""))||t.splice(0,1),(t[t.length-1]=t[t.length-1].replace(/\s*\*+\/\s*$/,""))||t.pop(),n?t.map((e=>e.replace(/^\s*\*(\s*(?=@)| ?)/,""))).join("\n"):t.join("\n")}function Re(e,t){return s.Range.create(le.document.positionAt(e),le.document.positionAt(e+t))}function Se(e,t,n,o,i){let s=r.charAt(n-1),a={content:e,type:t,offset:n,length:o,topofline:i,previous_token:ae,next_token_offset:-1,prefix_is_whitespace:T.includes(s)?s:void 0};return le.tokens[n]=a,ae.next_token_offset=n,a}function we(e,t){let n=0,o=0,i="",r="",s=[D.ArrayLiteral,D.Expression,D.ObjectLiteral].includes(t);return e&&(n=e.indentation_level,o=e.had_comment,i=e.last_text,r=e.last_word,s||(s=e.in_expression)),{case_body:!1,catch_block:!1,declaration_statement:!1,else_block:!1,finally_block:!1,had_comment:o,if_block:!1,in_case_statement:!1,in_case:!1,in_expression:s,indentation_level:n,last_text:i,last_word:r,loop_block:0,mode:t,parent:e,start_line_index:_.length,ternary_depth:0,try_block:!1}}function De(){if(te)return;let e=_.pop();for(;0===(null==e?void 0:e.text.length);)e=_.pop();e&&_.push(e),k.had_comment&&_.push({text:[],indent:0})}function Ce(){return 0===_[_.length-1].text.length}function xe(e=!1){if(K.wrap_line_length&&!e){let t=_[_.length-1],n=0;t.text.length>0&&(n=t.text.join("").length+q.length+(J?1:0),n>=K.wrap_line_length&&(e=!0))}(K.preserve_newlines&&Q||e)&&!Ce()&&Ke(!0)}function Ke(e=!1){if(!e&&"TK_COMMA"!==F&&"TK_EQUALS"!==F&&("TK_OPERATOR"!==F||["++","--","%"].includes(k.last_text)))for(;k.mode===D.Statement&&(k.declaration_statement||!k.if_block&&!k.loop_block&&!k.try_block);)Ne();Ce()||_.push({text:[],indent:0})}function Oe(e){let t=_[_.length-1];var n;function o(e){e&&t.text.push($.repeat(t.indent=e))}t.text.length?J&&t.text.push(" "):K.keep_array_indentation&&Ae(k.mode)&&Q?(se&&t.text.push(se),n=k.parent.mode,[D.Expression,D.Conditional].includes(n)?o(k.parent.indentation_level):o(k.indentation_level)):(se&&t.text.push(se),o(k.indentation_level)),J=!1,t.text.push(null!=e?e:q)}function Pe(){k.indentation_level+=1}function Ee(){k.indentation_level>0&&(!k.parent||k.indentation_level>k.parent.indentation_level)&&(k.indentation_level-=1)}function Me(e){k?(A.push(k),O=k):O=we(null,e),k=we(O,e)}function Ae(e){return e===D.ArrayLiteral}function Ne(){A.length>0&&(O=k,k=A.pop())}function qe(){return k.parent.mode===D.ObjectLiteral&&k.mode===D.Statement&&":"===k.last_text&&0===k.ternary_depth}function Le(){var e;if("TK_RESERVED"===F&&["try","else","finally"].includes(k.last_text)||"TK_END_EXPR"===F&&O.mode===D.Conditional||"TK_WORD"===F&&k.mode===D.BlockStatement&&(!Q&&(null===(e=ce.previous_token)||void 0===e?void 0:e.callinfo)||!k.in_case&&!["TK_WORD","TK_RESERVED","TK_START_EXPR"].includes(j)&&!["--","++","%"].includes(q))||k.declaration_statement||k.mode===D.ObjectLiteral&&":"===k.last_text&&0===k.ternary_depth){switch(Me(D.Statement),Pe(),k.last_word){case"if":case"for":case"loop":case"while":case"catch":Ke(!0);case"try":case"finally":case"else":k.declaration_statement=!0}return!0}return!1}function je(e){let t=X,n=r.charAt(t);for(;n!==e&&T.includes(n)&&++t<oe;)n=r.charAt(t);return n===e}function Fe(e=0){let t;do{t=Ie(e)}while(t.type.endsWith("COMMENT"));return t}function Ie(e=0){var n,o,i,c,l,u;let f,h,m,g=0,y=X;for(ie=0;T.includes(h=r.charAt(X++));)if("\n"===h)re=X-1,ie+=1,ee=!0;else if(X>=oe)return S(),{content:"",type:"TK_EOF",offset:oe,length:0,topofline:1,next_token_offset:-1,previous_token:ae};let _=X-1,k=le.tokens[_];if(k&&k.length){if((ee=Boolean(k.topofline&&k.type.endsWith("_BLOCK")))&&(re=_),X=null!==(n=k.skip_pos)&&void 0!==n?n:_+k.length,ae=k,k.ignore){if("TK_START_EXPR"===k.type){if(te=!0,!ge)return Ie()}else if("TK_END_EXPR"===k.type&&(te=!1,!ge))return Ie()}else k.type.endsWith("COMMENT")&&(ae=null!==(o=k.previous_token)&&void 0!==o?o:x);if(!ge){let e=k.previous_extra_tokens;e&&(y<_&&(e.i=0),e.i<e.len?(k=e.tokens[e.i++],X=_):e.i=0)}return k}if(ee){ee=!1,g=1;let n=r.indexOf("\n",X);n<0&&(n=oe);let o=r.substring(re+1,n).trim().replace(/(^|\s+);.*$/,"");if(o.includes("::")&&(me||!"\"'".includes(o[0])||!["TK_EQUALS","TK_COMMA","TK_START_EXPR"].includes(ae.type))){if(m=o.match(/^(:([^:]*):(`.|[^`])*?::)(.*)$/i)){let t;if((t=m[2].match(/[xX]/))||m[4].match(/^\s*\{?$/)?(X+=m[1].length-1,ae=Se(m[1],"TK_HOT",_,m[1].length,1)):(re=n,X=_+m[0].length,ae=Se(m[1],"TK_HOTLINE",_,m[1].length,1),_+=m[1].length,ae.skip_pos=X,ae.data={content:r.substring(_,X),offset:_,length:X-_},le.strcommpos.push({start:_,end:X,type:2})),ae.ignore=!0,S(),m[3]||le.addDiagnostic(d.diagnostic.invalidhotdef(),ae.offset,ae.length),"TK_HOTLINE"===ae.type||!t&&!m[4].match(/^\s*\{/)){if(e>5)return delete le.tokens[ae.offset],ae;ye=t=!0;let n,o=ae,s=Fe(e+1);for(;s.ignore&&"TK_STRING"===s.type;){if((X=r.indexOf("\n",n=X))<0&&(X=oe),n<X){let e=r.substring(n,X).trimRight();s.content+=e,s.length+=e.length}le.strcommpos.push({start:s.offset,end:s.offset+s.length,type:2}),t=!1,s=Fe(e+1)}ye=!1,ae=o,t||"TK_HOT"!==ae.type?X=null!==(i=o.skip_pos)&&void 0!==i?i:o.offset+o.length:(ae.type="TK_HOTLINE",ae.skip_pos=X=_+m[0].length,_+=m[1].length,ae.data={content:r.substring(_,X),offset:_,length:X-_},le.strcommpos.push({start:_,end:X,type:2}))}return ae}if(m=o.match(/^(((([<>$~*!+#^]*?)(`?;|[\x21-\x3A\x3C-\x7E]|[a-z]\w+|[^\x00-\x7f]))|~?(`?;|[\x21-\x3A\x3C-\x7E]|[a-z]\w+|[^\x00-\x7f])\s*&\s*~?(`?;|[\x21-\x3A\x3C-\x7E]|[a-z]\w+|[^\x00-\x7f]))(\s+up)?\s*::)(.*)$/i)){let e=m[9].match(/^(\s*)(([<>~*!+#^]*?)(`[{;]|[\x21-\x7A\x7C-\x7E]|[a-z]\w+|[^\x00-\x7f]))$/i);if(S(),e){let o=e[2].toLowerCase();if(!t.allIdentifierChar.test(o)||o.match(C))return re=n,X=_+m[0].length,ae=Se(m[1].replace(/\s+/g," "),"TK_HOTLINE",_,m[1].length,1),_+=ae.length+e[1].length,ae.skip_pos=X,ae.data={content:m[9].trim(),offset:_,length:X-_,data:e[2]},ae}return X=r.indexOf("::",X)+2,ae=Se(m[1].replace(/\s+/g," "),"TK_HOT",_,m[1].length,1)}}"#"!==h&&S()}if(v(h.charCodeAt(0))){for(;X<oe&&v(r.charCodeAt(X));)h+=r.charAt(X),X+=1;if("."!==r.charAt(_-1)){if(m=h.match(/^(\d+[Ee](\d+)?|(0[Xx][\da-fA-F]+)|(\d+))$/)){if(m[2]||m[3])return ae=Se(h,"TK_NUMBER",_,h.length,g),ae.semantic={type:p.number},ae;if(m[4]){if(X<oe&&"."===r.charAt(X)){let e="",t="",n=X+1;for(;n<oe&&v(r.charCodeAt(n));)e+=r.charAt(n),n+=1;if(e.match(/^\d*([Ee]\d+)?$/))return h+="."+e,X=n,ae=Se(h,"TK_NUMBER",_,h.length,g),ae.semantic={type:p.number},ae;if(e.match(/^\d*[Ee]$/)&&n<oe&&"-+".includes(r.charAt(n))){for(e+=r.charAt(n),n+=1;n<oe&&v(r.charCodeAt(n));)t+=r.charAt(n),n+=1;t.match(/^\d+$/)&&(h+="."+e+t,X=n)}}return ae=Se(h,"TK_NUMBER",_,h.length,g),ae.semantic={type:p.number},ae}if(X<oe&&"-+".includes(r.charAt(X))){let t,n=r.charAt(X),o=X;if(X+=1,t=Ie(e+1),delete le.tokens[t.offset],"TK_NUMBER"===t.type&&t.content.match(/^\d+$/))return h+=n+t.content,ae=Se(h,"TK_NUMBER",_,h.length,g),ae.semantic={type:p.number},ae;X=o}}if(w.includes(h.toLowerCase())){if(h.match(/^(and|or|not|in|is|contains)$/i))return ae=Se(h,"TK_OPERATOR",_,h.length,g);if(g||"class"!==h.toLowerCase())return ae=Se(h,"TK_RESERVED",_,h.length,g)}}return ae=Se(h,"TK_WORD",_,h.length,g)}if("("===h||"["===h){if("("===h&&g&&!te){let e,t=X;for(;t<oe;){if("\n"===(e=r.charAt(t++))){if(ye){let e=re+1,n=r.indexOf("\n",t),o=null,i=[];for(;n>0&&!(o=r.substring(t,n).match(/^\s*\)/));)i.push(n-t),n=r.indexOf("\n",t=n+1);return n<0&&(i.push(oe-t),o=r.substring(t,oe).match(/^\s*\)/)),X=o?t+o[0].length:oe,i.push(X-t),f=r.substring(_,X).trimRight(),ae=Se(r.substring(e,_)+f,"TK_STRING",_,f.length,1),le.addFoldingRange(e,X,"block"),ae.data=i,ae.ignore=!0,ae}{let e=!ae.type||"TK_START_BLOCK"===ae.type&&ae.topofline>0;for(ae=Se(h,"TK_START_EXPR",_,1,1),ae.ignore=!0,X=t-1,te=!0;" \t".includes(r.charAt(++_)||"\0");)continue;let n=r.substring(_,X).trimRight();ae.data={content:n,offset:_,length:X-_},ae.skip_pos=X;let o,i=n.match(/(?<=(^|\s))join(\S*)/i),s=ae,c=ae,l=!1,d=ge,u=X,f=(e,t)=>{};if(i){let e=i[2].replace(/`[srn]/g,"  "),t=!1,n=new E(a.TextDocument.create("","ahk2",-10,e));n.parseScript();let o=Object.values(n.tokens);_+=4+i.index,o.length&&(t=T.includes(e.charAt(e.length-1)),o.map((e=>{e.offset+=_,e.length=0,e.next_token_offset=-1})),f=(e,n)=>{let i=[];for(let t=0;t<e;t++){n=r.indexOf("\n",n+1);for(let e of o)e=Object.assign({},e),e.offset=n,i.push(e)}return{i:0,len:i.length,tokens:i,suffix_is_whitespace:t}},",)]}".includes(o[0].content)&&(l=!0))}for(ge=!0,o=Ie(),te&&"TK_EOF"!==o.type&&(ie>1&&(o.previous_extra_tokens=f(ie-1,u)),o.topofline=e?1:0,u=re,c=o,o=Ie());te&&"TK_EOF"!==o.type;)o.topofline&&(o.previous_extra_tokens=f(ie,u),o.topofline=0,u=re,l&&"?"===c.content&&(c.ignore=!0)),c=o,o=Ie();return o.ignore&&"TK_END_EXPR"===o.type&&(ie>1&&(o.previous_extra_tokens=f(ie-1,u)),s.next_pair_pos=o.offset,o.previous_pair_pos=s.offset,le.addFoldingRange(s.offset,o.offset,"block")),X=s.skip_pos,ae=(ge=d)?s:Ie()}}if((")"===e||"("===e)&&!r.substring(t-6,t-1).match(/[(\s]join\S*$/i))break}}return ae=Se(h,"TK_START_EXPR",_,1,g)}if(")"===h||"]"===h)return ae=Se(h,"TK_END_EXPR",_,1,g),")"===h&&g&&te?(te=!1,ae.ignore=!0,ge?ae:Ie()):ae;if("{"===h&&(f="TK_START_BLOCK")||"}"===h&&(f="TK_END_BLOCK"))return g&&(re=_,ee=!0),ae=Se(h,f,_,1,g);if('"'===h||"'"===h){let t,n,o=h,i=_,s=!1,a={type:p.string};for(f="",/^[\s+\-*/%:?~!&|^=<>[({,.]$/.test(h=r.charAt(_-1))||le.addDiagnostic(d.diagnostic.missingspace(),_,1);h=r.charAt(X++);)if("`"===h)X++;else{if(h===o)return f+=r.substring(_,X),ae=Se(f,"TK_STRING",_,X-_,g),le.strcommpos.push({start:_,end:X,type:2}),s&&(ae.data=null,ae.semantic=a),t&&(ae=t,X=ae.offset+ae.length),ae;if(te){if("\n"===h){let e=X-1;for(;" \t".includes(h=r.charAt(X)||"\0");)X++;if(")"===h){f=r.substring(_,e).trimRight(),ae=Se(f,"TK_STRING",_,f.length,g=0),null!=t||(t=ae),f="",le.strcommpos.push({start:_,end:_+ae.length,type:2});let n=ae.previous_token;for(;n&&(!n.ignore||"("!==n.content);)n=n.previous_token;for(le.addFoldingRange(_,e,"string"),ae=Se(")","TK_END_EXPR",X,1,1),ae.ignore=!0,n&&(n.next_pair_pos=X,ae.previous_pair_pos=n.offset),te=!1,s=!0,_=++X;" \t".includes(h=r.charAt(X)||"\0");)X++;f=r.substring(_,X),_=X}}}else if("\n"===h||";"===h&&" \t".includes(r.charAt(X-2))){f=(f+r.substring(_,X-(";"===h?2:1))).trimRight(),--X,f&&(ae=Se(f,"TK_STRING",_,f.trimLeft().length,g),le.strcommpos.push({start:_,end:_+ae.length,type:2}),s&&(ae.data=null,ae.semantic=a),null!=t||(t=ae),f="");break}}if(h){if(e>5)return ae=t,X=ae.offset+ae.length,delete le.tokens[ae.offset],ae;ye=me=!0;let c=Fe(e+1);e:for(;c.ignore&&"TK_STRING"===c.type;){let t=X,n=c.data;for(s&&(c.semantic=a);h=r.charAt(X++);)if("`"===h)X++;else{if(h===o){let e=r.substring(t,X);c.content+=e,c.length+=e.length,n[n.length-1]+=e.length,le.strcommpos.push({start:c.offset,end:c.offset+c.length,type:2});break e}if("\n"===h||";"===h&&" \t".includes(r.charAt(X-2))){let e=r.substring(t,X-(";"===h?2:1)).trimRight();e&&(c.content+=e,c.length+=e.length,n[n.length-1]+=e.length),le.strcommpos.push({start:c.offset,end:c.offset+c.length,type:2}),X--;break}}if(!h){let e=r.substring(t,--X);e&&(c.content+=e,c.length+=e.length),le.strcommpos.push({start:c.offset,end:c.offset+c.length,type:2})}c=Fe(e+1)}return c.ignore&&"TK_STRING"===c.type||((n=c.previous_token)?le.addDiagnostic(d.diagnostic.unterminated(),n.offset+n.length,1):le.addDiagnostic(d.diagnostic.missing(o),i,1)),ye=!1,ae=t,X=ae.offset+ae.length,ae}return le.addDiagnostic(d.diagnostic.unterminated(),oe,1),f+=r.substring(_,oe),ae=Se(f,"TK_STRING",_,oe-_,g),le.strcommpos.push({start:_,end:oe,type:2}),s&&(ae.data=null,ae.semantic=a),te&&(le.addFoldingRange(_,oe,"string"),te=!1),ae}if("."===h){let e=r.charAt(X);if("="===e)return X++,ae=Se(".=","TK_EQUALS",_,2,g);if(T.includes(r.charAt(X-2))&&T.includes(e))return ae=Se(h,"TK_OPERATOR",_,1,g);if(e.match(/\d/)&&("TK_EQUALS"===ae.type||"TK_OPERATOR"===ae.type)){let t=X+1,n="";for(;t<oe&&v(r.charCodeAt(t));)e+=r.charAt(t),t+=1;if(e.match(/^\d+([Ee]\d+)?$/))return X=t,h+=e,ae=Se("0"+h,"TK_NUMBER",_,h.length,g),ae.semantic={type:p.number},ae;if(t<oe&&e.match(/^\d+[Ee]$/)&&"-+".includes(r.charAt(t))){for(e+=r.charAt(t),t+=1;t<oe&&v(r.charCodeAt(t));)n+=r.charAt(t),t+=1;if(n.match(/^\d+$/))return X=t,h+=e+n,ae=Se("0"+h,"TK_NUMBER",_,h.length,g),ae.semantic={type:p.number},ae}}return ae=Se(h,T.includes(e)?"TK_UNKNOWN":"TK_DOT",_,1,g)}if(";"===h){let e,t,n,o,i="",a=g&&"\n".includes(r.charAt(re))?"TK_COMMENT":(g=0,"TK_INLINE_COMMENT"),u=_-1,f=0;for(;;){if(X=u,u=r.indexOf("\n",X+1),o=r.substring(X+1,u=u<0?oe:u).trim(),o.startsWith(";")){if(f++,e=o.match(/^;\s*@/))n=!0;else if(e=o.match(/^;+\s*([{}])/)){if("{"===e[1]?G.bracket.push(X+1):void 0!==(e=G.bracket.pop())&&le.addFoldingRange(e,X+1,"block"),1===f&&(n=!0),g)continue}else if(e=o.match(/^;(\s*~?\s*)(todo|fixme)(:?\s*)(.*)/i)){if(le.children.push(s.DocumentSymbol.create(`${e[2].toUpperCase()}: ${e[4].trim()}`,void 0,s.SymbolKind.Module,t=Re(X+1,u-X-1),t)),g)continue}else if(g){if(e=o.match(/^;\s*#(end)?region\b/i))n=!0,e[1]?void 0!==(e=G.region.pop())&&le.addFoldingRange(e,X+1,"region"):(G.region.push(X+1),(o=o.substring(e[0].length).trim())&&le.children.push(s.DocumentSymbol.create(o,void 0,s.SymbolKind.Module,t=Re(X+1,u-X-1),t)));else if(e=o.match(/^;@include\s+(.*)/i))n=!0,ke(e[1].replace(/\s+;.*$/,"").trim());else if(e=o.match(b)){let o=e.groups;if(o){for(let t in o)if(t.startsWith("tag")&&(e=null===(l=o[t])||void 0===l?void 0:l.trim()))break}else e=null===(c=e[1])||void 0===c?void 0:c.trim();e&&(le.children.push(s.DocumentSymbol.create(e,void 0,s.SymbolKind.Module,t=Re(X+1,u-X-1),t)),n=!0)}continue}X=u}break}i=r.substring(_,X).trimRight(),le.strcommpos.push({start:_,end:X,type:1});let p=le.tokens[_]={type:a,content:i,offset:_,length:i.length,next_token_offset:-1,topofline:g,ignore:n,skip_pos:X,previous_token:ae};return g?ye||n||!o[0]||o.startsWith("/*")||(he[le.document.positionAt(X).line+1]=p):T.includes(r.charAt(_-1))||le.addDiagnostic(d.diagnostic.unexpected(p.content),_,p.length),f>1&&le.addFoldingRange(_,X,"comment"),p}if("/"===h&&g&&"*"===r.charAt(X)){let t,n=r.indexOf("\n",--X),o=0;for(;!(m=r.substring(X,n>0?n:oe).match(/(^\s*\*\/)|(\*\/\s*$)/))&&n>0;)re=n,n=r.indexOf("\n",X=n+1),o++;m&&m[1]?(X=r.indexOf("*/",re)+2,ee=!0,re=X-1):X=n<0?oe:n,le.strcommpos.push({start:_,end:X,type:1});let i={type:"TK_BLOCK_COMMENT",content:r.substring(_,X),offset:_,length:X-_,next_token_offset:-1,previous_token:ae,topofline:g,skip_pos:X};if(!ye){if(e>5)return i;let n=ae,o=X;(t=Ie(1)).length&&(ie<2&&(null!==(u=t.prefix_is_whitespace)&&void 0!==u||(t.prefix_is_whitespace=" "),he[le.document.positionAt(t.offset).line]=i),i.next_token_offset=t.offset),ae=n,X=o}return le.tokens[_]=i,o&&le.addFoldingRange(_,X,"comment"),i}if(R.includes(h)){for(;X<oe&&R.includes(h+r.charAt(X))&&(h+=r.charAt(X),X+=1,!(X>=oe)););if(","===h)return ae=Se(h,"TK_COMMA",_,1,g);if("?"===h){ae=Se(h,"TK_OPERATOR",_,1,g);let t=X,n=ae,o=Fe(e+1);return X=t,"TK_COMMA"!==o.type&&"TK_END_EXPR"!==o.type&&"}"!==o.content&&"TK_EOF"!==o.type||(n.ignore=!0),ae=n}return ae=Se(h,h.match(/([:.+\-*/|&^]|\/\/|>>|<<)=/)?"TK_EQUALS":"TK_OPERATOR",_,h.length,g)}if("#"===h){let e="#";for(;v((h=r.charAt(X)).charCodeAt(0));)e+=h,X++;if(fe.push(_),ae=Se(e,"TK_SHARP",_,e.length,g),"#hotif"===e.toLowerCase()&&g&&T.includes(h))return ae;if(re=r.indexOf("\n",_=X),X=re<0?oe:re,g&&T.includes(h)){if(" "===h||"\t"===h){for(;" \t".includes(r.charAt(_)||"\0");)_++;let e=r.substring(_,X).trimRight().replace(/(^|\s+);.*$/,"");ae.skip_pos=X=_+e.length,ae.data={content:e,offset:_,length:e.length}}}else ae.type="TK_UNKNOWN",ae.content+=r.substring(_,X).trimRight(),ae.length+=X-_;return ae}return ae=Se(h,"TK_UNKNOWN",_,h.length,g);function S(){fe.length>1&&le.addFoldingRange(fe[0],fe.pop(),"imports"),fe.length=0}}function We(){let e=_[k.start_line_index-1];return(null==e?void 0:e.text.length)?e.indent:k.indentation_level}function $e(){var e,t;let n=!1;if((I.match(/[^\W]$/)||["TK_END_EXPR","TK_STRING"].includes(F))&&(J=!0),Le()&&(n=k.declaration_statement,!Q&&["else","finally"].includes(k.last_word)&&["if","while","loop","for","try","switch"].includes(L)&&Ee()),"TK_RESERVED"===j){if(["break","continue","global","goto","local","return","static","throw"].includes(L))Q&&Ke(n);else{let e=!1;switch(L){case"else":for(;k.mode===D.Statement&&!k.if_block&&!k.loop_block&&(!k.catch_block||k.else_block);)Ne();break;case"finally":for(;!(k.mode!==D.Statement||k.catch_block||k.try_block||k.else_block&&k.catch_block);)Ne();break;case"catch":for(;k.mode===D.Statement&&!k.try_block&&(!k.catch_block||k.else_block);)Ne();break;case"until":for(;k.mode===D.Statement&&1!==k.loop_block;)Ne();break;case"case":case"class":for(;k.mode===D.Statement;)Ne();break;case"if":case"for":case"loop":case"while":case"try":case"switch":if(!n)for(;k.mode===D.Statement&&k.declaration_statement;)Ne()}if(k.if_block?"else"===L?(k.if_block=!1,k.else_block=!0,e=!0):k.if_block=!1:k.loop_block?1===k.loop_block&&"until"===L?(k.loop_block=0,e=!0):"else"===L?(k.else_block=!0,k.loop_block=0,e=!0):k.loop_block=0:k.try_block?"catch"===L?(k.try_block=!1,k.catch_block=!0,e=!0):"finally"===L?(k.try_block=!1,k.finally_block=!0,e=!0):k.try_block=!1:k.catch_block?"finally"===L?(k.catch_block=k.else_block=!1,k.finally_block=!0,e=!0):"else"===L?(k.else_block=!0,e=!0):"catch"===L?e=!0:k.catch_block=k.else_block=!1:k.else_block=k.finally_block=!1,"class"===L)return Ke(),Oe(),k.last_word=L,Me(D.Statement),void(Y=!0);if("case"===L&&(k.in_case_statement||"BlockStatement"===k.mode&&"switch"===k.last_word))return Ke(),k.case_body&&(Ee(),k.case_body=!1),Oe(),k.in_case=!0,void(k.in_case_statement=!0);switch(e?(De(),"}"!==k.last_text||K.one_true_brace<1||Q&&K.preserve_newlines&&!K.one_true_brace?Ke(!0):J=ne):Q&&("else"===I&&!K.preserve_newlines&&["if","for","loop","while","try","switch"].includes(L)?Ee():Ke(n)),L){case"loop":k.loop_block=1;break;case"while":case"for":k.loop_block=2;break;case"if":k.if_block=!0;break;case"try":k.try_block=!0}}k.last_word=L}else!Q||k.mode!==D.Statement||k.is_expression||B(null!==(e=ce.previous_token)&&void 0!==e?e:x,ce)?Q&&(K.preserve_newlines||ce.symbol)?Ke(!ce.symbol):["TK_COMMA","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"].includes(F)&&(qe()||xe()):Ke(n),!Y&&k.mode===D.BlockStatement&&(null===(t=ce.symbol)||void 0===t?void 0:t.children)&&(Me(D.Statement),Y=!0),k.last_word="_";Oe()}function Ve(){var e;Ke(),Oe();let t=null===(e=ce.data)||void 0===e?void 0:e.content;t?Oe("TK_HOTLINE"===j?t:" "+t):J=ne}function Ue(){return Q&&(k.parent.mode===D.BlockStatement&&["TK_END_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_WORD","TK_STRING"].includes(F)||"TK_OPERATOR"===F&&I.match(/^(\+\+|--|%)$/)||"TK_RESERVED"===F&&I.match(/^(break|continue|goto|global|local|loop|return|static|throw)$/))}this.document=e,e.uri&&(this.scriptpath=(ue=c.URI.parse(this.uri=e.uri.toLowerCase()).fsPath).replace(/\\[^\\]+$/,""),this.initlibdirs(n)),this.get_token=function(e,t=!1){let n,o,i=X;if(void 0!==e){X=e,o=ae;do{n=Ie()}while(t&&n.type.endsWith("COMMENT"));X=i,ae=o}else do{n=Ie()}while(t&&n.type.endsWith("COMMENT"));return n},this.find_token=function(e,t=!1){var n,o,i;let s,a=e,c=r.charAt(e),l=le.tokens,d={type:"TK_EOF",content:"",offset:oe,length:0,next_token_offset:-1,topofline:1};if(!c)return d;if(T.includes(c)){for(;T.includes(c=r.charAt(++a)||"\0");)continue;if(s=l[a])return s;if("\0"===c)return(s=l[le.strcommpos[le.strcommpos.length-1].start])&&a===s.offset+s.length?s:d}else{if(s=l[a])return s;if(v(c.charCodeAt(0)))for(;v(r.charCodeAt(--a));)continue;else for(;!T.includes(c=r.charAt(--a))&&!v(c.charCodeAt(0)););if(s=null!==(n=l[++a])&&void 0!==n?n:l[a-1]){if(e>=s.offset&&e<s.offset+s.length)return s;for(;(s=l[s.next_token_offset])&&!(s.offset>e);)if(e<s.offset+s.length)return s}}return t?d:null!==(i=l[null===(o=le.strcommpos.find((t=>e>=t.start&&t.end>=e)))||void 0===o?void 0:o.start])&&void 0!==i?i:d},this.beautify=function(e,t){var n,o,i;let s,a;for(le.isparsed||le.parseScript(),K=Object.assign({break_chained_methods:!1,ignore_comment:!1,indent_string:"\t",keep_array_indentation:!0,max_preserve_newlines:3,preserve_newlines:!0,space_before_conditional:!0,space_in_empty_paren:!1,space_in_other:!0,space_in_paren:!1,wrap_line_length:0,white_space_before_inline_comment:null==e?void 0:e.indent_string},e),isNaN(K.one_true_brace=Number(K.one_true_brace))&&delete K.one_true_brace,K.white_space_before_inline_comment||(K.white_space_before_inline_comment="\t"),F=W=I="",ee=!0,ae=x,re=-1,a=oe,ce=le.get_token(0),se=r.substring(r.lastIndexOf("\n",X=ce.offset)+1,X),Y=J=!1,ge=!0,$=null!==(n=K.indent_string)&&void 0!==n?n:"\t",ne=null===(o=K.space_in_other)||void 0===o||o,_=[{text:[],indent:0}],A=[],k=null,Me(D.BlockStatement),t&&(a=le.document.offsetAt(t.end),ce=le.find_token(le.document.offsetAt(t.start)),t.start=le.document.positionAt(X=ce.offset),se=r.substring(r.lastIndexOf("\n",X)+1,X).replace(/\S.*$/,""));;){if(j=(ce=Ie()).type,L=(q=ce.content).toLowerCase(),ce.offset>=a){if(t){let e=ce.previous_token,n=X;if("TK_RESERVED"===F&&["try","else","finally"].includes(I)&&Pe(),k.declaration_statement&&Ce()||Ke(),e){if(k.had_comment)for(;(ce=le.find_token(e.offset+e.length)).offset<a;)e=ce;for(n=e.offset+e.length;" \t".includes(r.charAt(n)||"\0");n++);for(T.includes(r.charAt(n))||(n=e.offset+e.length);Ce();)_.pop()}t.end=le.document.positionAt(n),t.indent_string=se+$.repeat(k.indentation_level)}for(;k.mode===D.Statement;)Ne();break}if(Y&&!(Y=ie?!c(ce):"TK_START_BLOCK"!==j||ce.data))Ne(),F="TK_END_EXPR",k.last_text=")",Q=ie>0;else if(Q=ie>0)if(te){Ke();for(let e=1;e<ie;e++)_.push({text:[],indent:0})}else if(!Y&&!k.in_expression&&(ce.type.endsWith("COMMENT")||!B(k.mode===D.Statement?null!==(i=ce.previous_token)&&void 0!==i?i:x:{},ce))&&("TK_RESERVED"!==F||!["catch","else","finally","until"].includes(I))){K.max_preserve_newlines&&ie>K.max_preserve_newlines&&(ie=K.max_preserve_newlines),Ce()||_.push({text:[],indent:0});for(let e=1;e<ie;e++)_.push({text:[],indent:0})}ve[j](),j.endsWith("COMMENT")||(!Y&&"TK_RESERVED"===j&&["if","for","while","loop","catch","switch"].includes(L)&&(Y=!0,Me(D.Conditional),"switch"!==L&&Pe()),W=k.last_text,k.last_text=L,k.had_comment=0,F=j,I=L)}return s=_.map((e=>e.text.join(""))).join("\n"),_=[],ge=!1,s;function c(e){if(![D.Conditional,D.Statement].includes(k.mode)||k.parent.mode===D.ObjectLiteral)return!1;switch(e.type){case"TK_DOT":case"TK_COMMA":case"TK_EQUALS":case"TK_COMMENT":case"TK_INLINE_COMMENT":case"TK_BLOCK_COMMENT":return!1;case"TK_OPERATOR":return Boolean(e.content.match(/^(!|~|not|%|\+\+|--)$/i));case"TK_STRING":return!e.ignore;default:let t=e.previous_token;switch(t.type){case"TK_COMMA":case"TK_EQUALS":return!1;case"TK_OPERATOR":return Boolean(t.content.match(/^(\+\+|--|%)$/))}}return!0}},i||e.uri.match(/\.d\.(ahk2?|ah2)(?=(\?|$))/i)?(this.d=i||1,this.parseScript=function(){var e,t,n,o,i,a,c,l,d;r=this.document.getText(),oe=r.length,V=this.scriptpath,ae=x,ee=!0,X=0,re=-1;let f,m,v="",b=0,_=0,k=0,T=!1;this.clear(),this.reflat=!0,G={region:[],bracket:[]},this.maybev1=void 0;let R,S=0,w=[],D=[],C=[s.DocumentSymbol.create("",void 0,s.SymbolKind.Namespace,R=Re(0,0),R,this.children)];for(N=this.include,C[0].declaration=this.declaration,he={};Ie().length;)continue;for(w=Object.values(this.tokens),k=w.length;b<k;)switch((f=w[b]).type){case"TK_WORD":if(_=b+1,_<k)if(S&&((m=w[_]).topofline||"=>"===m.content||"["===m.content)){let i=y.create(f.content,s.SymbolKind.Property,R=Re(f.offset,f.length));f.symbol=i,f.semantic={type:p.property,modifier:1<<h.definition|1<<h.readonly|(T?1<<h.static:0)},null===(e=C[S].children)||void 0===e||e.push(i),i.static=T,i.full=`(${D.join(".")}) ${T?"static ":""}`+i.name,T&&S?C[S].staticdeclaration[i.name.toLowerCase()]=i:C[S].declaration[i.name.toLowerCase()]=i,w[b-(T?2:1)].type.endsWith("COMMENT")&&(i.detail=Te(w[b-(T?2:1)].content));let r=[];if("["===m.content){for(;"]"!==(m=w[++_]).content;)if("TK_WORD"===m.type){let e=y.create(m.content,s.SymbolKind.Variable,R=Re(m.offset,m.length));r.push(e),m.semantic={type:p.parameter,modifier:1<<h.definition};let t=w[_+1];"?"===t.content?(e.defaultVal=null,_++):":="===t.content?e.defaultVal=w[_+=2].content:"*"===t.content&&(e.arr=!0,_++)}m=w[++_]}if("{"===m.content)for(i.children=[];"}"!==(f=w[++_]).content;)if("=>"===f.content){let e,o=g.create(m.content,s.SymbolKind.Function,R=Re(m.offset,m.length),R,r,void 0,T);for(m.symbol=o,m=w[++_],"TK_START_EXPR"===m.type&&(m=w[++_]),e=[],"TK_WORD"===m.type?e.push("#"+m.content.toLowerCase()):"TK_NUMBER"===m.type&&e.push(m.content);"|"===w[_+1].content;)"TK_WORD"===(m=w[_+=2]).type?(e.push("#"+m.content),m.semantic={type:p.class}):"TK_NUMBER"===m.type?e.push(m.content):_--;"TK_END_EXPR"===w[_+1].type&&(m=w[++_]),o.range.end=this.document.positionAt(m.offset+m.length),"#void"!==e[0]&&(o.returntypes={[e.length>1?`[${e.join(",")}]`:null!==(t=e.pop())&&void 0!==t?t:"#any"]:!0}),null===(n=i.children)||void 0===n||n.push(o)}else m=f;else{let e=[];if("=>"===m.content){for(m=w[++_],"TK_START_EXPR"===m.type&&(m=w[++_]),e=[],"TK_WORD"===m.type&&e.push("#"+m.content.toLowerCase());"|"===w[_+1].content;)"TK_WORD"===(m=w[_+=2]).type?(e.push("#"+m.content),m.semantic={type:p.class}):_--;"TK_END_EXPR"===w[_+1].type&&(m=w[++_])}"#void"!==e[0]&&(i.returntypes={[e.length>1?`[${e.join(",")}]`:null!==(o=e.pop())&&void 0!==o?o:"#any"]:!0})}}else if("("===w[_].content){let e=[],t=!1,n=0;for(;")"!==(m=w[++_]).content;){let o;switch(m.type){case"TK_WORD":o=y.create(m.content,s.SymbolKind.Variable,R=Re(m.offset,m.length)),o.ref=t,t=!1,e.push(o),m.semantic={type:p.parameter,modifier:1<<h.definition},":="===(m=w[_+1]).content?(_+=2,"+"===(m=w[_]).content||"-"===m.content?o.defaultVal=m.content+w[++_].content:o.defaultVal=m.content):"?"===m.content?(o.defaultVal=null,_++):(n&&(o.defaultVal=!1),"*"===m.content?(o.arr=!0,_++):"["===m.content?(n++,_++):"]"===m.content&&(n--,_++));break;case"TK_STRING":e.push(o=y.create(m.content,s.SymbolKind.String,R=Re(m.offset,m.length))),n&&(o.defaultVal=!1);break;default:t=!1,"&"===m.content?t=!0:"*"===m.content?(e.push(y.create(m.content,s.SymbolKind.Variable,R=Re(m.offset,m.length))),m.semantic={type:p.parameter,modifier:1<<h.definition}):"["===m.content?n++:"]"===m.content&&n--}}let o,r="",c="";if(m=w[_],_<k-2&&"=>"===w[_+1].content){o=[],"TK_START_EXPR"===w[_+2].type&&_++;do{for(_+=1,r="",c="";(m=w[_+1])&&("TK_WORD"===m.type||"TK_DOT"===m.type)&&!m.topofline&&c!==m.type;)r+=m.content,_++,c=m.type,m.semantic={type:p.class};r&&(o.push(r=r.replace(/(?<=(^|\.))([^.$@#]+)$/,"@$2").replace("$","").toLowerCase()),"@void"===r&&o.pop())}while("|"===(null===(i=w[_+1])||void 0===i?void 0:i.content));"TK_END_EXPR"!==(null==m?void 0:m.type)&&(m=w[_])}let l=g.create(f.content,S?s.SymbolKind.Method:s.SymbolKind.Function,Re(f.offset,m.offset+m.length-f.offset),Re(f.offset,f.length),e,[],T);if(f.symbol=l,l.full=(T?"static ":"")+this.document.getText(l.range),l.static=T,l.declaration={},f.semantic={type:S?p.method:p.function,modifier:1<<h.definition|1<<h.readonly|(T?1<<h.static:0)},S&&(l.full=`(${D.join(".")}) `+l.full),null==o?void 0:o.length){let e={};o.map((t=>e[t]=!0)),l.returntypes=e}(b-=T?2:1)>=0&&w[b].type.endsWith("COMMENT")&&(l.detail=Te(w[b].content)),null===(a=C[S].children)||void 0===a||a.push(l),T&&S?C[S].staticdeclaration[l.name.toLowerCase()]=l:C[S].declaration[l.name.toLowerCase()]=l}b=_+1,T=!1;break;case"TK_RESERVED":if(T=!1,"static"===(v=f.content.toLowerCase()))T=!0,b++;else if(b<k-1&&"class"===v){let e="",t=s.DocumentSymbol.create((f=w[++b]).content.replace("_","#"),w[b-2].type.endsWith("COMMENT")?Te(w[b-2].content):void 0,s.SymbolKind.Class,Re(w[b-1].offset,0),Re(f.offset,f.length),[]),n=t;if(n.declaration={},n.staticdeclaration={},_=b+1,D.push(t.name),n.full=D.join("."),n.returntypes={[n.full.replace(/([^.]+)$/,"@$1").toLowerCase()]:!0},f.semantic={type:p.class,modifier:1<<h.definition|1<<h.readonly},f.symbol=t,n.funccall=[],n.extends="",n.declaration={},n.staticdeclaration={},null===(c=C[S].children)||void 0===c||c.push(t),0===S?C[0].declaration[t.name.toLowerCase()]=t:C[S].staticdeclaration[t.name.toLowerCase()]=t,"extends"===(null===(l=m=w[_])||void 0===l?void 0:l.content.toLowerCase())){for(;++_<k&&"{"!==(m=w[_]).content;)e+=m.content;n.extends=e}S++,C.push(t),b=_+1}else f.type="TK_WORD";break;case"TK_END_BLOCK":if(S){S--,D.pop();let e=C.pop();e.range.end=this.document.positionAt(f.offset+f.length),this.addFoldingRangePos(e.range.start,e.range.end)}default:b++,T=!1}if(!(this.d<0)){if(2&this.d){let e,t=this.uri.endsWith("/ahk2_h.d.ahk")?1:0;this.children.map((n=>{var o;switch(n.kind){case s.SymbolKind.Function:n.def=!1;case s.SymbolKind.Class:n.overwrite=t,n.uri=this.uri,(!(e=u.ahkvars[v=n.name.toLowerCase()])||t>=(null!==(o=e.overwrite)&&void 0!==o?o:0))&&(u.ahkvars[v]=n)}}));let n=this.declaration.struct;n&&n.kind===s.SymbolKind.Class&&(n.def=!1),n=null===(d=u.ahkvars.class)||void 0===d?void 0:d.staticdeclaration.call,n&&(n.def=!1)}H({},this.children,this.diagnostics),this.diags=this.diagnostics.length,this.isparsed=!0,G.region.map((e=>this.addFoldingRange(e,X-1,"region")))}}):this.parseScript=function(){var e;r=this.document.getText(),oe=r.length,V=this.scriptpath,z="",ee=!0,pe=!1,ae=x,X=0,re=-1,G={region:[],bracket:[]},te=!1,de=u.isahk2_h,this.clear(),this.reflat=!0,N=this.include,he={},this.maybev1=void 0;try{let e=(0,u.getRCDATA)("#2");e&&(N[e.uri]=e.path),this.children.push(..._e())}catch(e){if(!(e instanceof P))throw e;e.message&&this.addDiagnostic(e.message,e.token.offset,e.token.length,s.DiagnosticSeverity.Warning)}H(this.declaration,this.children,this.diagnostics),this.diags=this.diagnostics.length,this.isparsed=!0,G.region.map((e=>this.addFoldingRange(e,X-1,"region"))),this.actived&&(null!==(e=this.actionwhenv1)&&void 0!==e||(this.actionwhenv1="Continue"))}}clear(){this.texts={},this.declaration={},this.include={},this.tokens={},this.linepos={},this.labels={},this.object={method:{},property:{},userdef:{}},this.funccall.length=this.diagnostics.length=this.foldingranges.length=0,this.children.length=this.dllpaths.length=this.strcommpos.length=this.anonymous.length=0,this.includedir=new Map,this.dlldir=new Map}searchNode(e,t,n){var o,i;let r,a,c=this.uri;if(e=e.toLowerCase(),n===s.SymbolKind.Variable||n===s.SymbolKind.Class||n===s.SymbolKind.Function){let n,l,d=!0,u=!1;if(e.startsWith("$"))return(r=this.anonymous[parseInt(e.substring(1))])?{node:r,uri:c}:null;if(t&&(n=this.searchScopedNode(t),n)){if(n.kind===s.SymbolKind.Function&&n.static&&(u=!0),n.kind===s.SymbolKind.Class&&n.extends){let e=this.tokens,i=e[e[this.document.offsetAt(n.selectionRange.start)].next_token_offset];(null!==(o=i.pos)&&void 0!==o?o:i.pos=this.document.positionAt(i.offset)).line===t.line&&(n=void 0)}l=n}if(n){for(;n;){let t=n.declaration,o=n.local,d=n.global;if(o&&(a=o[e])&&(!u||a.static))return a.selectionRange.start.character!==a.selectionRange.end.character&&{node:a,uri:c,scope:n};if(d&&d[e])return{node:this.declaration[e]||d[e],uri:c,scope:n};if(n.assume===f.GLOBAL)return(r=this.declaration[e])?{node:r,uri:c,scope:n}:void 0;if(t&&n.kind!==s.SymbolKind.Class&&(a=t[e]))if(u){if(a.static)return{node:a,uri:c,scope:n};l!==n&&null!==a.static||(r=a)}else{if(n.kind===s.SymbolKind.Method||!n.parent)return{node:a,uri:c,scope:n};r=a}else if(u&&l===n&&(r=null===(i=n.children)||void 0===i?void 0:i.find((t=>t.name.toLowerCase()===e)),r&&r.static))return{node:r,uri:c,scope:n};n=n.parent}if(r)return u&&(a=r.def?r:this.declaration[e])?{node:a,uri:c,scope:n}:{node:r,uri:c,fn_is_static:u,scope:n};if(["this","super"].includes(e)){for(n=l;n&&n.kind!==s.SymbolKind.Class;)!n.static||n.kind!==s.SymbolKind.Method&&n.kind!==s.SymbolKind.Property||(d=!1),n=n.parent;if(n){if("this"===e)return{node:n,uri:c,ref:d,scope:n};if(n.extends){let e=I(this,n.extends.toLowerCase(),s.Position.create(0,0),s.SymbolKind.Class);if(e)return{node:e[0].node,uri:e[0].uri,ref:d,scope:n}}return}}if(!n&&this.declaration[e])return{node:this.declaration[e],uri:c}}else if(r=this.declaration[e])return{node:r,uri:c,scope:n}}else if(n===s.SymbolKind.Field){let n=t?this.searchScopedNode(t):void 0,o=(n||this).labels;if(o){":"===e.slice(-1)&&(e=e.slice(0,-1));let t=o[e];if(t&&t[0].def)return{node:t[0],uri:c,scope:n}}if(n)return null}}buildContext(e,t=!0,n=!1){var o;let i=s.SymbolKind.Null,r=this.document,a=this.tokens,{line:c,character:l}=e,d=r.getText(s.Range.create(c,0,c+1,0)).trimRight(),u="",f="",h=l;for(;--h>=0&&v(d.charCodeAt(h)););if(!n)for(;v(d.charCodeAt(l));)l++;let m=d.substring(++h,l),g=s.Range.create(c,h,c,l),y=r.offsetAt(g.start),b=a[y];if(t){let e=b?b.previous_token:a[y-1];if("."===(null==e?void 0:e.content)&&"TK_OPERATOR"!==e.type){let t="",n=e.offset,o=e,i=e.previous_token,s={")":0,"]":0,"}":0};for(;i;)switch(i.type){case"TK_DOT":o=i,i=i.previous_token;break;case"TK_WORD":o=i,(i=i.previous_token)&&"TK_DOT"!==i.type&&(i=void 0);break;case"TK_START_BLOCK":o=i,i=--s["}"]<0?void 0:i.previous_token;break;case"TK_START_EXPR":o=i,--s["["===i.content?"]":")"]<0?i=void 0:(i=i.previous_token)&&("TK_WORD"===i.type&&i.offset+i.length===o.offset||(i=void 0));break;case"TK_END_EXPR":case"TK_END_BLOCK":o=i,s[i.content]++,(i=a[i.previous_pair_pos])&&("}"!==i.content||i.data)?i.next_pair_pos=o.offset:(o=x,i=void 0);break;case"TK_OPERATOR":if(o=i,"%"===i.content){(i=a[i.previous_pair_pos])?i.next_pair_pos=o.offset:o=x;break}default:i=void 0}if((s[")"]>0||s["]"]>0||s["}"]>0)&&(o=x),"TK_WORD"===o.type||o.type.startsWith("TK_START_")||"%"===o.content&&o.next_pair_pos){let e=o;for(t=o.content,o=a[o.next_token_offset];o.offset<n;)switch(o.type){case"TK_DOT":t+=".",o=a[o.next_token_offset];break;case"TK_STRING":t+='""',o=a[o.next_token_offset];break;case"TK_START_BLOCK":t+=" {}",o=a[o.next_pair_pos];break;case"TK_START_EXPR":if(!o.prefix_is_whitespace){t+="["===o.content?"[]":"()",o=a[o.next_pair_pos],o=a[o.next_token_offset];break}default:t+=(o.prefix_is_whitespace?" ":"")+o.content,o=a[o.next_token_offset]}g.start=r.positionAt(e.offset)}else t="#any";m=t+"."+m}}if(b||"#"!==d.charAt(h-1)||(b=a[--y]),g.start.character>0&&(u=this.document.getText(s.Range.create(g.start.line,0,g.start.line,g.start.character)).trimLeft()),f=this.document.getText(s.Range.create(g.end.line,g.end.character,g.end.line+1,0)).trimRight(),b)if("TK_WORD"===b.type){let e,t=b.semantic,n=b.symbol;if(n)i=n.kind,i===s.SymbolKind.Class?m=n.full:i!==s.SymbolKind.Property&&i!==s.SymbolKind.Method||(m=(e=n).full.replace(/^\((\S+)\).*$/i,((...t)=>`${e.static?t[1]:t[1].replace(/([^.]+)$/,"@$1")}.${e.name}`)));else if(t)switch(t.type){case p.function:i=s.SymbolKind.Function;break;case p.method:i=s.SymbolKind.Method;break;case p.class:i=s.SymbolKind.Class;break;case p.property:i=s.SymbolKind.Property;break;case p.parameter:case p.variable:i=s.SymbolKind.Variable}else i="TK_DOT"===(null===(o=b.previous_token)||void 0===o?void 0:o.type)?s.SymbolKind.Property:s.SymbolKind.Variable}else"TK_LABEL"===b.type&&(i=s.SymbolKind.Field);return{text:m,range:g,kind:i,pre:u,suf:f,linetext:d,token:b}}getNodeAtPosition(e){let t=this.buildContext(e);if(t){let e=this.searchNode(t.text.toLowerCase(),t.range.end,t.kind);if(e)return e.node}}searchScopedNode(e,t){let n,o,{line:i,character:r}=e;t||(t=this.children);for(const a of t)if(!(i>a.range.end.line||i<a.selectionRange.start.line||i===a.selectionRange.start.line&&r<a.selectionRange.start.character||i===a.range.end.line&&r>a.range.end.character)){if(a.kind!==s.SymbolKind.Variable&&(n=a.children)){if(o=this.searchScopedNode(e,n))return o;if(e.line>a.selectionRange.start.line||e.character>a.selectionRange.end.character)return a}return}}getScopeChildren(e){let t,n=[],o={},i="";if(e){let r=e,a=r.kind===s.SymbolKind.Function&&r.static;for(const e in r.local)o[e]=r.local[e];for(const e in r.global)o[e]=null;for(const e in r.declaration)void 0===o[e]&&(o[e]=r.declaration[e]);if(t=r.parent,t&&t.kind===s.SymbolKind.Class&&r.kind===s.SymbolKind.Function)e=t;else{for(;t&&t.children&&(t.kind===s.SymbolKind.Function||t.kind===s.SymbolKind.Method||t.kind===s.SymbolKind.Property);){if(a){let e;for(const n in t.declaration)!(e=t.declaration[n])||!e.static&&null!==e.static||o[n]&&null!==o[n].static||(o[n]=e)}else{for(const e in t.local)void 0===o[e]&&(o[e]=t.local[e]);for(const e in t.global)void 0===o[e]&&(o[e]=null);for(const e in t.declaration)void 0===o[e]&&(o[e]=t.declaration[e])}e=t,t=t.parent}void 0===o[i=e.name.toLowerCase()]&&e.kind!==s.SymbolKind.Method&&e.kind!==s.SymbolKind.Property&&(o[i]=e)}return(e.kind===s.SymbolKind.Method||e.kind===s.SymbolKind.Property&&e.children)&&(e.parent?e=e.parent:n.push(s.DocumentSymbol.create("this",d.completionitem._this(),s.SymbolKind.Variable,s.Range.create(0,0,0,0),s.Range.create(0,0,0,0)))),(null==e?void 0:e.kind)===s.SymbolKind.Class&&(n.push(s.DocumentSymbol.create("this",d.completionitem._this(),s.SymbolKind.Variable,s.Range.create(0,0,0,0),s.Range.create(0,0,0,0))),e.extends&&n.push(s.DocumentSymbol.create("super",d.completionitem._super(),s.SymbolKind.Variable,s.Range.create(0,0,0,0),s.Range.create(0,0,0,0)))),n.concat(Object.values(o).filter((e=>!!e)))}for(const e of this.children)if(e.kind!==s.SymbolKind.Event){if(e.kind===s.SymbolKind.Variable||e.kind===s.SymbolKind.Class){if(o[i=e.name.toLowerCase()])continue;o[i]=!0}n.push(e)}return n}update_relevance(){var e;let t=this.uri,{list:n,main:o}=$(t),i=(null!==(e=u.lexers[o.toLowerCase()])&&void 0!==e?e:this).scriptdir;this.relevance=n,i!==this.scriptdir&&(this.initlibdirs(i),this.parseScript());for(let e in{...this.relevance,...this.include}){let n=u.lexers[e];!n||n.relevance&&n.relevance[t]||(n.relevance=$(e).list,n.scriptdir!==i&&(n.initlibdirs(i),n.parseScript()))}}initlibdirs(e){if(u.inBrowser)return;let t;for(t of u.extsettings.WorkingDirs)if(this.uri.startsWith(t)){e=c.URI.parse(t).fsPath.replace(/\\$/,"");break}e?this.scriptdir=e:(t=(0,i.resolve)().toLowerCase())!==this.scriptpath&&t!==r.argv0.toLowerCase()&&this.scriptpath.startsWith(t)&&!/\\lib(\\.+)?$/.test(this.scriptpath)?(0,o.existsSync)(this.scriptpath+"\\lib")&&(0,o.statSync)(this.scriptpath+"\\lib").isDirectory()?this.scriptdir=this.scriptpath:this.scriptdir=t:this.scriptdir=this.scriptpath.replace(/\\lib(\\.+)?$/,""),this.libdirs=[this.scriptdir+"\\lib"];for(const e of u.libdirs)this.libdirs[0]!==e&&this.libdirs.push(e)}instrorcomm(e){var t;let n=this.document.offsetAt(e);return null===(t=this.strcommpos.find((e=>n>=e.start&&e.end>=n)))||void 0===t?void 0:t.type}colors(){let e=this.strcommpos,t=this.document,n=t.getText(),o=[];for(let i of e)if(2===i.type){let e,r=i.start,a=i.end,c=_.exec(n.substring(r,a)),l="";if(!c||!c[1]&&a-r+1!==c[2].length+2)continue;e=s.Range.create(t.positionAt(r+=c.index+(c[1]?c[1].length:0)),t.positionAt(r+c[2].length)),l=c[5]?k[c[5].toLowerCase()]:void 0===c[3]?c[2]:c[2].substring(2);let d={red:0,green:0,blue:0,alpha:1},u=["red","green","blue"];void 0!==c[4]&&u.unshift("alpha");for(const e of u)d[e]=parseInt("0x"+l.substring(0,2))/255,l=l.slice(2);o.push({range:e,color:d})}return o}addDiagnostic(e,t,n,o=s.DiagnosticSeverity.Error,i){let r=this.document.positionAt(t),a=r;void 0!==n&&(a=this.document.positionAt(t+n)),(i||this.diagnostics).push({range:s.Range.create(r,a),message:e,severity:o})}addFoldingRange(e,t,n="block"){let o=this.document.positionAt(e).line,i=this.document.positionAt(t).line-("block"===n?1:0);o<i&&this.foldingranges.push(s.FoldingRange.create(o,i,void 0,void 0,n))}addFoldingRangePos(e,t,n="block"){let o=e.line,i=t.line-("block"===n?1:0);o<i&&this.foldingranges.push(s.FoldingRange.create(o,i,void 0,void 0,n))}addSymbolFolding(e,t){let n=u.extsettings.SymbolFoldingFromOpenBrace?this.document.positionAt(t).line:e.range.start.line,o=e.range.end.line-1;n<o&&this.foldingranges.push(s.FoldingRange.create(n,o,void 0,void 0,"block"))}update(){var e;let t=this.uri,n=this.include,o=Object.keys(n).length;if(this.isparsed=!1,this.parseScript(),u.libfuncs[t]&&(u.libfuncs[t].length=0,u.libfuncs[t].push(...Object.values(this.declaration).filter((e=>e.kind===s.SymbolKind.Class||e.kind===s.SymbolKind.Function)))),Object.keys(this.include).length===o&&Object.keys(Object.assign(n,this.include)).length===o)return this.relevance||this.update_relevance(),void(0,u.sendDiagnostics)();A(this.include,this.scriptdir);for(const t in n)!this.include[t]&&(null===(e=u.lexers[t])||void 0===e?void 0:e.diagnostics.length)&&u.lexers[t].parseScript();!function(){for(const e in n)u.lexers[e]&&(u.lexers[e].relevance=$(e).list)}(),this.update_relevance(),(0,u.sendDiagnostics)()}close(e=!1){var t;let n=this.uri;if(this.actived=!1,!u.lexers[n])return void u.connection.sendDiagnostics({uri:this.document.uri,diagnostics:[]});let o=Object.values(u.lexers);if(!e){if(u.lexers[n].d>2&&!n.includes("?"))return;for(let e of o)if(e.actived&&(null===(t=e.relevance)||void 0===t?void 0:t[n]))return}u.connection.sendDiagnostics({uri:this.document.uri,diagnostics:[]}),delete u.lexers[n];let i=[];o.map((e=>{var t;if(!e.actived&&(!(e.d>2)||e.uri.includes("?"))){let n=!0;for(let o in e.relevance)if(null===(t=u.lexers[o])||void 0===t?void 0:t.actived){n=!1;break}n&&i.push(e.uri)}})),i.map((t=>{var n;return null===(n=u.lexers[t])||void 0===n?void 0:n.close(e)}))}}function M(e,t,n=""){let r,s="";if(!e.startsWith("<")||!e.endsWith(">")){for(;r=e.match(/%a_(\w+)%/i);){let t=r[1];if(!u.pathenv[t])return;e=e.replace(r[0],u.pathenv[t])}return e.indexOf(":")<0?e=(0,i.resolve)(n,e):e.includes("..")&&(e=(0,i.resolve)(e)),s=c.URI.file(e).toString().toLowerCase(),{uri:s,path:e}}{if(!(e=e.slice(1,-1)))return;let n=[e+".ahk"];(r=e.match(/^((\w|[^\x00-\x7f])+)_.*/))&&n.push(r[1]+".ahk");for(const i of t)for(const t of n)if((0,o.existsSync)(e=i+"\\"+t))return s=c.URI.file(e).toString().toLowerCase(),{uri:s,path:e}}}function A(e,t){for(const n in e){let i=e[n];if(!u.lexers[n]&&(0,o.existsSync)(i)){let e=(0,u.openFile)(i);if(!e)continue;let o=new E(e,t);u.lexers[n]=o,o.parseScript(),A(o.include,t),o.relevance=$(n).list}}}function N(e,t,n=!0){if(t.kind!==s.SymbolKind.Class)return{};let o,i,r={},a=t.name.toLowerCase(),c=t,l={},d="object"===a||"comobjarray"===a||!t.extends&&"any"!==a;if(function e(t,n,o){var i,f,p,h;let m,g=n.uri;if(!l[m=`${g},${n.full}`.toLowerCase()]){if(l[m]=!0,o){if(!r.__new){let e=n.declaration.__new;e&&(r.__new=e,e.uri=g)}for(let e of Object.values(n.staticdeclaration))r[a=e.name.toLowerCase()]&&(e.kind!==s.SymbolKind.Class&&e.kind!==s.SymbolKind.Method||r[a].kind!==s.SymbolKind.Property)?"call"===a&&!1===r.call.def&&(r[a]=e,e.uri=g):(r[a]=e,e.uri=g);(null===(i=r.__new)||void 0===i?void 0:i.static)&&delete r.__new}else for(let e of Object.values(n.declaration))(!r[a=e.name.toLowerCase()]||!1===r[a].def&&!1!==e.def)&&(r[a]=e,e.uri=g);if((a=null===(f=n.extends)||void 0===f?void 0:f.toLowerCase())&&a!==(m=n.full.toLowerCase())){let n,i,f,g=a.split("."),y=m.split("."),v=-1;for(d||"object"!==a&&"comobjarray"!==a||(d=!0);g[v+1]===y[v+1];)v++;if(g.length>y.length&&v===y.length-1?v+1<g.length&&r[g[++v]]&&(n=[{node:r[g[v]],uri:r[g[v]].uri}],g.splice(0,v)):n=I(t,g[0],s.Position.create(0,0),s.SymbolKind.Class),n&&n.length&&(i=n[0].node).kind===s.SymbolKind.Class)for(null!==(p=c.checkmember)&&void 0!==p||(c.checkmember=i.checkmember),f=null!==(h=u.lexers[n[0].uri])&&void 0!==h?h:t,n[0].uri&&void 0===i.uri&&(i.uri=n[0].uri);i;){if(1===g.length){e(f,i,o);break}{let t=r,n=Object.assign({},l);r={},e(f,i,!0),g.splice(0,1),(i=r[g[0]])&&i.kind!==s.SymbolKind.Class&&(i=void 0),r=t,l=n}}}else a||d||"any"===n.name.toLowerCase()||(d=!0)}}(e,t,n),n&&(d&&!r.call&&r.__new&&(i=Object.assign({},r.__new),i.name="Call",i.def=!1,r.call=i),(o=u.ahkvars.class)&&o!==t))for(a in o.staticdeclaration)r[a]||(r[a]=o.staticdeclaration[a],r[a].uri=o.uri);let f=["object","any"];d||n||(f.splice(0,1),t===u.ahkvars.comobject&&(f=[]));for(let e of f)if(o=u.ahkvars[e])for(a in o.declaration)r[a]&&!1!==r[a].def||(r[a]=o.declaration[a],r[a].uri=o.uri);return r}function q(e,t,n,o){let i=new E(a.TextDocument.create("","ahk2",-10,"_:="+t));K={},i.parseScript();let r=i.children.shift(),c=Object.keys((null==r?void 0:r.returntypes)||{}).pop();c&&F(e,c,n,i.document.getText(s.Range.create(r.selectionRange.end,r.range.end))).map((e=>{var t;return o[e]=null!==(t=K[e])&&void 0!==t&&t}))}function L(e,t,n){var o,i,r,a,c,d,f,p,h,m;let g=t.node.name.toLowerCase(),y=[],v={};if(g.match(/^[$@#]([\w.]|[^\x00-\x7f])+$/))return[g];if(g.startsWith("a_")){if("a_args"===g)return["#array"];if(l.builtin_variable.includes(g)||u.isahk2_h&&l.builtin_variable_h.includes(g))return["#string"]}if(t.scope){let e=t.scope;if(t.node.kind===s.SymbolKind.TypeParameter){let t=e;(null===(o=e=e.parent)||void 0===o?void 0:o.kind)===s.SymbolKind.Property&&(null===(i=e.parent)||void 0===i?void 0:i.kind)===s.SymbolKind.Class&&(t=e);let n=z(null!==(c=null===(a=null===(r=t.detail)||void 0===r?void 0:r.match(new RegExp(`^@(param|arg)\\s+{(.*?)}\\s+${g}\\b`,"mi")))||void 0===a?void 0:a[2])&&void 0!==c?c:"");if(n&&(n.map((e=>v[e]=!0)),!v["@object"]))return n}else y.push(t.node)}else{y.push(t.node);for(const t in e.relevance){let e=null===(f=null===(d=u.lexers[t])||void 0===d?void 0:d.declaration)||void 0===f?void 0:f[g];e&&y.push(e)}}for(let e of y){let t=j(e);if(t){if(t.map((e=>v[e]=!0)),v["@object"])break;return t}}let b=n?e.searchScopedNode(n):void 0,_=y[0];for(;b;)if(b.kind===s.SymbolKind.Class)b=b.parent;else{if(null===(p=b.declaration)||void 0===p?void 0:p[g])break;b=b.parent}!b&&n&&n!==t.node.selectionRange.end&&(b=e);for(const e of null!==(h=null==b?void 0:b.children)&&void 0!==h?h:[])if(g===e.name.toLowerCase()){if(e.kind!==s.SymbolKind.Variable&&e.kind!==s.SymbolKind.TypeParameter)return[g];if(n&&(e.selectionRange.end.line>n.line||e.selectionRange.end.line===n.line&&e.selectionRange.start.character>n.character))break;(e.ref||e.returntypes)&&(_=e)}if(_){if(_.ref){let t=W(e,_.selectionRange.start);if(t){let n=I(e,t.name,_.selectionRange.end,s.SymbolKind.Variable);if(n){let e=n[0].node;if(e===u.ahkvars.regexmatch){if(t.index=2)return["#regexmatchinfo"]}else if(u.ahkvars[t.name]===e)return["#number"]}}return[]}{let t=e.document.getText(s.Range.create(_.selectionRange.end,_.range.end));for(let n in _.returntypes)F(e,n.toLowerCase(),_.range.end,t).map((e=>v[e]=!0));if(!0===v["#object"]){let e=_.property;(null==e?void 0:e.length)&&(null!==(m=O["##object"])&&void 0!==m?m:O["##object"]=[]).push(...e)}}}return v["#any"]?[]:Object.keys(v)}function j(e,t=!1){var n,o,i;if(e.detail)return z(null!==(i=null===(o=null!==(n=e.detail.match(new RegExp(`^\\s*@${t?"prop(erty)?":"(var)"}\\s+{(.*?)}\\s+${e.name}\\b`,"mi")))&&void 0!==n?n:e.detail.match(/^\s*@(type)\s+{(.*?)}(?=\s|$)/im))||void 0===o?void 0:o[2])&&void 0!==i?i:"")}function F(e,t,n,o){if(t.includes("=>"))return[t.trim()];let i=`${t.trim()},${e.uri},${n.line},${n.character}`;return void 0!==O[i]?O[i]||[]:(O[i]=!1,O[i]=function e(t,n,o,i=0,a){var c,l,d;let f,p=[];for(n=n.replace(/#any(\(\)|\.(\w|[^\x00-\x7f])+)+/g,"#any").replace(/\b(true|false)\b/gi,"#number");(f=n.replace(/\(((\(\)|[^\(\)])+)\)/g,((...n)=>{let r=e(t,n[1],o,i+1);return r.length>1?`[${r.join(",")}]`:r.pop()||"#any"})))!==n;)n=f;for(;(f=n.replace(/\s(([$@#\w.]|[^\x00-\x7f]|\(\))+|\[[^\[\]]+\])\s*([+\-*/&|^]|\/\/|<<|>>|\*\*)\s*(([$@#\w.]|[^\x00-\x7f]|\(\))+|\[[^\[\]]+\])\s*/g," #number "))!==n;)n=f;for(;(f=n.replace(/\s[+-]?(([$@#\w.]|[^\x00-\x7f]|\(\))+|\[[^\[\]]+\])\s+(\.\s+)?[+-]?(([$@#\w.]|[^\x00-\x7f]|\(\))+|\[[^\[\]]+\])\s*/g," #string "))!==n;)n=f;for(;(f=n.replace(/\s(([$@#\w.]|[^\x00-\x7f]|\(\))+|\[[^\[\]]+\])\s*(~=|<|>|[<>]=|!?=?=|\b(is|in|contains)\b)\s*(([$@#\w.]|[^\x00-\x7f]|\(\))+|\[[^\[\]]+\])\s*/gi," #number "))!==n;)n=f;for(;(f=n.replace(/(not|!|~|\+|-)\s*(([$@#\w.]|[^\x00-\x7f]|\(\))+|\[[^\[\]]+\])/g," #number "))!==n;)n=f;for(;(f=n.replace(/(([$@#\w.]|[^\x00-\x7f]|\(\))+|\[[^\[\]]+\])\s*(\sand\s|\sor\s|&&|\|\||\?\?)\s*(([$@#\w.]|[^\x00-\x7f]|\(\))+|\[[^\[\]]+\])/gi,((...e)=>{let t,n={};for(let o=1;o<5;o+=3)(t=e[o].match(/^\[([^\[\]]+)\]$/))?t[1].split(",").map((e=>n[e]=!0)):n[e[o]]=!0;return n["#any"]?"#any":(n=Object.keys(n),n.length>1?`[${n.join(",")}]`:n.pop()||"#void")})))!==n;)n=f;for(;(f=n.replace(/(([$@#\w.]|[^\x00-\x7f]|\(\))+|\[[^\[\]]+\])\s*\?\s*(([$@#\w.]|[^\x00-\x7f]|\(\))+|\[[^\[\]]+\])\s*:\s*(([$@#\w.]|[^\x00-\x7f]|\(\))+|\[[^\[\]]+\])/,((...e)=>{let t,n={};for(let o=3;o<6;o+=2)(t=e[o].match(/^\[([^\[\]]+)\]$/))?t[1].split(",").map((e=>n[e]=!0)):n[e[o]]=!0;return n["#any"]?"#any":(n=Object.keys(n),n.length>1?`[${n.join(",")}]`:n.pop()||"#void")})))!==n;)n=f;if(0===i)for(;n!==(f=n.replace(/((\w|[$@#.]|[^\x00-\x7f])+)\(\)/,((...i)=>{let c,l=I(t,i[1],n.trim()===i[0]?{line:o.line,character:o.character-n.length}:o,s.SymbolKind.Variable),d="",f={};return l?(l.map((n=>{var i,l,p,h,m,g;let y=n.node,v=n.uri;e:switch(y.kind){case s.SymbolKind.Method:if(c=y.full.toLowerCase().match(/\(([^()]+)\)\s*([^()]+)/),c&&"gui"===c[1]){if("add"===c[2]){let e={dropdownlist:"ddl",tab2:"tab",tab3:"tab",picture:"pic"};(c=null==a?void 0:a.toLowerCase().match(/\.add\(\s*(('|")(\w+)\2)?/))&&(c[3]?f["gui.@"+(e[c[3]]||c[3])]=!0:f["gui.@tab"]=f["gui.@listview"]=f["gui.@treeview"]=f["gui.@statusbar"]=!0)}else for(const e in y.returntypes)f[e]=!0;break}case s.SymbolKind.Function:if(y===u.ahkvars.objbindmethod&&(c=null==a?void 0:a.toLowerCase().match(/objbindmethod\(\s*(([\w.]|[^\x00-\x7f])+)\s*,\s*('|")([^'"]+)\3\s*[,)]/)))f[c[1]+"."+c[4]]=!0;else if((v=y.uri||v)&&u.lexers[v]){let e=z(null!==(p=null===(l=null===(i=y.detail)||void 0===i?void 0:i.match(/^@returns?\s+{(.+?)}/im))||void 0===l?void 0:l[1])&&void 0!==p?p:""),t={};e&&(e.map((e=>t[e]=!0)),y.returntypes=t);for(const e in y.returntypes)F(u.lexers[v],e.toLowerCase(),s.Position.is(y.returntypes[e])?y.returntypes[e]:o).map((e=>{f[e]=!0}))}break;case s.SymbolKind.Variable:u.lexers[v]&&L(u.lexers[v],n,v===t.uri?o:n.node.selectionRange.end).map((t=>{var i,a;if(t.includes("=>")&&(null!==(i=K[t])&&void 0!==i||(K[t]=r(t,v,n.node,n.scope))),(y=null===(a=K[t])||void 0===a?void 0:a.node)&&(y.kind===s.SymbolKind.Class||y.kind===s.SymbolKind.Function||y.kind===s.SymbolKind.Method))for(const t in y.returntypes)e(u.lexers[v],t.toLowerCase(),s.Position.is(y.returntypes[t])?y.returntypes[t]:o).map((e=>{f[e]=!0}))}));break;case s.SymbolKind.Property:{let t={};if(null===(h=j(y,!0))||void 0===h?void 0:h.map((e=>t[e]=!0)));else if(u.lexers[v])for(d in y.returntypes)q(u.lexers[v],d,y.range.end,t);if(t["#any"])return"#any";for(const i in t)if(i.includes("=>")&&(null!==(m=K[i])&&void 0!==m||(K[i]=r(i,v,y,n.scope))),(y=null===(g=K[i])||void 0===g?void 0:g.node)&&(y.kind===s.SymbolKind.Class||y.kind===s.SymbolKind.Function||y.kind===s.SymbolKind.Method))for(const t in y.returntypes)e(u.lexers[v],t.toLowerCase(),s.Position.is(y.returntypes[t])?y.returntypes[t]:o).map((e=>f[e]=!0));break}case s.SymbolKind.Class:if((v=y.uri||v)&&u.lexers[v])for(const t of Object.values(N(u.lexers[v],y,!0)))if(!1!==t.def&&"call"===t.name.toLowerCase()){let n=t;for(const t in n.returntypes)e(u.lexers[v],t.toLowerCase(),s.Position.is(n.returntypes[t])?n.returntypes[t]:o).map((e=>{f[e]=!0}));if(n.returntypes)break e;break}(d=Object.keys(y.returntypes||{}).pop()||"")&&(f[d]=!0)}})),f["gui.@control"]?"[gui.@tab,gui.@listview,gui.@treeview,gui.@statusbar]":(f=Object.keys(f),f.length>1?`[${f.join(",")}]`:f.pop()||"#void")):"#void"})));)n=f;let h=n.trim(),m=[],g={};if(f=h.match(/^\[([^\[\]]+)\]$/)){let e={};f[1].split(",").map((t=>e[t]=!0)),p.map((t=>e[t]=!0)),m=Object.keys(e)}else m=[h];if(i)return m;n=n.trim();for(let i of m)if(f=i.match(/^([@#]?)(\$|\w|[^\x00-\x7f])+(\.[@#]?(\$|\w|[^\x00-\x7f])+)*$/)){let a,p="";if(f[1]&&!f[3]||K[i])g[i]=!0;else for(const f of I(t,i,i===n?{line:o.line,character:o.character-i.length}:o,s.SymbolKind.Variable)||[])switch(f.node.kind){case s.SymbolKind.TypeParameter:case s.SymbolKind.Variable:L(u.lexers[f.uri],f,f.uri===t.uri?o:f.node.selectionRange.end).map((e=>{var t;return e.includes("=>")&&(null!==(t=K[e])&&void 0!==t||(K[e]=r(e,f.uri,f.node,f.scope))),g[e]=!0}));break;case s.SymbolKind.Property:if(a=j(f.node,!0))a.map((e=>{var t;return e.includes("=>")&&(null!==(t=K[e])&&void 0!==t||(K[e]=r(e,f.uri,f.node,f.scope))),g[e]=!0}));else if(f.node.returntypes)for(let n in f.node.returntypes)if(" #object"===n){g["#object"]=!0;let e=f.node.property;(null==e?void 0:e.length)&&(null!==(c=O["##object"])&&void 0!==c?c:O["##object"]=[]).push(...e)}else n&&e(null!==(l=u.lexers[f.uri])&&void 0!==l?l:t,n,f.node.range.end).map((e=>{var t;return e.includes("=>")&&(null!==(t=K[e])&&void 0!==t||(K[e]=r(e,f.uri,f.node,f.scope))),g[e]=!0}));else if(f.node.children)for(const n of f.node.children){let i=n.returntypes;if("get"===n.name.toLowerCase()&&n.kind===s.SymbolKind.Function){for(const n in i)e(null!==(d=u.lexers[f.uri])&&void 0!==d?d:t,n.toLowerCase(),s.Position.is(i[n])?i[n]:o).map((e=>{var t;return e.includes("=>")&&(null!==(t=K[e])&&void 0!==t||(K[e]=r(e,f.uri,f.node,f.scope))),g[e]=!0}));break}}break;case s.SymbolKind.Object:i.endsWith(".prototype")?g["@"+i.slice(0,-10)]=!0:(g["#object"]=!0,K[i]=f);break;case s.SymbolKind.Function:g[p=i.startsWith("$")?i:f.node.name.toLowerCase()]=!0,K[p]=f;break;case s.SymbolKind.Method:a=f.node.full.match(/^\(([^()]+)\)/),p=((a?a[1]+".":"")+f.node.name).toLowerCase(),g[p]=!0,K[p]=f;break;case s.SymbolKind.Class:g[i=(f.ref?"@":"")+i]=!0,K[i]=f}}return g=Object.keys(g),g.length?g:["#any"]}(e,t,n,0,o));function r(e,t,n,o){var i,r,c;e.startsWith("((")&&(e=e.slice(1,-1));let l=e.match(/^\(([^)]*)\)=>(.*)$/);if(l){let e=new E(a.TextDocument.create("","ahk2",0,`${n.name}(${l[1]})=>${l[2].includes("=>")?"void":l[2]}`),void 0,-1);e.parseScript();let d=e.declaration[n.name.toLowerCase()];if((null==d?void 0:d.kind)===s.SymbolKind.Function){if(l[2].includes("=>")&&(d.returntypes={[l[2]]:!0}),n.kind===s.SymbolKind.TypeParameter&&o){let e=o.parent;(null===(i=null==e?void 0:e.parent)||void 0===i?void 0:i.kind)===s.SymbolKind.Property&&(null===(r=e.parent.parent)||void 0===r?void 0:r.kind)===s.SymbolKind.Class&&(o=e.parent),V(o)}else V(n);let e=null===(c=n.detail)||void 0===c?void 0:c.split("\n___\n").pop();return e&&(d.detail=e.trim()),{node:d,uri:t}}}}}function I(e,t,n,i,r=!0){var a,l,d,f,p,h,m;let y,v,b,_=e.uri;if(i===s.SymbolKind.Method||i===s.SymbolKind.Property||t.includes(".")){let o=t.split("."),c=I(e,o[0],n,s.SymbolKind.Class),h=0,m=0;if(!c||o.length<2)return;let{node:v,uri:k}=c[0];if(_=k||_,c[0].ref&&o[0].match(/^[^@#]/)&&(o[0]="@"+o[0]),v.kind===s.SymbolKind.Variable){let r=L(u.lexers[_],c[0],e.uri===k?n:v.selectionRange.end),s=[];for(const e of r)null===(a=I(u.lexers[_],t.replace(new RegExp("^"+o[0]),e),e.match(/^[@#]/)?void 0:n,i))||void 0===a||a.map((e=>{s.map((e=>e.node)).includes(e.node)||s.push(e)}));return s.length?s:void 0}if(m=o.length-1){let t,n;for(;h<m;){if(y=void 0,h++,v.kind===s.SymbolKind.Function||v.kind===s.SymbolKind.Method){if(n=v,h<=o.length&&"call"===o[h]){(y=null===(l=u.ahkvars.func)||void 0===l?void 0:l.declaration.call)||((y=Object.assign({},v)).kind=s.SymbolKind.Method);continue}u.ahkvars.func&&(v=u.ahkvars.func,o[h-1]="@"+o[h-1].replace(/^[@#]/,""))}else if(v.kind===s.SymbolKind.Property||v.kind===s.SymbolKind.Variable){if((null==t?void 0:t.kind)===s.SymbolKind.Class&&"(Class) static Prototype"===v.full)o[h-1]="@prototype",v=t;else if(b=v.returntypes){let e={},t=Object.keys(b).pop(),n=[];if(t){q(u.lexers[v.uri||_],t,s.Position.is(b[t])?b[t]:v.selectionRange.end,e);let r=o.slice(h).join(".");for(const t in e)null===(d=I(u.lexers[_],t+"."+r,void 0,i))||void 0===d||d.map((e=>{n.map((e=>e.node)).includes(e.node)||n.push(e)}));return n.length?n:void 0}}}else t&&v.kind===s.SymbolKind.Object&&v.static&&"prototype"===v.name.toLowerCase()&&(o[h-1]="@prototype",v=t);if(v.kind===s.SymbolKind.Class){t=v,k&&!v.uri&&(v.uri=k);let a,c=r&&h>0&&!o[h-1].match(/^[@#]/),l=o[h].replace(/[@#]/,""),d=N(e,v,c);if(h===m?((a=d[l])&&(y=a,_=a.uri||"","prototype"===l&&(y=Object.assign({},a),y.kind=s.SymbolKind.Object)),y||"clone"===l||(i!==s.SymbolKind.Property&&(a=d.__call)||i===s.SymbolKind.Property&&(a=null!==(f=d.__get)&&void 0!==f?f:d.__set))&&(y=a,_=a.uri||"")):(a=d[l])&&(y=a,_=a.uri||""),"clone"===l){let e=null===(p=y)||void 0===p?void 0:p.full.toLowerCase().match(/^\(([^()]+)\)\s+/),t=v.full.toLowerCase();if(!e||e[1]!==t&&u.ahkvars[e[1]]){let e=s.Range.create(0,0,0,0);_="",y=g.create("Clone",s.SymbolKind.Method,e,e,[],[],!0),y.returntypes={[c?t:t.replace(/([^.]+)$/,"@$1")]:!0}}}else if(y&&"bind"===l&&n&&y.full.match(/\(func\)\s+bind\(/i)){let e=Object.assign({},y),t=n.full.match(/^\s*\(([^()]+)\)/);e.returntypes={[((t?t[1]+".":"")+n.name).toLowerCase()]:!0},y=e}n=void 0}if(!y)break;v=y}}return y?[{node:y,uri:_}]:void 0}if(!(v=e.searchNode(t=t.replace(/^@/,""),n,i))){if(null===v)return;if(!1===v)return null;v=k(null!==(h=e.relevance)&&void 0!==h?h:{},t)}if(v){if(v.node.kind===s.SymbolKind.Variable&&v.node===e.declaration[t]){let n=k(null!==(m=e.relevance)&&void 0!==m?m:{},t);n&&(n.node.kind!==s.SymbolKind.Variable||n.node.def)&&(v=n)}if(v.fn_is_static){let n=v.node,o=v.uri;for(const i in e.relevance)if(b=u.lexers[i].declaration[t]){if(b.kind!==s.SymbolKind.Variable)return[{node:b,uri:i}];n.def||(n=b,o=i)}v.node=n,v.uri=o}}return i===s.SymbolKind.Field||v&&(v.node.kind!==s.SymbolKind.Variable||v.node.def)||!(b=u.ahkvars[t.replace(/^[@#]/,"")])?v?[v]:void 0:[{uri:b.uri,node:b}];function k(e,t){let n;for(const r in e){let e=u.lexers[r];if(!e){let t=c.URI.parse(r).fsPath;if(!(0,o.existsSync)(t))continue;{let n=(0,u.openFile)(t);if(!n)continue;e=u.lexers[r]=new E(n),e.parseScript()}}let a=e.searchNode(t,void 0,i);if(a){if(a.node.kind!==s.SymbolKind.Variable)return a;n&&!a.node.def||(n=a)}}return n}}function W(e,t){var n,o;let i,r,a,c=e.document.offsetAt(t),l={start:0,end:0},d={line:0,character:0},u=e.searchScopedNode(t),f="",p="",h="",m=-1,g=0,y=c,v=0;if(u){for(;u&&!u.funccall;)u=u.parent;r=null!==(o=null===(n=u)||void 0===n?void 0:n.funccall)&&void 0!==o?o:e.funccall}else r=e.funccall;for(const n of r){const o=e.document.offsetAt(n.range.start),r=e.document.offsetAt(n.range.end);if(o+n.name.length<c){if(c>r){if(n.range.end.line!==t.line||e.document.getText({start:n.range.end,end:t}).trim())continue}else if(c===r&&")"===e.document.getText(s.Range.create({line:t.line,character:t.character-1},t)))continue;(!i||l.start<=o&&r<=l.end)&&(i=n,l={start:o,end:r},d=n.range.start)}}if(i&&i.paraminfo){if(m=c>l.start+i.name.length?0:-1,-1!==m)for(let e of i.paraminfo.comma){if(!(c>e))break;++m}return{name:i.name.toLowerCase(),pos:d,index:m,full:f}}if(!i||-1!==e.document.getText(i.range).indexOf(")(")){let n=e.document.getText(s.Range.create(t.line,0,t.line+1,0));for(;a=n.match(/('|").*?(?<!`)\1/);)n=n.replace(a[0],"".repeat(a[0].length));let o=n.match(/^(.*\(\s*(([\w.]|[^\x00-\x7f])+)\s*\))\((.*)\)/);if(o&&(c=t.character-o[1].length)>0){let e=0,i=0,r=0,s=0;e:for(const t of o[4].split(""))switch(s++,t){case"(":e++;break;case")":if(--e<0)break e;break;case"[":i++;break;case"]":i--;break;case"{":r++;break;case"}":r--}0===i&&0===r&&e<=0&&t.character<o[1].length+s+(0===e?2:1)&&(d.line=t.line,d.character=n.indexOf(o[2]),p=o[2]+"("+o[4].substring(0,s)+(0===e?")":""),h=f=o[2].toLowerCase(),g=p.length-h.length,c+=h.length,h=h.split(".").pop()||"",h===f&&(f=""))}}if(h);else{if(!i)return;p=e.document.getText(i.range),h=i.name.toLowerCase(),f="",c=y-l.start,m=-1,g=l.end-l.start-h.length,v=e.document.offsetAt(i.range.start)}for(;-1!==(a=p.search(/['"]/));){let t;if(!(t=e.tokens[v+a])||"TK_STRING"!==t.type)break;p=p.substring(0,a)+"_".repeat(t.length)+p.substring(a+t.length)}for(const e of[["\\{","\\}"],["\\[","\\]"],["\\(","\\)"]]){const t=new RegExp(e[0]+"[^"+e[0]+"]*?"+e[1]);for(;(a=t.exec(p))&&!(a[0].length>=g);)p=p.replace(a[0],"_".repeat(a[0].length))}c>h.length&&(m+=1);for(let e=h.length+1;e<c;e++)if(","===p.charAt(e))m++;else if(")"===p.charAt(e)&&e>=p.length-1){m=-1;break}return{name:h,pos:d,index:m,full:f}}function $(e){var t,n,o;let i,r={},s=0,a=!1,l={list:r,count:s,main:""};for(const t in u.lexers)r={},s=0,a=t===e,d(u.lexers[t].include,t),a&&s>l.count&&(l={list:r,count:s,main:t});return l.count&&(delete l.list[e],l.main&&l.main!==e&&(null!==(t=(n=l.list)[o=l.main])&&void 0!==t||(n[o]=c.URI.parse(l.main).fsPath))),l;function d(t,n){for(const o in t)e===o&&(a=!0,r[n]||(r[n]=c.URI.parse(n).fsPath,s++)),!r[o]&&(i=u.lexers[o])&&(r[o]=t[o],s++,n!==o&&d(i.include,o))}}function V(e,t,n){var o,i,r;let s,a,c={},l=[],d="",u=e.detail,f=null!=n?n:[],p=0;return u?(u.split(/\r?\n/).map((n=>{if(n.startsWith("@"))if(d="",p&&(2===p&&l.push("```"),p=0),s=n.match(/^@(\S+)(.*)$/))switch(s[1].toLowerCase()){case"param":case"arg":s[2].replace(/^\s*({(.*?)}\s+)?(\[.*?\]|\S+)(.*)$/,((...e)=>{var n,o;let i=e[4].replace(/^\s*[-—]\s*|\s*$/g,"");return e[3].startsWith("[")&&(e[3]=e[3].substring(1).replace(/\W.*$/,"")),a=`\`${e[3]}\`${e[2]?`: *${e[2]}*`:""}`+(i?" — "+i:""),null!=t||l.push(`\n*@param* ${a}`),(null!==(n=c[o=d=e[3].toLowerCase()])&&void 0!==n?n:c[o]=[]).push(a),c[d].types=e[2],""}));break;case"overload":f.push("_"+s[2].trim());break;case"example":if(a=s[2].replace(/\s*<caption>(.*?)<\/caption>\s*/,((...e)=>(l.push("\n*@example* "+e[1]),""))),p=1,a===s[2]&&(a=s[2].replace(/\s*<caption>(.*)/,((...e)=>(l.push("\n*@example* "+e[1]),""))),a!==s[2]))break;l.push("```ahk2"+(a?"\n"+a:"")),p=2;break;case"var":case"prop":case"property":a=s[2].replace(/^\s*({(.*?)}\s+)?(\S+)(\s*[-—])?\s*/,((...e)=>e[2]?`\`${e[3]}\`: *${e[2]}* — `:e[3]+" — ")).replace(/\s*—\s*$/,""),l.push(`\n*@${s[1].toLowerCase()}* ${a}`);break;case"return":case"returns":s[2].replace(/^\s*{(.+?)}/,((...t)=>{let n={},o=z(t[1]);return o&&(o.map((e=>n[e]=!0)),e.returntypes=n),""}));default:a=s[2].replace(/^\s*({(.*?)}(?=\s|$))?(\s*[-—])?\s*/,"*$2* — ").replace(/\*\*(?= — )|\s*—\s*$/g,""),l.push(`\n*@${s[1].toLowerCase()}* ${a}`)}else l.push(n);else d?(c[d].push(n),null!=t||l.push(n)):1===p&&(a=n.indexOf("</caption>"))>-1?(l.push(n.substring(0,a),"```ahk2"+((a=n.substring(a+10).trimLeft())?"\n"+a:"")),p=2):l.push(n)})),2===p&&l.push("```"),null===(o=e.params)||void 0===o||o.map((e=>{var t;let n=c[e.name.toLowerCase()];if(n){n.length&&(n[0]="*@param* "+n[0],e.detail=n.join("\n").replace(/ — ?/,"\n___\n").replace(/(?<!\\)\\@/g,"\n@"));let o={},i=z(null!==(t=n.types)&&void 0!==t?t:"");i&&(e.returntypes=o,i.map((e=>o[e]=!0)))}})),void 0!==t?(a=null!==(r=null===(i=c[t.toLowerCase()])||void 0===i?void 0:i.join("\n"))&&void 0!==r?r:"",u=a+"\n\n"+l.join("\n")):u=!n&&f.length?"*@overload*\n```ahk2\n"+f.map((t=>t.replace(/^_[^\W]*/,e.name))).join("\n")+"\n```\n"+(l.length?"___\n"+l.join("\n"):""):l.join("\n"),u):""}function U(e,t){if(e.kind===t.kind)return e.kind===s.SymbolKind.Class?d.diagnostic.conflictserr("class","Class",e.name):e.kind===s.SymbolKind.Function?d.diagnostic.conflictserr("function","Func",e.name):d.diagnostic.dupdeclaration();switch(t.kind){case s.SymbolKind.Variable:return d.diagnostic.assignerr(e.kind===s.SymbolKind.Function?"Func":"Class",e.name);case s.SymbolKind.Function:return e.kind===s.SymbolKind.Variable?d.diagnostic.assignerr("Func",e.name):d.diagnostic.conflictserr("function","Class",e.name);case s.SymbolKind.Class:return e.kind===s.SymbolKind.Function?d.diagnostic.conflictserr("class","Func",e.name):e.kind===s.SymbolKind.Property||e.kind===s.SymbolKind.Method?d.diagnostic.dupdeclaration():d.diagnostic.assignerr("Class",e.name);case s.SymbolKind.Property:case s.SymbolKind.Method:return d.diagnostic.dupdeclaration()}return""}function H(e,t,n){let o="";for(const i of t)if(i.name)switch(i.kind){case s.SymbolKind.Class:case s.SymbolKind.Function:case s.SymbolKind.Variable:if(e[o=i.name.toLowerCase()])if(e[o].infunc){if(i.kind===s.SymbolKind.Variable){if(i.def&&e[o].kind!==s.SymbolKind.Variable){n.push({message:d.diagnostic.assignerr(e[o].kind===s.SymbolKind.Function?"Func":"Class",i.name),range:i.selectionRange,severity:s.DiagnosticSeverity.Error});continue}}else if(e[o].def)n.push({message:d.diagnostic.assignerr(i.kind===s.SymbolKind.Function?"Func":"Class",i.name),range:e[o].selectionRange,severity:s.DiagnosticSeverity.Error});else if(e[o].kind===s.SymbolKind.Function){n.push({message:U(e[o],i),range:i.selectionRange,severity:s.DiagnosticSeverity.Error});continue}e[o]=i}else i.kind===s.SymbolKind.Variable?e[o].kind===s.SymbolKind.Variable?i.def&&!e[o].def&&(e[o]=i):i.def&&(delete i.def,n.push({message:U(e[o],i),range:i.selectionRange,severity:s.DiagnosticSeverity.Error})):e[o].kind===s.SymbolKind.Variable?(e[o].def&&(delete e[o].def,n.push({message:U(i,e[o]),range:e[o].selectionRange,severity:s.DiagnosticSeverity.Error})),e[o]=i):!1!==e[o].def?n.push({message:U(e[o],i),range:i.selectionRange,severity:s.DiagnosticSeverity.Error}):!1!==i.def&&(e[o]=i);else e[o]=i}}function B(e,t,n){switch(e.type){case"":case"TK_COMMA":case"TK_EQUALS":case"TK_START_EXPR":return!0;case"TK_OPERATOR":if(e.ignore)return!1;if(!e.content.match(/^(%|\+\+|--)$/))return!0;default:switch(t.type){case"TK_DOT":case"TK_COMMA":case"TK_EQUALS":return!0;case"TK_OPERATOR":return!(t.content.match(/^(!|~|not|%|\+\+|--)$/i)||n&&t.content.match(/^\w/)&&n.kind===s.SymbolKind.Class);case"TK_STRING":if(t.ignore)return!0;default:return!1}}}function z(e){if(e=e.replace(/\s/g,"")){let t,n={};for(;(t=e.replace(/\(([^)]*)\)(?!\s*=>)/g,"$1"))!==e;)e=t;e.toLowerCase().split(/(?<!=>\s*[^)]*)\|/).map((e=>n["void"===e?"#void":e.includes("=>")?e:e.replace(/(?<=(^|\.))([^.$@#]+)$/,"@$2").replace("$","")]=!0)),delete n[""];let o=Object.keys(n);if(o.length)return o}}t.Lexer=E,t.pathanalyze=M,t.parseinclude=A,t.getClassMembers=N,t.cleardetectcache=function(){O={}},t.getcacheproperty=function(){var e;return null!==(e=O["##object"])&&void 0!==e?e:[]},t.detectExpType=q,t.detectVariableType=L,t.detectExp=F,t.searchNode=I,t.getFuncCallInfo=W,t.getincludetable=$,t.formatMarkdowndetail=V,t.samenameerr=U,t.checksamenameerr=H,t.is_line_continue=B,t.update_commentTags=function(e){let t=b;try{b=new RegExp(e,"i")}catch(e){throw b=t,e}}},6487:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.codeActionProvider=void 0;const o=n(7147),i=n(2374),r=n(7994),s=n(3939);t.codeActionProvider=async function(e){var t,n;let a,c=e.textDocument.uri,l=s.lexers[c.toLowerCase()],d=l.diagnostics,u=new RegExp("^"+r.diagnostic.filenotexist().replace("{0}","(.+?)\\*(\\.\\w+)")),f="",p=new RegExp(r.diagnostic.didyoumean("(:=)").replace("?","\\?").toLowerCase()+"$|^"+r.diagnostic.deprecated("([^'\"]+)","([^'\"]+)")),h=[],m={};for(const e of d)if(a=p.exec(e.message))(null!==(t=m[n=a[3]?a[3]+" "+(f=a[2]):"= "+(f=":=")])&&void 0!==t?t:m[n]=[]).push({range:e.range,newText:f});else if(a=u.exec(e.message)){f=l.document.getText(e.range);let t=(0,s.restorePath)(a[1]),n=new RegExp(a[2]+"$","i"),d=[],u=Object.assign({},e.range);u.start=Object.assign({},u.start),u.start.character=0;for(const e of(0,o.readdirSync)(t))try{n.test(e)&&d.push(`#Include '${t}${e}'`)}catch{}let p={range:u,newText:d.join("\n")},m={title:r.codeaction.include(t+"*"+a[2]),kind:i.CodeActionKind.QuickFix};m.edit={changes:{[c]:[p]}},h.push(m)}for(let[e,t]of Object.entries(m))h.push({title:e.replace(/(\S+) (\S+)/,"Replace '$1' with '$2'"),edit:{changes:{[c]:t}},kind:i.CodeActionKind.QuickFix});return h.length?h:void 0}},4104:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.colorProvider=t.colorPresentation=void 0;const o=n(3939);t.colorPresentation=async function(e){let t,n="RGB: ",i={range:e.range,newText:""},r=e.color,s=o.lexers[e.textDocument.uri.toLowerCase()].document.getText(e.range),a="";for(const e of[r.alpha,r.red,r.green,r.blue])a+=("00"+Math.round(255*e).toString(16)).slice(-2);return(t=s.match(/^(0x)?([\da-f]{6}([\da-f]{2})?)/i))?i.newText=(t[1]||"")+a.slice(-t[2].length):i.newText=a.substring(2),n+=i.newText,[{label:n,textEdit:i}]},t.colorProvider=async function(e){return o.lexers[e.textDocument.uri.toLowerCase()].colors()}},6129:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateAuthor=t.generateComment=t.fixinclude=t.setTextDocumentLanguage=t.insertSnippet=t.executeCommands=void 0;const o=n(1017),i=n(2374),r=n(6169),s=n(3939);function a(e){var t;return!!(null===(t=s.extsettings.commands)||void 0===t?void 0:t.includes(e))||(s.connection.console.warn(`Command '${e}' is not implemented!`),!1)}async function c(e){if(a("ahk2.executeCommands"))return s.connection.sendRequest("ahk2.executeCommands",e)}function l(e,t){a("ahk2.insertSnippet")&&s.connection.sendRequest("ahk2.insertSnippet",[e,t])}t.executeCommands=c,t.insertSnippet=l,t.setTextDocumentLanguage=function(e,t){var n;if(null===(n=s.extsettings.commands)||void 0===n?void 0:n.includes("ahk2.setTextDocumentLanguage"))return s.connection.sendRequest("ahk2.setTextDocumentLanguage",[e,t])},t.fixinclude=async function(e,t){if(!a("ahk2.getActiveTextEditorUriAndPosition"))return;let n=s.lexers[t],r="",d=-1,u="";for(const t of n.libdirs.slice(1))if(e.startsWith(t+"\\")){r=".ahk"===(0,o.extname)(e)?`#Include <${(0,o.relative)(t,(0,s.restorePath)(e)).slice(0,-4)}>`:s.pathenv.mydocuments&&e.startsWith(s.pathenv.mydocuments+"\\autohotkey\\lib")?`#Include '%A_MyDocuments%\\AutoHotkey\\Lib\\${(0,o.basename)((0,s.restorePath)(e))}'`:`#Include '${(0,s.restorePath)(e)}'`;for(const e of n.includedir)d=e[0]+1}if(""===r){for(const t of n.includedir)e.startsWith(t[1]+"\\")?t[1].length>u.length&&(d=t[0]+1,u=t[1]):!u&&e.startsWith((0,o.resolve)(t[1],"..")+"\\")&&(d=t[0]+1,u=t[1]);u=u||n.scriptpath,r=u.charAt(0)!==e.charAt(0)?`#Include '${(0,s.restorePath)(e)}'`:`#Include '${(0,o.relative)(u,(0,s.restorePath)(e))}'`}if(-1===d)d=n.document.lineCount,r="\n\n"+r;else{let e=n.document.getText({start:{line:d-1,character:0},end:{line:d,character:0}}).match(/^\s+/);r=(e?e[0]:"")+r,d<n.document.lineCount&&(r+="\n")}let{position:f}=await s.connection.sendRequest("ahk2.getActiveTextEditorUriAndPosition"),p=n.document.getText(i.Range.create(f.line,f.character-1,f.line,f.character));f.line<d&&(r="\n"+r),await s.connection.workspace.applyEdit({changes:{[n.document.uri]:[i.TextEdit.insert({line:d,character:0},r)]}}),"("===p?c([{command:"editor.action.triggerParameterHints"}]):(d<=f.line&&f.line++,l("$0",i.Range.create(f,f)),"."===p&&c([{command:"editor.action.triggerSuggest"}]))},t.generateComment=async function(e){var t;if(!a("ahk2.getActiveTextEditorUriAndPosition"))return;0===e.length&&await c([{command:"undo",wait:!0},{command:"undo",wait:!0}]);let{uri:n,position:o}=await s.connection.sendRequest("ahk2.getActiveTextEditorUriAndPosition"),d=s.lexers[n=n.toLowerCase()],u=d.searchScopedNode(o),f=(null==u?void 0:u.children)||d.children;for(const e of f)if((e.kind===i.SymbolKind.Function||e.kind===i.SymbolKind.Method)&&e.selectionRange.start.line===o.line&&e.selectionRange.start.character<=o.character&&o.character<=e.selectionRange.end.character){u=e;break}if(u&&(u.kind===i.SymbolKind.Function||u.kind===i.SymbolKind.Method)){let e,n=u.range.start.line;if(e=d.document.getText({start:{line:n,character:0},end:{line:n+1,character:0}}).match(/^(\s*)((static|macro)\s*)?\S+\(/i)){let s,a,c,f=u,h=["/**"],m=0,g=e[1].length,y=null===(t=u.detail)||void 0===t?void 0:t.split("\n"),v={},b=[],_=[];if(y){let e=!1,t={line:-1,character:0},o={line:-1,character:0};for(let i=n-1;i>=0;i--){let n=d.document.getText({start:{line:i,character:0},end:{line:i+1,character:0}});if(e){if(c=n.match(/^\s*\/\*/)){t.line=i,t.character=c[0].length-2;break}}else{if(c=n.match(/^\s*;/)){t.line=o.line=i,t.character=c[0].length-1,o.character=n.length;break}if(!(c=n.match(/\*\/((\s+.*)?)$/)))break;o.line=i,o.character=n.length-c[1].length,e=!0}}o.line>=t.line&&t.line>-1&&(s={start:t,end:o}),y.map((e=>{(c=e.match(/^@(param|arg)\s+(({.+?}\s)?\s*(\S+).*)$/i))?a=v[c[4].toLowerCase()]=[c[2].trim()]:(c=e.match(/^@(returns?)([\s|:]\s*(.*))?$/i))?(a=b,b.push(c[3])):a&&!e.startsWith("@")?a.push(e):(a=void 0,_.push(e))}))}if(_.length?_.map((e=>h.push(" * "+e))):(h.push(" * $1"),m++),f.params.map((e=>{if(a=v[e.name.toLowerCase()])h.push(` * @param ${a.shift()}`),a.map((e=>h.push(" * "+e)));else{let t,n=[],s={};for(const n in e.returntypes)(0,r.cleardetectcache)(),(0,r.detectExp)(d,n,i.Position.is(t=e.returntypes[n])?t:o).map((e=>s[p(e)]=!0));n=s.any?["any"]:Object.keys(s),n.length||(n=["any"]),h.push(` * @param \${${(++m).toString()+`:{${n.join("|")}\\}`}} ${e.name} $${(++m).toString()}`)}})),b.length)h.push(` * @returns ${b.shift()}`),b.map((e=>h.push(" * "+e)));else{let e,t=[],n={};for(const t in f.returntypes)(0,r.cleardetectcache)(),(0,r.detectExp)(d,t,i.Position.is(e=f.returntypes[t])?e:o).map((e=>n[p(e)]=!0));t=n.any?["any"]:Object.keys(n),t.length&&h.push(` * @returns \${${(++m).toString()+":"+(t.length?"{"+t.join("|")+"\\}":"")}}`)}if(0===m)return;h.push(" */"),s||(s=i.Range.create(n,g,n,g),h.push("")),l(h.join("\n"),s)}}function p(e){return e.trim().replace(/([^.]+)$/,"\\$$$1").replace(/\\\$[@#]/,"")}},t.generateAuthor=async function(){if(!a("ahk2.getActiveTextEditorUriAndPosition"))return;let e=["/************************************************************************"," * @description ${1:}"," * @file $TM_FILENAME"," * @author ${2:}"," * @date ${3:$CURRENT_YEAR/$CURRENT_MONTH/$CURRENT_DATE}"," * @version ${4:0.0.0}"," ***********************************************************************/","$0"];await c([{command:"undo",wait:!0},{command:"undo",wait:!0}]);let{uri:t}=await s.connection.sendRequest("ahk2.getActiveTextEditorUriAndPosition"),n=s.lexers[t=t.toLowerCase()],o=n.get_token(0),r=i.Range.create(0,0,0,0);o.type.endsWith("COMMENT")&&"TK_BLOCK_COMMENT"===o.type&&o.content.match(/@(version|版本)\b/i)||(0===n.document.positionAt(o.offset).line&&e.push(""),l(e.join("\n"),r))}},3939:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=t.set_Workspacefolder=t.set_locale=t.set_dirname=t.set_ahkpath=t.set_ahk_h=t.clearLibfuns=t.update_settings=t.parseWorkspaceFolders=t.inWorkspaceFolders=t.getallahkfiles=t.loadahk2=t.initahk2cache=t.sendDiagnostics=t.getwebfile=t.getlocalefile=t.getlocalefilepath=t.restorePath=t.openFile=t.set_Connection=t.LibIncludeType=t.locale=t.getRCDATA=t.getDllExport=t.winapis=t.chinese_punctuations=t.extsettings=t.dllcalltpe=t.completionItemCache=t.pathenv=t.lexers=t.libdirs=t.hoverCache=t.symbolcache=t.libfuncs=t.ahkvars=t.inBrowser=t.isahk2_h=t.dirname=t.workspaceFolders=t.ahkpath_cur=t.connection=void 0;const r=n(6288),s=n(2880),a=n(6630),c=n(7147),l=n(1017),d=n(6169),u=n(7994);i(n(6169),t),i(n(6487),t),i(n(4104),t),i(n(6129),t),i(n(6810),t),i(n(3113),t),i(n(2793),t),i(n(9541),t),i(n(7994),t),i(n(6658),t),i(n(5932),t),i(n(9770),t),i(n(6001),t),i(n(5373),t),i(n(5116),t);const f=n(7994);var p;function h(e,n=!0){if(t.inBrowser){let t=y(e);return t?r.TextDocument.create(t.url,"ahk2",-10,t.text):void 0}{let o;try{o=(0,c.readFileSync)(e)}catch(e){return void t.connection.window.showErrorMessage(e.message)}if(255===o[0]&&254===o[1])o=o.toString("utf16le");else if(239===o[0]&&187===o[1]&&191===o[2])o=o.toString("utf8").substring(1);else try{o=new TextDecoder("utf8",{fatal:!0}).decode(o)}catch{return void(n&&t.connection.window.showErrorMessage(f.diagnostic.invalidencoding(e)))}return e===e.toLowerCase()&&(e=m(e)),r.TextDocument.create(a.URI.file(e).toString(),"ahk2",-10,o)}}function m(e){if(!(0,c.existsSync)(e))return e;e.includes("..")&&(e=(0,l.resolve)(e));let t=e.toUpperCase().split("\\"),n=1,o=t[0];for(;n<t.length;){for(const e of(0,c.readdirSync)(o+"\\"))if(e.toUpperCase()===t[n]){o+="\\"+e;break}n++}return o.toLowerCase()===e?o:e}function g(e){let n,o=e.match(/<>./);if(o){if((0,c.existsSync)(n=e.replace("<>",t.locale)))return n;if("zh-tw"===t.locale.toLowerCase()&&(0,c.existsSync)(n=e.replace("<>","zh-cn")))return n;if((0,c.existsSync)(n=e.replace(o[0],"")))return n}else if((0,c.existsSync)(e))return e}function y(e){let n,o=e.match(/<>./),i=[],r=new XMLHttpRequest;if(o?(i.push(e.replace("<>",t.locale)),"zh-tw"===t.locale.toLowerCase()&&i.unshift(e.replace("<>","zh-cn")),i.unshift(e.replace(o[0],""))):i.push(e),n=i.pop())return function e(t){return r.open("GET",t,!1),r.send(),200===r.status?{url:t,text:r.responseText}:(n=i.pop())?e(n):void 0}(n)}function v(e){const n={title:"Trigger Parameter Hints",command:"editor.action.triggerParameterHints"};let o,i,r="",a=s.Range.create(0,0,0,0);for(const n in e)if("snippet"===n)for(i of e.snippet){const e=s.CompletionItem.create(i.prefix);e.kind=s.CompletionItemKind.Snippet,e.insertText=l(i.body),e.detail=i.description,e.insertTextFormat=s.InsertTextFormat.Snippet,t.completionItemCache.snippet.push(e)}else if("keys"===n)for(i of e.keys){const e=s.CompletionItem.create(i.prefix);e.kind=s.CompletionItemKind.Keyword,e.insertText=i.body,e.detail=i.description,t.completionItemCache.key.push(e)}else{let t=e[n];switch(n){case"keywords":o=s.CompletionItemKind.Keyword;break;case"functions":o=s.CompletionItemKind.Function;break;case"variables":o=s.CompletionItemKind.Variable;break;case"constants":o=s.CompletionItemKind.Constant;break;default:o=s.CompletionItemKind.Text}for(i of t)c()}function c(){var e;const c=s.CompletionItem.create(i.prefix.replace(".","")),u={contents:[]},f=i.prefix.toLowerCase();if(c.kind=o,c.insertTextFormat=s.InsertTextFormat.Snippet,o===s.CompletionItemKind.Constant?(c.insertText="${1:"+i.prefix+" := }"+i.body+"$0",c.detail=null!==(e=i.description)&&void 0!==e?e:i.body,r="constant"):i.prefix.startsWith("#")?(r="sharp",i.body=l(i.body),c.insertText=i.body.replace(/^#/,""),c.detail=i.description):(r="other",o===s.CompletionItemKind.Function&&-1===i.body.indexOf("|}")&&-1!==i.body.indexOf("(")?(c.insertText=i.prefix+"($0)",c.command=n,c.detail=i.description):(c.insertText=i.body.replace(/\$\{\d:\s*\[,[^\]\}]+\]\}/,(()=>(c.command=n,""))),c.detail=i.description)),i.body=i.body.replace(/\$\{\d+((\|)|:)([^}]*)\2\}|\$\d/g,((...e)=>e[2]?e[3].replace(/,/g,"|"):e[3]||"")),c.documentation={kind:s.MarkupKind.Markdown,value:"```ahk2\n"+i.body+"\n```"},o!==s.CompletionItemKind.Function&&t.completionItemCache[r].push(c),o===s.CompletionItemKind.Constant||o===s.CompletionItemKind.Text)return;u.contents={kind:s.MarkupKind.Markdown,value:"```ahk2\n"+i.body+"\n```\n\n"+i.description};let p=o===s.CompletionItemKind.Function?0:1;if(t.hoverCache[p][f]||(t.hoverCache[p][f]=[]),!p){let e=d.FuncNode.create(i.prefix,s.SymbolKind.Function,a,a,i.body.replace(/^\w+[(\s]?|\)/g,"").split(",").map((e=>s.DocumentSymbol.create(e.replace(/[\[\]\s]/g,""),void 0,s.SymbolKind.Variable,a,a))));e.full=e.full.replace(/(['\w]*\|['\w]*)(\|['\w]*)+/,((...e)=>(i.body=i.body.replace(e[0],e[1]+"|..."),e[1]+"|..."))),e.detail=i.description,t.ahkvars[f]=e}i.description&&t.hoverCache[p][f].push(u)}function l(e){return"object"==typeof e?e.join("\n"):e}}function b(e,t=3){let n=[];return(0,c.existsSync)(e)&&(0,c.statSync)(e).isDirectory()&&function e(o,i){(0,c.readdirSync)(o).map((r=>{let s=(0,l.resolve)(o,r);(0,c.statSync)(s).isDirectory()?i<t&&e(s,i+1):r.match(/\.(ahk2?|ah2)$/i)&&n.push(s.toLowerCase())}))}(e,0),n}async function _(e){return new Promise((t=>setTimeout(t,e)))}t.ahkpath_cur="",t.workspaceFolders=[],t.dirname="",t.isahk2_h=!1,t.inBrowser=!1,t.ahkvars={},t.libfuncs={},t.symbolcache={},t.hoverCache=[{},{}],t.libdirs=[],t.lexers={},t.pathenv={},t.completionItemCache={sharp:[],method:[],key:[],other:[],constant:[],snippet:[]},t.dllcalltpe=[],t.extsettings={InterpreterPath:"C:\\Program Files\\AutoHotkey\\AutoHotkey32.exe",ActionWhenV1IsDetected:"Warn",AutoLibInclude:0,CommentTags:"^;;\\s*(.*)",CompleteFunctionParens:!1,SymbolFoldingFromOpenBrace:!1,Diagnostics:{ParamsCheck:!0,ClassStaticMemberCheck:!0},FormatOptions:{},WorkingDirs:[]},t.chinese_punctuations={"，":",","。":".","；":";","‘":"'","’":"'","【":"[","】":"]","《":"<","》":">","？":"?","：":":","“":'"',"”":'"',"（":"(","）":")","！":"!"},t.winapis=[],t.getDllExport=(e,t=!1)=>[],t.getRCDATA=e=>{},t.locale="en-us",function(e){e[e.Disabled=0]="Disabled",e[e.Local=1]="Local",e[e["User and Standard"]=2]="User and Standard",e[e.All=3]="All"}(p=t.LibIncludeType||(t.LibIncludeType={})),t.set_Connection=function(e,n,o,i){t.connection=e,t.inBrowser=n,o&&(t.getDllExport=o),i&&(t.getRCDATA=i)},t.openFile=h,t.restorePath=m,t.getlocalefilepath=g,t.getlocalefile=function(e,t){let n=g(e);if(n)return(0,c.readFileSync)(n,t?{encoding:t}:void 0)},t.getwebfile=y,t.sendDiagnostics=function(){let e;for(const n in t.lexers)e=t.lexers[n],t.connection.sendDiagnostics({uri:e.document.uri,diagnostics:e.actived||e.relevance&&Object.keys(e.relevance).length?e.diagnostics:[]})},t.initahk2cache=function(){t.ahkvars={},t.dllcalltpe=["str","astr","wstr","int64","int","uint","short","ushort","char","uchar","float","double","ptr","uptr","HRESULT"],t.completionItemCache={sharp:[],method:[],key:[],other:[],constant:[],snippet:!t.inBrowser&&process.env.AHK2_LS_CONFIG?[]:[{label:"zs-Comment",detail:u.completionitem.comment(),kind:s.CompletionItemKind.Snippet,command:{title:"ahk2.generate.comment",command:"ahk2.generate.comment",arguments:[]}},{label:"zs-Author",detail:u.completionitem.author(),kind:s.CompletionItemKind.Snippet,command:{title:"ahk2.generate.author",command:"ahk2.generate.author"}}]}},t.loadahk2=async function(e="ahk2"){let n;if(t.inBrowser){const n=t.dirname+`/syntaxes/<>/${e}`;let o,i=h(n+".d.ahk");if(i){let e=new d.Lexer(i,void 0,3);e.parseScript(),t.lexers[e.uri]=e}"ahk2"===e&&(o=y(t.dirname+"/syntaxes/ahk2_common.json"))&&v(JSON.parse(o.text)),(o=y(n+".json"))&&v(JSON.parse(o.text))}else{const o=(0,l.resolve)(__dirname,`../../syntaxes/<>/${e}`);let i;if((n=g(o+".d.ahk"))&&(i=h(n))){let e=new d.Lexer(i,void 0,3);e.parseScript(),t.lexers[e.uri]=e}if(!(n=g(o+".json")))return;"ahk2"===e&&v(JSON.parse((0,c.readFileSync)((0,l.resolve)(__dirname,"../../syntaxes/ahk2_common.json"),{encoding:"utf8"}))),v(JSON.parse((0,c.readFileSync)(n,{encoding:"utf8"})))}},t.getallahkfiles=b,t.inWorkspaceFolders=function(e){e=e.toLowerCase();for(let n of t.extsettings.WorkingDirs.concat(t.workspaceFolders))if(e.startsWith(n))return n;return""},t.parseWorkspaceFolders=async function(){let e;if(t.inBrowser){let n=await t.connection.sendRequest("ahk2.getWorkspaceFiles",[])||[];for(let o of n)if(!t.lexers[e=o.toLowerCase()]){let n=await t.connection.sendRequest("ahk2.getWorkspaceFileContent",[o]);if(n){let i=new d.Lexer(r.TextDocument.create(o,"ahk2",-10,n));if(i.parseScript(),i.maybev1){i.close();continue}t.lexers[e]=i,await _(100)}}}else for(let n of t.workspaceFolders){let o,i=a.URI.parse(n).fsPath;for(let n of b(i))if(e=a.URI.file(n).toString().toLowerCase(),!t.lexers[e]&&(o=h(n,!1))){let n=new d.Lexer(o);if(n.parseScript(),n.maybev1){n.close();continue}t.lexers[e]=n,await _(100)}}},t.update_settings=function(e){"string"==typeof e.AutoLibInclude?e.AutoLibInclude=p[e.AutoLibInclude]:"boolean"==typeof e.AutoLibInclude&&(e.AutoLibInclude=e.AutoLibInclude?3:0);try{(0,d.update_commentTags)(e.CommentTags)}catch(n){t.connection.console.error(n.message),e.CommentTags=t.extsettings.CommentTags}e.WorkingDirs instanceof Array?e.WorkingDirs=e.WorkingDirs.map((e=>(e=a.URI.file(e).toString().toLowerCase()).endsWith("/")?e:e+"/")):delete e.WorkingDirs,Object.assign(t.extsettings,e)},t.clearLibfuns=function(){t.libfuncs={}},t.set_ahk_h=function(e){t.isahk2_h=e},t.set_ahkpath=function(e){t.ahkpath_cur=e},t.set_dirname=function(e){t.dirname=e.replace(/[/\\]$/,"")},t.set_locale=function(e){e&&(t.locale=e.toLowerCase())},t.set_Workspacefolder=function(e){t.workspaceFolders=e||[]},t.sleep=_},6810:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.completionProvider=void 0;const o=n(7147),i=n(1017),r=n(2374),s=n(6630),a=n(6169),c=n(7994),l=n(3939);t.completionProvider=async function(e,t){var n,d,u,f,p,h,m,g,y,v,b,_,k,T,R,S;if(t.isCancellationRequested||null===(null===(n=e.context)||void 0===n?void 0:n.triggerCharacter))return;const{position:w,textDocument:D}=e,C=[],x={},K={};let O,P,E,M=!0,A=null===(d=e.context)||void 0===d?void 0:d.triggerKind,N=D.uri.toLowerCase(),q=l.lexers[N],L=q.buildContext(w,!1,!0),j="",F="",I="",W=!1,$=L.linetext,V=$.charAt(L.range.start.character-1),U=q.relevance,H={label:""},{line:B,character:z}=w,X=new RegExp(L.text.match(/[^\w]/)?L.text.replace(/(.)/g,"$1.*"):"("+L.text.replace(/(.)/g,"$1.*")+"|[^\\w])","i"),G=q.document.offsetAt({line:B,character:z-1}),Q=q.find_token(G),J="TK_STRING"===Q.type,Y="([".includes(L.suf.charAt(0)||"\0");if(J){if(2===A)return;V=""}else if(Q.type.endsWith("COMMENT"))W=!0,"TK_COMMENT"===Q.type&&($=$.replace(/^\s*;@include\b/i,"#include"));else if(L.pre.startsWith("#"))for(let e=0;e<w.character;e++)if(F=$.charAt(e),j===F){if("`"===$.charAt(e-1))continue;j="",W=!1}else"%"===F?W=!W:""!==j||'"'!==F&&"'"!==F||0!==e&&!$.charAt(e-1).match(/[([%,\s]/)||(j=F);else if(!Q.topofline)for(;(Q=Q.previous_token)&&Q.type;){if("%"===Q.content){Q.next_pair_pos&&(W=!0);break}if(Q.topofline)break}if(!W&&"."===V&&L.pre.match(/^#(include|dllload)/i)&&(V="###"),P=$.match(/^\s*((class\s+(\w|[^\x00-\x7f])+\s+)?(extends)|class)\s/i)){if("."===V)return P[3]&&(null===(u=(0,a.searchNode)(q,q.buildContext(w,!0,!0).text.replace(/\.[^.]*$/,"").toLowerCase(),w,r.SymbolKind.Class))||void 0===u||u.map((e=>{Object.values((0,a.getClassMembers)(q,e.node,!0)).map((e=>{e.kind===r.SymbolKind.Class&&!x[I=e.name.toLowerCase()]&&X.test(I)&&(C.push(oe(e)),x[I]=!0)}))}))),C;if(!P[3]&&!P[2])return[{label:"extends",kind:r.CompletionItemKind.Keyword}];let e=[q.declaration];for(const t in U)l.lexers[t]&&e.push(l.lexers[t].declaration);e.map((e=>{for(const t in e)e[t].kind===r.SymbolKind.Class&&!x[t]&&X.test(t)&&(C.push(oe(e[t])),x[t]=!0)}));for(const e in l.ahkvars)l.ahkvars[e].kind===r.SymbolKind.Class&&!x[e]&&X.test(e)&&(C.push(oe(l.ahkvars[e])),x[e]=!0);return C}switch(V){case"#":return C.push(...l.completionItemCache.sharp),C.push(...l.completionItemCache.snippet),C;case".":if(L=q.buildContext(w,!0,!0),L.text.match(/^\d+(\.\d*)*\.$/))return;let e=!0,t=!0,n=!1,d=!1,u={},D=[],j={},F=L.text.replace(/\.\w*$/,"").toLowerCase();if((0,a.cleardetectcache)(),(0,a.detectExpType)(q,F,w,j),void 0===j["#any"])for(const o in j)if(e=!1,t=!o.match(/[@#][^.]+$/),j[o]){let e=j[o].node.kind;if(e===r.SymbolKind.Function||e===r.SymbolKind.Method){n||(n=!0,l.ahkvars.func&&(D.push(l.ahkvars.func),t=!1));continue}D.push(j[o].node)}else o.includes("=>")?!n&&(n=!0,l.ahkvars.func)&&(D.push(l.ahkvars.func),t=!1):null===(f=(0,a.searchNode)(q,o,w,r.SymbolKind.Variable))||void 0===f||f.map((e=>D.push(e.node)));void 0!==j["#object"]&&(0,a.getcacheproperty)().map((e=>{u[I=e.toLowerCase()]||(C.push(u[I]=r.CompletionItem.create(e)),u[I].kind=r.CompletionItemKind.Property)}));for(const e of D)switch(e.kind){case r.SymbolKind.Class:let n=(0,a.getClassMembers)(q,e,t);t&&!1===(null===(p=n.__new)||void 0===p?void 0:p.static)&&delete n.__new,Object.values(n).map((e=>{X.test(e.name)&&(e.kind===r.SymbolKind.Property||e.kind===r.SymbolKind.Class?u[I=e.name.toLowerCase()]?u[I].detail!==e.full&&(u[I].detail="(...) "+e.name,u[I].insertText=e.name):C.push(u[I]=oe(e)):e.kind===r.SymbolKind.Method&&(u[I=e.name.toLowerCase()]?u[I].detail!==e.full&&(u[I].detail="(...) "+e.name+"()",u[I].documentation=""):C.push(u[I]=oe(e))))}));break;case r.SymbolKind.Object:d=!0}if(!e&&(1!==A||L.text.match(/\..{0,2}$/)))return C;let V=[q.object];for(const e in U)V.push(l.lexers[e].object);for(const e of V){if(e===q.object){for(const t in e.property)if(X.test(t))if(u[t])u[t].detail=u[t].label;else{let n=e.property[t];te(n)||C.push(u[t]=oe(n))}}else for(const t in e.property)X.test(t)&&(u[t]?u[t].detail=u[t].label:C.push(u[t]=oe(e.property[t])));for(const t in e.method)X.test(t)&&(u[t]?"object"==typeof u[t]&&(u[t].detail="(...) "+u[t].label):C.push(u[t]=oe(e.method[t][0])))}for(const e in l.ahkvars){if(d&&"object"===e||n&&"func"===e||"any"===e||!l.ahkvars[e].children)continue;let t=[];null===(h=l.ahkvars[e].children)||void 0===h||h.map((e=>{e.kind===r.SymbolKind.Class?t.push(...e.children):t.push(e)})),t.map((e=>{e.kind!==r.SymbolKind.Class&&X.test(I=e.name.toLowerCase())&&(u[I]?u[I].detail!==e.full&&(u[I].detail="(...) "+e.name,u[I].insertText=e.name,u[I].documentation=void 0):C.push(u[I]=oe(e)))}))}for(const e of null!==(g=null===(m=l.ahkvars.any)||void 0===m?void 0:m.children)&&void 0!==g?g:[])!u[I=e.name.toLowerCase()]&&X.test(I)&&C.push(u[I]=oe(e));return C;default:if(P=$.match(/^\s*#(include|(dllload))/i)){if(l.inBrowser)return;$=$.replace(/\s+;.*/,"").trimRight();let e,t=$.replace(/^\s*#(include(again)?|dllload)\s+/i,"").replace(/\*i\s+/i,""),n=[],a=!1,c="",d=$.substring($.length-t.length,w.character),u="\\",f="",p=!!P[2];if(W)return l.completionItemCache.other.map((e=>{e.kind===r.CompletionItemKind.Variable&&X.test(e.label)&&C.push(e)})),C;if(!d)return;if(d.match(/^['"<]/)){if(d.substring(1).match(/[">]/))return;if("<"===(c=d[0])){if(p)return;a=!0,n=q.libdirs}else p||(n=(P=q.includedir.get(w.line))?[P]:[q.scriptpath]);d=d.substring(1),c="<"===c?">":c,-1!==$.substring(w.character).indexOf(c)&&(c="")}else p||(n=(P=q.includedir.get(w.line))?[P]:[q.scriptpath]);let h=p?new RegExp(/\.(dll|ocx|cpl)$/i):a?new RegExp(/\.ahk$/i):new RegExp(/\.(ahk2?|ah2)$/i),m="";for(d=d.replace(/[^\\/]*$/,(e=>(m=e,"")));e=d.match(/%a_(\w+)%/i);)if(l.pathenv[f=e[1].toLowerCase()])d=d.replace(e[0],l.pathenv[f]);else if("scriptdir"===f)d=d.replace(e[0],q.scriptdir);else{if("linefile"!==f)return;d=d.replace(e[0],s.URI.parse(q.uri).fsPath)}if(d.endsWith("/")&&(u="/"),m.startsWith("*")){if(l.inBrowser)return;for(let e in null!==(y=(0,l.getRCDATA)())&&void 0!==y?y:{})ee(e,r.CompletionItemKind.File);return C}m=m.replace(/`;/g,";");let g,v=new RegExp((m.match(/[^\w]/)?m.replace(/(.)/g,"$1.*"):"("+m.replace(/(.)/g,"$1.*")+"|[^\\w])").replace(/\.\./,"\\.."),"i");p&&(n=[(P=q.dlldir.get(w.line))?P:q.scriptpath,"C:\\Windows\\System32"]),m.match(/[^\w]/)&&(g=r.TextEdit.replace({start:{line:w.line,character:w.character-m.length},end:w},""));for(let e of n)if((0,o.existsSync)(e=(0,i.resolve)(e,d)+"\\")&&(0,o.statSync)(e).isDirectory()){for(let t of(0,o.readdirSync)(e))try{(0,o.statSync)(e+t).isDirectory()?v.test(t)&&(ee(t.replace(/;/g,"`;"),r.CompletionItemKind.Folder),H.command={title:"Trigger Suggest",command:"editor.action.triggerSuggest"},g?H.textEdit=Object.assign({},g,{newText:H.label+u}):H.insertText=H.label+u):h.test(t)&&v.test(a?t=t.replace(h,""):t)&&(ee(t.replace(/;/g,"`;"),r.CompletionItemKind.File),g?H.textEdit=Object.assign({},g,{newText:H.label+c}):H.insertText=H.label+c)}catch{}if(d.includes(":"))break}return C}if(P=$.match(/(?<!\.)\b(goto|continue|break)\b(?!\s*:)(\s+|\(\s*('|")?)/i)){let e=P[2].trim();if(O=q.searchScopedNode(w))null===(v=O.children)||void 0===v||v.map((e=>{e.kind===r.SymbolKind.Field&&X.test(e.name)&&C.push(oe(e))}));else{q.children.map((e=>{e.kind===r.SymbolKind.Field&&X.test(e.name)&&C.push(oe(e))}));for(const e in U)l.lexers[e].children.map((e=>{e.kind===r.SymbolKind.Field&&X.test(e.name)&&C.push(oe(e))}))}if(""===e||P[3])return C;for(let e of C)e.insertText=`'${e.insertText}'`}else{if(J){let e=(0,a.getFuncCallInfo)(q,w);if(e){let t="."===$.charAt(e.pos.character-1);if(t)switch(e.name){case"add":if(0===e.index){let t=(0,a.searchNode)(q,q.buildContext(e.pos,!0).text.toLowerCase(),e.pos,r.SymbolKind.Method);if(t&&(null===(b=t[0].node.full)||void 0===b?void 0:b.match(/\(gui\)\s+add\(/i)))return["Text","Edit","UpDown","Picture","Button","Checkbox","Radio","DropDownList","ComboBox","ListBox","ListView","TreeView","Link","Hotkey","DateTime","MonthCal","Slider","Progress","GroupBox","Tab","Tab2","Tab3","StatusBar","ActiveX","Custom"].map(ne)}break;case"onevent":if(0===e.index){let t=null===(_=(0,a.searchNode)(q,q.buildContext(e.pos,!0).text.toLowerCase(),e.pos,r.SymbolKind.Method))||void 0===_?void 0:_[0].node;if(t){if(t.full.match(/\(gui\)\s+onevent\(/i))return["Close","ContextMenu","DropFiles","Escape","Size"].map(ne);if(t.full.match(/\(gui\.control\)\s+onevent\(/i))return["Change","Click","DoubleClick","ColClick","ContextMenu","Focus","LoseFocus","ItemCheck","ItemEdit","ItemExpand","ItemFocus","ItemSelect"].map(ne)}}break;case"bind":case"call":{let n=q.buildContext(e.pos,!0).text.toLowerCase(),o=null===(k=(0,a.searchNode)(q,n,e.pos,r.SymbolKind.Method))||void 0===k?void 0:k[0].node;o&&(null===(T=o.full)||void 0===T?void 0:T.match(/\(func\)\s+\w+\(/i))?(e.name=n.slice(0,-5),t=!1):o&&o.kind===r.SymbolKind.Function&&(e.name=o.name.toLowerCase(),t=!1);break}}if(!t&&Z(e.name,e.pos))switch(e.name){case"dynacall":if(0!==e.index)break;case"dllcall":if(!Z(e.name,e.pos))break;if(0===e.index){if(l.inBrowser)break;let t=q.tokens[q.document.offsetAt(e.pos)],n=q.document.offsetAt(w);if(!t)break;for(;(t=q.tokens[t.next_token_offset])&&"("===t.content;)continue;if(t&&"TK_STRING"===t.type&&n>t.offset&&n<=t.offset+t.length){let e=t.content.substring(1,n-t.offset),i=[q],s={};for(let e in U)i.push(l.lexers[e]);if(C.splice(0),e.match(/[\\/]/)){let t={},n=!0;return I=e.replace(/[\\/][^\\/]*$/,"").replace(/\\/g,"/").toLowerCase(),I.match(/\.\w+$/)||(I+=".dll"),I.includes(":")?(n=!1,t[I]=1):I.includes("/")?I.startsWith("/")?t[q.scriptpath+I]=1:t[q.scriptpath+"/"+I]=1:i.map((e=>{e.dllpaths.map((e=>{e.endsWith(I)&&(t[e]=1,n&&e.includes("/")&&(n=!1))})),n&&(t[I]=t[e.scriptpath+"/"+I]=1)})),(0,l.getDllExport)(Object.keys(t),!0).map((e=>ee(e,r.CompletionItemKind.Function))),C}return i.map((e=>e.dllpaths.map((e=>{e=e.replace(/^.*[\\/]/,"").replace(/\.dll$/i,""),s[I=e.toLowerCase()]||(s[I]=!0,ee(e+"\\",r.CompletionItemKind.File))})))),(0,o.readdirSync)("C:\\Windows\\System32").map((e=>{e.toLowerCase().endsWith(".dll")&&X.test(e=e.slice(0,-4))&&ee(e+"\\",r.CompletionItemKind.File)})),l.winapis.map((e=>{X.test(e)&&ee(e,r.CompletionItemKind.Function)})),C}}else if(e.index>0&&e.index%2==1){for(const e of["cdecl"].concat(l.dllcalltpe))ee(e,r.CompletionItemKind.TypeParameter),H.commitCharacters=["*"];return C}break;case"comcall":if(e.index>1&&e.index%2==0){for(const e of["cdecl"].concat(l.dllcalltpe))ee(e,r.CompletionItemKind.TypeParameter),H.commitCharacters=["*"];return C}break;case"numget":if(2===e.index||1===e.index){for(const e of l.dllcalltpe.filter((e=>!e.match(/str$/i))))ee(e,r.CompletionItemKind.TypeParameter);return C}break;case"numput":if(e.index%2==0){for(const e of l.dllcalltpe.filter((e=>!e.match(/str$/i))))ee(e,r.CompletionItemKind.TypeParameter);return C}break;case"objbindmethod":if(1===e.index){let e,t={};if(["new","delete","get","set","call"].map((e=>{t["__"+e]=!0})),P=L.pre.match(/objbindmethod\(\s*(([\w.]|[^\x00-\x7f])+)\s*,/i)){let n={};if((0,a.cleardetectcache)(),(0,a.detectExpType)(q,P[1],w,n),void 0===n["#any"])for(const o in n)!1===n[o]?e=(0,a.searchNode)(q,o,w,r.SymbolKind.Class):n[o]&&(e=[n[o]]),null==e||e.map((e=>{Object.values((0,a.getClassMembers)(q,e.node,!o.match(/[@#][^.]+$/))).map((e=>{e.kind===r.SymbolKind.Method&&!t[P=e.name.toLowerCase()]&&X.test(P)&&(t[P]=!0,ee(e.name,r.CompletionItemKind.Method))}))}))}if(!e){let e=[q.object.method];for(const t in U)e.push(l.lexers[t].object.method);for(const n of e)for(const e in n)!t[e]&&X.test(e)&&(t[e]=!0,ee(n[e][0].name,r.CompletionItemKind.Method))}return C}break;case"processsetpriority":if(0===e.index)return["Low","BelowNormal","Normal","AboveNormal","High","Realtime"].map(ne);break;case"thread":if(0===e.index)return["NoTimers","Priority","Interrupt"].map(ne);break;case"settitlematchmode":if(0===e.index)return["Fast","Slow","RegEx"].map(ne);break;case"setnumlockstate":case"setcapslockstate":case"setscrolllockstate":if(0===e.index)return["On","Off","AlwaysOn","AlwaysOff"].map(ne);break;case"sendmode":if(0===e.index)return["Event","Input","InputThenPlay","Play"].map(ne);break;case"blockinput":if(0===e.index)return["On","Off","Send","Mouse","SendAndMouse","Default","MouseMove","MouseMoveOff"].map(ne);break;case"coordmode":if(0===e.index)return["ToolTip","Pixel","Mouse","Caret","Menu"].map(ne);if(1===e.index)return["Screen","Window","Client"].map(ne)}}M&&l.completionItemCache.other.map((e=>{e.kind===r.CompletionItemKind.Text&&X.test(e.label)&&(x[e.label.toLowerCase()]=!0,C.push(e))}));for(const e in x)K[e]=!0;for(const e in q.texts)!K[e]&&X.test(e)&&(K[e]=!0,ee(q.texts[e],r.CompletionItemKind.Text));for(const e in U)for(const t in P=l.lexers[e].texts)!K[t]&&X.test(t)&&(K[t]=!0,ee(P[t],r.CompletionItemKind.Text));return C}if(W)M=!1;else if(!Q.content&&!$.includes("::"))return l.completionItemCache.other.filter((e=>e.kind===r.CompletionItemKind.Text))}let B=0===l.extsettings.FormatOptions.one_true_brace?"\n":" ";if(M)for(let[e,t]of[["switch",["switch ${1:[SwitchValue, CaseSense]}","{\n\tcase ${2:}:\n\t\t${3:}\n\tdefault:\n\t\t$0\n}"]],["trycatch",["try","{\n\t$1\n}","catch ${2:Error} as ${3:e}","{\n\t$0\n}"]],["class",["class $1","{\n\t$0\n}"]]])C.push({label:e,kind:r.CompletionItemKind.Keyword,insertTextFormat:r.InsertTextFormat.Snippet,insertText:t.join(B)});if(O=q.searchScopedNode(w))if(O.kind===r.SymbolKind.Class){let e=[],t=$.trim();for(let t of["__Call(${1:Name}, ${2:Params})","__Delete()","__Enum(${1:NumberOfVars})","__Get(${1:Key}, ${2:Params})","__Item[$1]","__New($1)","__Init()","__Set(${1:Key}, ${2:Params}, ${3:Value})"])e.push({label:t.replace(/[(\[].*$/,""),kind:r.CompletionItemKind.Method,insertTextFormat:r.InsertTextFormat.Snippet,insertText:t+B+"{\n\t$0\n}"});if(t.match(/^(\w|[^\x00-\x7f])*$/)){if(w.line===O.range.end.line&&w.character>O.range.end.character)return;return e.concat({label:"static",kind:r.CompletionItemKind.Keyword,insertText:"static "},C.pop())}if(t.match(/^(static\s+)?(\w|[^\x00-\x7f])+(\(|$)/i))return e}else if(O.kind===r.SymbolKind.Property&&O.children)return[{label:"get",kind:r.CompletionItemKind.Function},{label:"set",kind:r.CompletionItemKind.Function}];for(const e in l.ahkvars)X.test(e)&&(x[e]=oe(l.ahkvars[e]));Object.values(q.declaration).map((e=>{!X.test(I=e.name.toLowerCase())||te(e)||x[I]&&e.kind===r.SymbolKind.Variable||(x[I]=oe(e))}));for(const e in U){E=U[e];for(const t in P=null===(R=l.lexers[e])||void 0===R?void 0:R.declaration)X.test(t)&&(!x[t]||x[t].kind===r.CompletionItemKind.Variable&&P[t].kind!==r.SymbolKind.Variable)&&(H=oe(P[t]),H.detail=`${c.completionitem.include(E)}  `+(H.detail||""),x[t]=H)}O&&q.getScopeChildren(O).map((e=>{!X.test(I=e.name.toLowerCase())||x[I]&&e.kind===r.SymbolKind.Variable&&!e.returntypes||(x[I]=oe(e))})),l.completionItemCache.other.map((e=>{X.test(e.label)&&(e.kind===r.CompletionItemKind.Variable?x[e.label.toLowerCase()]=e:e.kind===r.CompletionItemKind.Function?x[I=e.label.toLowerCase()]||(x[I]=e):M&&e.kind!==r.CompletionItemKind.Text&&C.push(e))})),O||W||($.includes("::")?C.push(...l.completionItemCache.key):C.push(...l.completionItemCache.key.filter((e=>!e.label.toLowerCase().includes("alttab")))));let z=(0,l.inWorkspaceFolders)(q.document.uri)||q.scriptdir,G=0;if(l.extsettings.AutoLibInclude)for(const e in l.libfuncs)if((!U||!U[e])&&(E=s.URI.parse(e).fsPath,(l.extsettings.AutoLibInclude>1&&l.libfuncs[e].islib||1&l.extsettings.AutoLibInclude&&E.startsWith(z))&&(l.libfuncs[e].map((e=>{!x[I=e.name.toLowerCase()]&&X.test(I)&&(H=oe(e),H.detail=`${c.completionitem.include(E)}  `+(H.detail||""),H.command={title:"ahk2.fix.include",command:"ahk2.fix.include",arguments:[E,N]},delete H.commitCharacters,x[I]=H,G++)})),G>300)))break;return null===(S=null==O?void 0:O.children)||void 0===S||S.map((e=>{x[I=e.name.toLowerCase()]||!X.test(I)||te(e)||(x[I]=oe(e))})),M&&function(){if(C.push(...l.completionItemCache.snippet),1===A&&L.text.length>2&&L.text.match(/^[a-z]+_/i)){const e=l.completionItemCache.constant;for(const t of e)X.test(t.label)&&C.push(t)}}(),C.concat(Object.values(x))}function Z(e,t){var n;let o=null===(n=(0,a.searchNode)(q,e,t,r.SymbolKind.Variable))||void 0===n?void 0:n[0].node;return o&&o===l.ahkvars[e]}function ee(e,t){x[I=e.toLowerCase()]||(C.push(H=r.CompletionItem.create(e)),H.kind=t,x[I]=!0)}function te(e){return e.range.end.line===B&&e.range.start.character<=z&&z<=e.range.end.character}function ne(e){const t=r.CompletionItem.create(e);return t.kind=r.CompletionItemKind.Text,t.command={title:"cursorRight",command:"cursorRight"},t}function oe(e){let t=r.CompletionItem.create(e.name);switch(e.kind){case r.SymbolKind.Function:case r.SymbolKind.Method:t.kind=e.kind===r.SymbolKind.Method?r.CompletionItemKind.Method:r.CompletionItemKind.Function,l.extsettings.CompleteFunctionParens?Y?(t.commitCharacters=["\t"],t.command={title:"cursorRight",command:"cursorRight"}):e.params.length?(t.command={title:"Trigger Parameter Hints",command:"editor.action.triggerParameterHints"},e.params[0].name.includes("|")?(t.insertText=t.label+"(${1|"+e.params[0].name.replace(/\|/g,",")+"|})",t.insertTextFormat=r.InsertTextFormat.Snippet):(t.insertText=t.label+"($0)",t.insertTextFormat=r.InsertTextFormat.Snippet)):t.insertText=t.label+"()":t.commitCharacters=["\t","("],t.detail=e.full,t.documentation=e.detail;break;case r.SymbolKind.Variable:case r.SymbolKind.TypeParameter:t.kind=r.CompletionItemKind.Variable,t.detail=e.detail;break;case r.SymbolKind.Class:t.kind=r.CompletionItemKind.Class,t.commitCharacters=[".","("],t.detail="class "+t.label,t.documentation=e.detail;break;case r.SymbolKind.Event:t.kind=r.CompletionItemKind.Event;break;case r.SymbolKind.Field:t.kind=r.CompletionItemKind.Field,t.label=t.insertText=t.label.replace(/:$/,"");break;case r.SymbolKind.Property:if(t.kind=r.CompletionItemKind.Property,t.detail=e.full||t.label,t.documentation=e.detail||"",e.children)for(const n of e.children)if(n.kind===r.SymbolKind.Function&&"get"===n.name.toLowerCase()&&n.params.length){t.insertTextFormat=r.InsertTextFormat.Snippet,t.insertText=t.label+"[$0]";break}break;default:t.kind=r.CompletionItemKind.Text}return t}}},4780:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.builtin_ahkv1_commands=t.builtin_variable_h=t.builtin_variable=void 0,t.builtin_variable=["a_priorline","a_workfilename","true","false","unset","a_ahkpath","a_ahkversion","a_allowmainwindow","a_appdata","a_appdatacommon","a_args","a_clipboard","a_computername","a_comspec","a_controldelay","a_coordmodecaret","a_coordmodemenu","a_coordmodemouse","a_coordmodepixel","a_coordmodetooltip","a_cursor","a_dd","a_ddd","a_dddd","a_defaultmousespeed","a_desktop","a_desktopcommon","a_detecthiddentext","a_detecthiddenwindows","a_endchar","a_eventinfo","a_fileencoding","a_hotkeyinterval","a_hotkeymodifiertimeout","a_hour","a_iconfile","a_iconhidden","a_iconnumber","a_icontip","a_index","a_initialworkingdir","a_is64bitos","a_isadmin","a_iscompiled","a_iscritical","a_ispaused","a_issuspended","a_keydelay","a_keydelayplay","a_keyduration","a_keydurationplay","a_language","a_lasterror","a_linefile","a_linenumber","a_listlines","a_loopfield","a_loopfileattrib","a_loopfiledir","a_loopfileext","a_loopfilefullpath","a_loopfilename","a_loopfilepath","a_loopfileshortname","a_loopfileshortpath","a_loopfilesize","a_loopfilesizekb","a_loopfilesizemb","a_loopfiletimeaccessed","a_loopfiletimecreated","a_loopfiletimemodified","a_loopreadline","a_loopregkey","a_loopregname","a_loopregtimemodified","a_loopregtype","a_maxhotkeysperinterval","a_mday","a_menumaskkey","a_min","a_mm","a_mmm","a_mmmm","a_mon","a_mousedelay","a_mousedelayplay","a_msec","a_mydocuments","a_now","a_nowutc","a_osversion","a_priorhotkey","a_priorkey","a_programfiles","a_programs","a_programscommon","a_ptrsize","a_regview","a_screendpi","a_screenheight","a_screenwidth","a_scriptdir","a_scriptfullpath","a_scripthwnd","a_scriptname","a_sec","a_sendlevel","a_sendmode","a_space","a_startmenu","a_startmenucommon","a_startup","a_startupcommon","a_storecapslockmode","a_tab","a_temp","a_thisfunc","a_thishotkey","a_tickcount","a_timeidle","a_timeidlekeyboard","a_timeidlemouse","a_timeidlephysical","a_timesincepriorhotkey","a_timesincethishotkey","a_titlematchmode","a_titlematchmodespeed","a_traymenu","a_username","a_wday","a_windelay","a_windir","a_workingdir","a_yday","a_year","a_yweek","a_yyyy"],t.builtin_variable_h=["a_ahkdir","a_dlldir","a_dllpath","a_globalstruct","a_isdll","a_mainthreadid","a_memorymodule","a_modulehandle","a_scriptstruct","a_threadid","a_zipcompressionlevel"],t.builtin_ahkv1_commands=["autotrim","blockinput","click","clipwait","control","controlclick","controlfocus","controlget","controlgetfocus","controlgetpos","controlgettext","controlmove","controlsend","controlsendraw","controlsettext","coordmode","critical","detecthiddentext","detecthiddenwindows","drive","driveget","drivespacefree","envadd","envdiv","envget","envmult","envset","envsub","envupdate","exit","exitapp","fileappend","filecopy","filecopydir","filecreatedir","filecreateshortcut","filedelete","fileencoding","filegetattrib","filegetshortcut","filegetsize","filegettime","filegetversion","fileinstall","filemove","filemovedir","fileopen","fileread","filereadline","filerecycle","filerecycleempty","fileremovedir","fileselectfile","fileselectfolder","filesetattrib","filesettime","format","formattime","getkeystate","gosub","groupactivate","groupadd","groupclose","groupdeactivate","gui","guicontrol","guicontrolget","hotkey","ifequal","ifexist","ifgreater","ifgreaterorequal","ifless","iflessorequal","ifmsgbox","ifnotequal","ifnotexist","ifwinactive","ifwinexist","ifwinnotactive","ifwinnotexist","imagesearch","inidelete","iniread","iniwrite","input","inputbox","keywait","listlines","menu","mouseclick","mouseclickdrag","mousegetpos","mousemove","msgbox","onerror","onexit","outputdebug","pause","pixelgetcolor","pixelsearch","postmessage","process","progress","random","regdelete","regread","regwrite","run","runas","runwait","send","sendevent","sendinput","sendlevel","sendmessage","sendmode","sendplay","sendraw","setbatchlines","setcapslockstate","setcontroldelay","setdefaultmousespeed","setenv","setformat","setkeydelay","setmousedelay","setnumlockstate","setregview","setscrolllockstate","setstorecapslockmode","settimer","settitlematchmode","setwindelay","setworkingdir","shutdown","sleep","sort","soundbeep","soundget","soundgetwavevolume","soundplay","soundset","soundsetwavevolume","splashimage","splashtextoff","splashtexton","splitpath","statusbargettext","statusbarwait","stringcasesense","stringleft","stringlower","stringright","stringtrimleft","stringtrimright","stringupper","suspend","sysget","thread","tooltip","transform","traytip","urldownloadtofile","winactivate","winactivatebottom","winclose","winget","wingetactivestats","wingetactivetitle","wingetclass","wingetpos","wingettext","wingettitle","winhide","winkill","winmaximize","winmenuselectitem","winminimize","winminimizeall","winminimizeallundo","winmove","winrestore","winset","winsettitle","winshow","winwait","winwaitactive","winwaitclose","winwaitnotactive"]},3113:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defintionProvider=void 0;const o=n(2374),i=n(6169),r=n(3939),s=n(6630);t.defintionProvider=async function(e){var t,n,a;let c,l=e.textDocument.uri.toLowerCase(),d=r.lexers[l],u=d.buildContext(e.position),f=[];if(u){let l,p="",h=o.SymbolKind.Variable;if(u.pre.startsWith("#")&&!u.token){let i=e.position.line,a=u.linetext.indexOf("#");if(l=d.tokens[d.document.offsetAt({line:i,character:a})],l&&l.content.match(/^#include/i)){let e=l.data,c=null==e?void 0:e.data;if(c){a+=e.offset-l.offset;let d=o.Range.create(0,0,null!==(n=null===(t=r.lexers[c[1]])||void 0===t?void 0:t.document.lineCount)&&void 0!==n?n:0,0),u=a+e.content.replace(/\s+;.*$/,"").length,f=c[0]?s.URI.file((0,r.restorePath)(c[0])).toString():c[1];return[o.LocationLink.create(f,d,d,o.Range.create(i,a,i,u))]}}return}if(p=u.text.toLowerCase(),h=u.kind,!p||h===o.SymbolKind.Null)return;if(void 0!==(c=(0,i.searchNode)(d,p,u.range.end,h))||h!=o.SymbolKind.Property&&h!==o.SymbolKind.Method){if(null===c)return}else{let t={};if(c=[],(0,i.cleardetectcache)(),(0,i.detectExpType)(d,p.replace(/\.[^.]+$/,(e=>(p=e.match(/^\.[^.]+$/)?e:"",""))),e.position,t),p&&void 0===t["#any"])for(const e in t)null===(a=(0,i.searchNode)(d,e+p,u.range.end,h))||void 0===a||a.map((e=>{(null==c?void 0:c.map((e=>e.node)).includes(e.node))||null==c||c.push(e)}));if(!(null==c?void 0:c.length)&&h===o.SymbolKind.Method){c=[];let e=[d];p.replace(/\.([^.]+)$/,((...t)=>{var n;p=t[1];for(const t in d.relevance)e.push(r.lexers[t]);for(const t of e)(null===(n=t.object.method[p])||void 0===n?void 0:n.length)&&(null==c||c.push(...t.object.method[p].map((e=>({node:e,uri:t.uri})))));return""}))}}if(c){let e="";if(c.map((t=>{(e=t.node.uri||t.uri)&&f.push(o.LocationLink.create(r.lexers[e].document.uri,t.node.range,t.node.selectionRange))})),f.length)return f}}}},2793:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.typeFormatting=t.rangeFormatting=t.documentFormatting=void 0;const o=n(2374),i=n(3939);t.documentFormatting=async function(e){var t;let n=i.lexers[e.textDocument.uri.toLowerCase()],r=o.Range.create(0,0,n.document.lineCount,0),s=Object.assign({},i.extsettings.FormatOptions);return null!==(t=s.indent_string)&&void 0!==t||(s.indent_string=e.options.insertSpaces?" ".repeat(e.options.tabSize):"\t"),[{range:r,newText:n.beautify(s)}]},t.rangeFormatting=async function(e){let t=i.lexers[e.textDocument.uri.toLowerCase()],n=e.range,o=Object.assign({},i.extsettings.FormatOptions);return o.indent_string=e.options.insertSpaces?" ".repeat(e.options.tabSize):"\t",[{range:n,newText:t.beautify(o,n).trim()}]},t.typeFormatting=async function(e){var t,n,r;let s,a,c,l,d=i.lexers[e.textDocument.uri.toLowerCase()],{ch:u,position:f}=e,p=Object.assign({},i.extsettings.FormatOptions);if(p.indent_string=" ".repeat(e.options.tabSize),c=d.document.getText({start:{line:0,character:0},end:{line:0,character:1}}),("\t"===c||!e.options.insertSpaces&&/\S/.test(c))&&(p.indent_string="\t"),"\n"===u){let e,{line:o,character:i}=f,c=d.document.getText({start:{line:o-1,character:0},end:{line:o+2,character:0}}).split(/\r?\n/),u=c[0].trimRight();if(c[1].trim()||(i=c[1].length),u.endsWith("{"))(s=h({line:o-1,character:u.length}))&&(e=null!==(t=s[0].range.indent_string)&&void 0!==t?t:"",c[1].substring(0,i)!==e&&s.push({newText:e,range:{start:{line:o,character:0},end:{line:o,character:i}}}),(u=(null!==(n=c[2])&&void 0!==n?n:c[2]="").trimLeft()).startsWith("}")&&!c[2].startsWith((e=e.replace(p.indent_string,""))+"}")&&s.push({newText:e,range:{start:{line:o+1,character:0},end:{line:o+1,character:c[2].length-u.length}}}));else if(void 0!==(l=d.linepos[o-1])){let t={start:d.document.positionAt(l),end:{line:o-1,character:u.length}};s=[{range:t,newText:d.beautify(p,t).trim()}],e=null!==(r=t.indent_string)&&void 0!==r?r:"",c[1].substring(0,i)!==e&&s.push({newText:e,range:{start:{line:o,character:0},end:{line:o,character:i}}})}else if(!u&&c[0]!==(c[1]=c[1].substring(0,i))){if(!c[0]){if(a=d.find_token(d.document.offsetAt(f)),"TK_STRING"===a.type||a.type.endsWith("COMMENT"))return;let e=["TK_START_EXPR","TK_START_BLOCK",""];for(;(a=a.previous_token)&&!e.includes(a.type););if(e.pop(),e.includes(null==a?void 0:a.type))return}s=[{newText:c[0],range:{start:{line:o,character:0},end:{line:o,character:i}}}]}return s}if("}"===u)return h(f);if(c=i.chinese_punctuations[u]){let e={line:f.line,character:f.character-1};if(a=d.find_token(d.document.offsetAt(e),!0),"TK_WORD"===a.type)return a.length>1&&(c=a.content.replace(/./g,(e=>{var t;return null!==(t=i.chinese_punctuations[e])&&void 0!==t?t:e})),e.character-=a.length-1),[o.TextEdit.replace({start:e,end:f},c)]}function h(e){var t;if(a=d.tokens[d.document.offsetAt({line:e.line,character:e.character-1})],l=null==a?void 0:a.previous_pair_pos,void 0!==l){for(;void 0!==(null===(t=a=d.tokens[l])||void 0===t?void 0:t.previous_pair_pos);)l=a.previous_pair_pos;let n={start:d.document.positionAt(l),end:e};return[{range:n,newText:d.beautify(p,n).trim()}]}}}},9541:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hoverProvider=void 0;const o=n(2374),i=n(6169),r=n(3939);t.hoverProvider=async function(e,t){var n,s;if(t.isCancellationRequested)return;let a,c=e.textDocument.uri.toLowerCase(),l=r.lexers[c],d=null==l?void 0:l.buildContext(e.position),u=[];if(d){let t,c=d.text.toLowerCase(),f=o.SymbolKind.Variable;if(!c||d.kind===o.SymbolKind.Null)return d.token&&(a=r.hoverCache[1])&&(a=a[d.token.content.toLowerCase()])?a[0]:void 0;if(void 0!==(t=(0,i.searchNode)(l,c,d.range.end,f=d.kind))||!c.includes(".")||f!=o.SymbolKind.Property&&f!==o.SymbolKind.Method){if(null===t)return}else{let o={};if(t=[],(0,i.cleardetectcache)(),(0,i.detectExpType)(l,c.replace(/\.[^.]+$/,(e=>(c=e.match(/^\.[^.]+$/)?e:"",""))),e.position,o),c&&void 0===o["#any"])for(const e in o)null===(n=(0,i.searchNode)(l,e+c,d.range.end,f))||void 0===n||n.map((e=>{(null==t?void 0:t.map((e=>e.node)).includes(e.node))||null==t||t.push(e)}));(null==t?void 0:t.length)||(t=void 0)}if(!t)if(f===o.SymbolKind.Method||f===o.SymbolKind.Property);else if(r.ahkvars[c])t=[{node:r.ahkvars[c],uri:""}];else if((a=r.hoverCache[f===o.SymbolKind.Function?0:1])&&(a=a[c]))return a[0];if(t){if(t.length>1)t.map((e=>{e.node.full&&u.push({kind:"ahk2",value:e.node.full})}));else{let{node:e,scope:n}=t[0];if(e.kind===o.SymbolKind.Function||e.kind===o.SymbolKind.Method||e.kind===o.SymbolKind.Property)e.full&&u.push({kind:"ahk2",value:e.full});else if(e.kind===o.SymbolKind.Class)u.push({kind:"ahk2",value:"class "+(e.full||e.name)});else if(n&&e.kind===o.SymbolKind.TypeParameter){let e=n.parent;(null==e?void 0:e.kind)===o.SymbolKind.Property&&(null===(s=e.parent)||void 0===s?void 0:s.kind)===o.SymbolKind.Class&&(n=e),(0,i.formatMarkdowndetail)(n)}else e.full&&u.push({kind:"ahk2",value:e.full});if(e.detail){let t=(0,i.formatMarkdowndetail)(e);if(e.kind===o.SymbolKind.Variable){let o=/^/;t.startsWith("\n*@var* ")?(t=t.replace(" — ","\n___\n"),o=/^\n\*@var\*\s/):t=t.startsWith("\n*@type* ")?t.replace(" — ","\n___\n").replace(/^\n\*@type\*\s*/,`\`${e.name}\`: `):`\`${e.name}\`\n___\n${t}`,t=t.replace(o,n?e.static?"*@static* ":"*@local* ":"*@global* ")}u.push({kind:"markdown",value:(u.length?"___\n":"")+t})}}if(u.length)return{contents:{kind:"markdown",value:u.map((e=>"ahk2"===e.kind?"```ahk2\n"+e.value+"\n```":e.value)).join("\n\n")}}}}}},7994:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadlocalize=t.action=t.setting=t.diagnostic=t.codeaction=t.completionitem=void 0;const o=n(1017),i=n(3939);let r={};function s(e,t){return(...n)=>n.length?function(e,...t){return e.replace(/\{(\d+)\}/g,((...e)=>{let n=parseInt(e[1]);return n<t.length?t[n]:" "}))}(a(e,t),...n):a(e,t)}function a(e,t){return r[e]||t}var c,l,d,u;(u=t.completionitem||(t.completionitem={})).author=s("completionitem.author","Add file infos about author, description, date, version."),u.comment=s("completionitem.generatecomment","Generate comment template of current function/method."),u.include=s("completionitem.include","Auto import from '{0}'"),u.prototype=s("completionitem.prototype","Retrieve or set the object on which all instances of the class are based."),u.thishotkey=s("completionitem.thishotkey","The hidden parameter to the hotkey function."),u.value=s("completionitem.value","Within the dynamic property 'set', 'Value' contains the value being assigned."),u._new=s("completionitem.new","export construct a new instance of the class."),u._this=s("completionitem.this","In the class, access other instance variables and methods of the class through 'this'."),u._super=s("completionitem.super","In the inherited class, 'super' can replace 'this' to access the superclass version of the method or property that is overridden in the derived class."),(t.codeaction||(t.codeaction={})).include=s("codeaction.include","Import '{0}'"),(d=t.diagnostic||(t.diagnostic={})).acceptparams=s("diagnostic.acceptparams","'{0}' accepts {1} parameter(s)"),d.assignerr=s("diagnostic.assignerr","This {0} '{1}' cannot be used as an output variable"),d.classinfuncerr=s("diagnostic.classinfuncerr","Functions cannot contain classes"),d.classuseerr=s("diagnostic.classuseerr","This class cannot be used as an output variable"),d.conflictserr=s("diagnostic.conflictserr","This {0} '{2}' declaration conflicts with an existing {1}"),d.declarationerr=s("diagnostic.declarationerr","Unexpected declaration"),d.defaultvalmissing=s("diagnostic.defaultvalmissing","Parameter default required. Specifically: '{0}'"),d.deprecated=s("diagnostic.deprecated","Using '{0}' instead of '{1}'"),d.didyoumean=s("diagnostic.didyoumean","Did you mean to use '{0}'?"),d.dupdeclaration=s("diagnostic.dupdeclaration","Duplicate declaration"),d.duplabel=s("diagnostic.duplabel","Duplicate label"),d.filenotexist=s("diagnostic.filenotexist","'{0}' not exist"),d.funccallerr=s("diagnostic.funccallerr","Function calls require a space or '(',  use comma only between parameters"),d.funccallerr2=s("diagnostic.funccallerr2","In the expression, the function call requires parentheses"),d.globalconflicts=s("diagnostic.globalconflicts","This global declaration conflicts with an existing {0}"),d.hotdeferr=s("diagnostic.hotdeferr","Hotkeys/hotstrings cannot be defined in functions/classes"),d.hotmissbrace=s("diagnostic.hotmissbrace","Hotkey or hotstring is missing its opening brace"),d.invaliddefinition=s("diagnostic.invaliddefinition","Invalid {0} definition"),d.invalidhotdef=s("diagnostic.invalidhotdef","Invalid hotkey definition"),d.invalidparam=s("diagnostic.invalidparam","Invalid parameter definition"),d.invalidprop=s("diagnostic.invalidprop","Invalid dynamic property"),d.invalidpropname=s("diagnostic.invalidpropname","Invalid property name in object literal"),d.invalidsymbolname=s("diagnostic.invalidsymbolname","Invalid symbol naming '{0}'"),d.maybehavenotmember=s("diagnostic.maybehavenotmember","Class '{0}' maybe have not member '{1}'"),d.maybev1=s("diagnostic.maybev1","This might be a v1 script, and the lexer stops parsing."),d.missing=s("diagnostic.missing","Missing '{0}'"),d.missingparam=s("diagnostic.missingparam","Missing a required parameter"),d.missingretval=s("diagnostic.missingretval","The function missing a return value"),d.missingspace=s("diagnostic.missingspace","Missing space or operator before this"),d.objectliteralerr=s("diagnostic.objectliteralerr","Error in object literal"),d.pathinvalid=s("diagnostic.pathinvalid","Invalid file path"),d.paramcounterr=s("diagnostic.paramcounterr","Expected {0} parameters, but got {1}"),d.propdeclaraerr=s("diagnostic.propdeclaraerr","Not a valid method, class or property definition"),d.propemptyparams=s("diagnostic.propemptyparams","Empty [] not permitted"),d.propnotinit=s("diagnostic.propnotinit","Property declaration is not initialized"),d.requirev1=s("diagnostic.requirev1","This script requires AutoHotkey v1, and the lexer stops parsing."),d.reservedworderr=s("diagnostic.reservedworderr","The following reserved word '{0}' must not be used as a variable name"),d.skipline=s("diagnostic.skipline","The line is skipped and not resolved"),d.tryswitchtov1=s("diagnostic.tryswitchtov1","Try switching to AutoHotkey v1."),d.typemaybenot=s("diagnostic.typemaybenot","Type maybe not '{0}'"),d.resourcenotfound=s("diagnostic.resourcenotfound","No resource found or could not be resolved"),d.unexpected=s("diagnostic.unexpected","Unexpected '{0}'"),d.unknown=s("diagnostic.unknown","Unknown {0}"),d.invalidencoding=s("diagnostic.invalidencoding","'{0}' invalid file encoding"),d.unknownoperatoruse=s("diagnostic.unknownoperatoruse","Unknown operator use"),d.unknowntoken=s("diagnostic.unknowntoken","Unknown token '{0}'"),d.unsupportinclude=s("diagnostic.unsupportinclude","#Include in functions and classes cannot correctly deduce scope and code completion"),d.unterminated=s("diagnostic.unterminated","Unterminated string text"),(l=t.setting||(t.setting={})).ahkpatherr=s("setting.ahkpatherr","The AutoHotkey interpreter does not exist, re-specify in'Settings-AutoHotkey2.InterpreterPath'"),l.getenverr=s("setting.getenverr","Failed to get environment variables"),l.uialimit=s("setting.uialimit","The UIA executable does not allow redirection to stdin/stdout due to security restrictions, so some features that depend on this will not work"),l.versionerr=s("setting.versionerr","The current AutoHotkey.exe is not the v2 version, and cannot get the correct syntax analysis, completion and other functions"),(c=t.action||(t.action={})).switchtov1=s("action.switchtov1","Switch to ahk v1"),c.skipline=s("action.skipline","Skip the line"),c.stopparsing=s("action.stopparsing","Stop parsing"),t.loadlocalize=function(){if(i.inBrowser){let e=(0,i.getwebfile)(i.dirname+"/package.nls.<>.json");e&&(r=JSON.parse(e.text))}else{let e=(0,i.getlocalefile)((0,o.resolve)(__dirname,"../../package.nls.<>.json"),"utf8");r=e?JSON.parse(e):{}}}},6658:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findAllVar=t.findAllFromDoc=t.getAllReferences=t.referenceProvider=void 0;const o=n(2374),i=n(6169),r=n(3939);function s(e,t){var n,s;let c=t.text.toLowerCase(),l={};if(!t.text)return;let d=(0,i.searchNode)(e,c,t.range.end,t.kind);if(!d||d.length>1)return;let{node:u,uri:f}=d[0];if(!f||u===r.ahkvars[c]||c.match(/^(this|super)$/)&&u.kind===o.SymbolKind.Class&&!u.name.match(/^(this|super)$/i))return;let p=u===e.declaration[c]?void 0:e.searchScopedNode(u.selectionRange.start);switch(u.kind){case o.SymbolKind.Field:if(p){let e=p.labels;e&&e[c]&&(l[r.lexers[f].document.uri]=e[c].map((e=>e.selectionRange)))}else{let t=e.labels;t[c]&&(l[e.document.uri]=t[c].map((e=>e.selectionRange)));for(const n in e.relevance)t=r.lexers[n].labels,t[c]&&(l[r.lexers[n].document.uri]=t[c].map((e=>e.selectionRange)))}break;case o.SymbolKind.Function:case o.SymbolKind.Variable:case o.SymbolKind.TypeParameter:case o.SymbolKind.Class:if(u.kind!==o.SymbolKind.Class||!u.full.includes(".")){p&&(p.kind!==o.SymbolKind.Class&&p.kind!==o.SymbolKind.Function&&p.kind!==o.SymbolKind.Method&&p.kind!==o.SymbolKind.Event||p.global&&p.global[c]&&(p=void 0));let t=a(e=r.lexers[f],c,o.SymbolKind.Variable,p);if(t.length&&(l[e.document.uri]=t),!p)for(const t in e.relevance){let e=a(r.lexers[t],c,o.SymbolKind.Variable,void 0);e.length&&(l[r.lexers[t].document.uri]=e)}break}default:if(u.kind===o.SymbolKind.Class||u.static){let t=c.split("."),i=a(e,t[0],o.SymbolKind.Variable),d={};t.splice(0,1),i.length&&(d[e.document.uri]=i);for(const t in e.relevance){let e=a(r.lexers[t],c,o.SymbolKind.Variable,void 0);e.length&&(d[r.lexers[t].document.uri]=e)}for(const e in d){let n=d[e],o=r.lexers[e.toLowerCase()],i=[];for(let e of n){let n,r=0,s=o.document.offsetAt(e.end);for(;r<t.length&&(n=o.get_token(s,!0),"TK_DOT"===n.type&&"TK_WORD"===(n=o.find_token(n.offset+n.length)).type&&n.content.toLowerCase()===t[r]);)s=n.offset+n.length,r++;r===t.length&&n&&i.push({start:o.document.positionAt(n.offset),end:o.document.positionAt(n.offset+n.length)})}i.length&&(l[o.document.uri]=i)}let p=null!==(n=l[s=r.lexers[f].document.uri])&&void 0!==n?n:l[s]=[];u.selectionRange,u.full&&p.unshift(u.selectionRange);break}return}return Object.keys(l).length?l:void 0}function a(e,t,n,i){var r,s,a,l,d,u,f,p,h;let m=[];if(n===o.SymbolKind.Method||n===o.SymbolKind.Property);else{let n=null!=i?i:e,g=!i,y=g,v=!(null===(a=null===(s=null===(r=n)||void 0===r?void 0:r.local)||void 0===s?void 0:s[t])||void 0===a?void 0:a.static);if(v&&i&&null===(null===(u=null===(d=null===(l=n)||void 0===l?void 0:l.declaration)||void 0===d?void 0:d[t])||void 0===u?void 0:u.static)&&(v=!1),n.kind===o.SymbolKind.Property&&(null===(f=n.parent)||void 0===f?void 0:f.kind)===o.SymbolKind.Class)null===(p=n.children)||void 0===p||p.map((e=>{var n;e.kind===o.SymbolKind.Function&&(null===(n=e.children)||void 0===n||n.map((e=>{e.name.toLowerCase()===t&&m.push(e.selectionRange),e.children&&c(e,t,g,m,g,v)})))}));else{if(!y){let e=n.local,o=n.declaration;e&&e[t]||o&&o[t]||(y=void 0)}null===(h=n.children)||void 0===h||h.map((e=>{e.name.toLowerCase()===t&&m.push(e.selectionRange),e.children&&c(e,t,g,m,g||e.kind===o.SymbolKind.Function?y:void 0,v)}))}}return m}function c(e,t,n=!1,r,s,a){var l,d,u,f,p,h,m,g,y;let v,b=e.kind===o.SymbolKind.Function&&e.static,_=b||e.closure;if(!b||!a||n){if(e.assume===i.FuncScope.GLOBAL||(null===(l=e.global)||void 0===l?void 0:l[t])){if(!n)return;s=!0}else if(_&&e.local&&e.local[t]||!_&&(null===(d=e.declaration)||void 0===d?void 0:d[t])){if(!n)return;s=!1}else!b||!n||s||(v=null===(u=e.declaration)||void 0===u?void 0:u[t])&&(v.kind!==o.SymbolKind.Variable||v.def)?s&&(null===(f=e.declaration)||void 0===f?void 0:f[t])&&(s=!1):s=!0;a&&(a=!(null===(m=null===(h=null===(p=e)||void 0===p?void 0:p.local)||void 0===h?void 0:h[t])||void 0===m?void 0:m.static)),s===n?null===(g=e.children)||void 0===g||g.map((e=>{e.name.toLowerCase()===t&&e.kind!==o.SymbolKind.Property&&e.kind!==o.SymbolKind.Method&&e.kind!==o.SymbolKind.Class&&r.push(e.selectionRange),e.children&&c(e,t,n,r,e.kind===o.SymbolKind.Function?s:n||void 0,a)})):null===(y=e.children)||void 0===y||y.map((e=>{e.children&&c(e,t,n,r,!n&&void 0,a)}))}}t.referenceProvider=async function(e){let t=[],n=r.lexers[e.textDocument.uri.toLowerCase()],o=s(n,n.buildContext(e.position));for(const e in o)t.push(...o[e].map((t=>({uri:e,range:t}))));return t},t.getAllReferences=s,t.findAllFromDoc=a,t.findAllVar=c},5932:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renameProvider=t.prepareRename=void 0;const o=n(6658),i=n(3939);let r;t.prepareRename=async function(e){let t=i.lexers[e.textDocument.uri.toLowerCase()],n=t.buildContext(e.position);if(r=(0,o.getAllReferences)(t,n))return{range:n.range,placeholder:n.text.split(".").pop()||""}},t.renameProvider=async function(e){let t={changes:{}},n=e.newName;for(const e in r)t.changes[e]=r[e].map((e=>({range:e,newText:n})));return t}},9770:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.runscript=void 0;const o=n(2081),i=n(3939),r=n(7147);t.runscript=function(e,t){var n;let s=i.ahkpath_cur||i.extsettings.InterpreterPath;if((0,r.existsSync)(s)){const i=(0,o.spawnSync)(`"${s}" /CP65001 /ErrorStdOut=utf-8 *`,[],{cwd:s.replace(/[\\/].+?$/,""),shell:!0,input:e});if(i)return t&&t((null!==(n=i.stdout)&&void 0!==n?n:"").toString()),!0}return!1}},6001:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.semanticTokensOnRange=t.semanticTokensOnDelta=t.semanticTokensOnFull=void 0;const o=n(2374),i=n(6169),r=n(3939),s=n(5116);let a,c=new Map;function l(e,t){var n,l,d,u;let f,p;if(p=e.semantic){let u=null!==(n=e.pos)&&void 0!==n?n:e.pos=t.document.positionAt(e.offset),f=p.type;if(f===i.SemanticTokenTypes.string)if(e.ignore){let n=u.line+1,o=e.data;for(let e=0;e<o.length;e++)t.STB.push(n++,0,o[e],f,0)}else t.STB.push(u.line,u.character,e.length,f,0);else(a&&(f===i.SemanticTokenTypes.method||f===i.SemanticTokenTypes.property)&&"TK_DOT"===(null===(l=e.previous_token)||void 0===l?void 0:l.type)||(a=void 0,f===i.SemanticTokenTypes.class))&&(f=function(e,t,n){var l,d,u;let f=t.semantic;switch(f.type){case i.SemanticTokenTypes.class:return a=s.globalsymbolcache[e],(null==a?void 0:a.kind)!==o.SymbolKind.Class&&(a=void 0),i.SemanticTokenTypes.class;case i.SemanticTokenTypes.method:case i.SemanticTokenTypes.property:if(a){let h,m=a.staticdeclaration[e],g=null==m?void 0:m.kind;if(!m||!1===m.def){let t=(h=null!==(l=c.get(a))&&void 0!==l?l:(c.set(a,h=(0,i.getClassMembers)(n,a,!0)),h))[e];t?(m=t,g=t.kind):f.type===i.SemanticTokenTypes.method?h.__call&&(g=o.SymbolKind.Null):h.__get&&(g=o.SymbolKind.Null)}switch(g){case o.SymbolKind.Method:if(f.modifier=(f.modifier||0)|1<<i.SemanticTokenModifiers.readonly|1<<i.SemanticTokenModifiers.static,t.callinfo&&((0,s.checkParams)(n,m,t.callinfo),a&&(null===(d=m.full)||void 0===d?void 0:d.startsWith("(Object) DefineProp(")))){let e=n.tokens[t.next_token_offset];"("===(null==e?void 0:e.content)&&(e=n.tokens[e.next_token_offset]),e&&("TK_STRING"===e.type?p(a,e.content.slice(1,-1),e.offset+1):p(a,""))}return a=void 0,f.type=i.SemanticTokenTypes.method;case o.SymbolKind.Class:return f.modifier=(f.modifier||0)|1<<i.SemanticTokenModifiers.readonly,a=a.staticdeclaration[e],t.callinfo&&(0,s.checkParams)(n,a,t.callinfo),f.type=i.SemanticTokenTypes.class;case o.SymbolKind.Property:let l=m.children;return 1===(null==l?void 0:l.length)&&"get"===l[0].name&&(f.modifier=(f.modifier||0)|1<<i.SemanticTokenModifiers.readonly|1<<i.SemanticTokenModifiers.static),a=void 0,f.type=i.SemanticTokenTypes.property;case void 0:if(!1!==a.checkmember&&r.extsettings.Diagnostics.ClassStaticMemberCheck){let e=n.tokens[t.next_token_offset];":="===(null==e?void 0:e.content)?p(a,t.content,t.offset):!1!==(null===(u=c.get(a))||void 0===u?void 0:u["#checkmember"])&&n.addDiagnostic(r.diagnostic.maybehavenotmember(a.name,t.content),t.offset,t.length,2)}}}default:return a=void 0,f.type}function p(e,t,i){var s,a,l,d;let u=r.lexers[e.uri];if(u&&i){let r=o.Range.create(u.document.positionAt(i),u.document.positionAt(i+t.length)),f=o.DocumentSymbol.create(t,void 0,o.SymbolKind.Property,r,r);if(f.static=f.def=!0,t=t.toLowerCase(),u===n&&u.d<2)null!==(s=(d=e.staticdeclaration)[t])&&void 0!==s||(d[t]=(null===(a=e.children)||void 0===a||a.push(f),f));else{let n=c.get(e);n&&(null!==(l=n[t])&&void 0!==l||(n[t]=f))}}else if(u&&u.d<2)e.checkmember=!1;else{let t=c.get(e);t&&(t["#checkmember"]=!1)}}}(e.content.toLowerCase(),e,t)),t.STB.push(u.line,u.character,e.length,f,null!==(d=p.modifier)&&void 0!==d?d:0)}else if(a&&"TK_DOT"!==e.type&&!e.type.endsWith("COMMENT"))a=void 0;else if("TK_WORD"===e.type&&["this","super"].includes(f=e.content.toLowerCase())&&"TK_DOT"!==(null===(u=e.previous_token)||void 0===u?void 0:u.type)){let n=t.searchNode(f,t.document.positionAt(e.offset),o.SymbolKind.Variable);n&&!1===n.ref&&(a=n.node)}}t.semanticTokensOnFull=async function(e){let t=r.lexers[e.textDocument.uri.toLowerCase()];return t.STB.previousResult(""),a=void 0,c.clear(),await(0,s.symbolProvider)({textDocument:e.textDocument}),Object.values(t.tokens).forEach((e=>l(e,t))),c.clear(),t.STB.build()},t.semanticTokensOnDelta=async function(e){let t=r.lexers[e.textDocument.uri.toLowerCase()];return t.STB.previousResult(""),a=void 0,c.clear(),await(0,s.symbolProvider)({textDocument:e.textDocument}),Object.values(t.tokens).forEach((e=>l(e,t))),c.clear(),t.STB.buildEdits()},t.semanticTokensOnRange=async function(e){let t=r.lexers[e.textDocument.uri.toLowerCase()],n=t.document.offsetAt(e.range.start),o=t.document.offsetAt(e.range.end);t.STB.previousResult(""),a=void 0,c.clear(),await(0,s.symbolProvider)({textDocument:e.textDocument});for(let e of Object.values(t.tokens))if(!(e.offset<n)){if(e.offset>o)break;l(e,t)}return c.clear(),t.STB.build()}},5373:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.signatureProvider=void 0;const o=n(2374),i=n(6169),r=n(3939),s=n(6288);t.signatureProvider=async function(e,t){var n,a,c,l,d;if(t.isCancellationRequested)return;let u,f,p,h,m,g=e.textDocument.uri.toLowerCase(),y=r.lexers[g],v=o.SymbolKind.Function,b={activeSignature:0,signatures:[],activeParameter:0};if(!(f=(0,i.getFuncCallInfo)(y,e.position))||f.index<0)return;p=f.name,h=f.pos,m=f.index,h.character>0&&"."===y.document.getText(o.Range.create({line:h.line,character:h.character-1},h))&&(v=o.SymbolKind.Method);let _,k={};if((0,i.cleardetectcache)(),v===o.SymbolKind.Method||f.full){let e=f.full;if(e||(e=y.buildContext(h).text.toLowerCase()),(0,i.detectExpType)(y,e,h,k),v===o.SymbolKind.Method&&("call"===f.name&&k["func.call"]||"bind"===f.name&&k["func.bind"])){let t={};if((0,i.detectExpType)(y,e.replace(new RegExp(`.${f.name}$`,"i"),""),h,t),Object.keys(t).length)if("bind"===f.name){let e=k["func.bind"].node=Object.assign({},k["func.bind"].node),i=Object.values(t).pop().node;e.params=i.params,e.detail=e.detail&&i.detail?e.detail+"\n___\n"+i.detail:(null!==(n=e.detail)&&void 0!==n?n:"")+(null!==(a=i.detail)&&void 0!==a?a:"");let r=i.full.lastIndexOf(")"),s=i.full.indexOf("(",1);e.full=e.full.replace(/Bind\([^)]*\)/i,`Bind(${i.full.slice(s+1,r)})`),i.kind===o.SymbolKind.Method&&(v=o.SymbolKind.Function)}else k=t}}else(0,i.detectExpType)(y,p,h,k);if(u=Object.values(k).filter((e=>null==e?void 0:e.node)),_=null!=u?u:[],u=[],_.map((e=>{var t;let n=e.node,s=n.kind;if(s===o.SymbolKind.Class){let o=(0,i.getClassMembers)(r.lexers[n.uri||e.uri]||y,n,!e.ref),s=e.ref?o.call:null!==(t=o.__new)&&void 0!==t?t:o.call;o.call&&!1!==o.call.def&&(s=o.call),s&&u.push({node:s,uri:""})}else s!==o.SymbolKind.Function&&s!==o.SymbolKind.Method||u.push(e)})),!u.length){if(v!==o.SymbolKind.Method)return;for(const e in r.ahkvars)null===(c=r.ahkvars[e].children)||void 0===c||c.map((e=>{e.kind!==o.SymbolKind.Method||e.name.toLowerCase()!==p||u.map((e=>e.node)).includes(e)||u.push({node:e,uri:""})}));null===(l=y.object.method[p])||void 0===l||l.map((e=>u.push({node:e,uri:""})));for(const e in y.relevance)null===(d=r.lexers[e].object.method[p])||void 0===d||d.map((e=>u.push({node:e,uri:""})));if(!u.length)return}return u.map((e=>{var t,n;const r=e.node,a=[];let c,l;if((c=r.params)&&b.signatures.push({label:r.full,parameters:c.map((e=>({label:e.name.trim().replace(/(['\w]*\|['\w]*)(\|['\w]*)+/,"$1|...")}))),documentation:r.detail?{kind:"markdown",value:(0,i.formatMarkdowndetail)(r,l=null!==(n=null===(t=c[m])||void 0===t?void 0:t.name)&&void 0!==n?n:"",a)}:void 0}),a.length){let e=new i.Lexer(s.TextDocument.create("","ahk2",-10,a.join("\n")),void 0,-1),{label:t,documentation:n}=b.signatures[0],o=r;t=t.replace(new RegExp(`(?<=\\b${r.name})\\(.+$`),""),e.parseScript(),e.children.map((e=>{var r,s,a;(c=e.params)&&b.signatures.push({label:t+e.full.replace(/^[^(]+/,""),parameters:c.map((e=>({label:e.name.trim().replace(/(['\w]*\|['\w]*)(\|['\w]*)+/,"$1|...")}))),documentation:l===(null===(r=c[m])||void 0===r?void 0:r.name)?n:{kind:"markdown",value:(0,i.formatMarkdowndetail)(o,null!==(a=null===(s=c[m])||void 0===s?void 0:s.name)&&void 0!==a?a:"",[])}})}))}v===o.SymbolKind.Function&&r.kind===o.SymbolKind.Method&&b.signatures.map((e=>e.parameters&&(e.parameters.unshift({label:"@this"}),e.label=e.label.replace(/(?<=(\w|[^\x00-\x7f])+)\(/,"(@this"+(e.parameters.length>1?", ":"")))))})),b.activeParameter=m,b}},5116:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.workspaceSymbolProvider=t.checkParams=t.symbolProvider=t.globalsymbolcache=void 0;const o=n(2374),i=n(6169),r=n(7994),s=n(3939),a=n(6630),c=n(6288);async function l(e){var n;let a=e.textDocument.uri.toLowerCase(),c=s.lexers[a];if(!c||!c.reflat&&s.symbolcache[a])return s.symbolcache[a];let l={},u=c.declaration;for(const e in s.ahkvars)l[e]=s.ahkvars[e];let f=c.relevance;for(const e in f){const t=null===(n=s.lexers[e])||void 0===n?void 0:n.declaration;for(let n in t){let i=l[n];i&&!1!==i.def&&t[n].kind===o.SymbolKind.Variable||(l[n]=t[n],t[n].uri=e)}}for(const e in u)(!l[e]||l[e].kind===o.SymbolKind.Variable||l[e]===s.ahkvars[e]&&u[e].kind!==o.SymbolKind.Variable&&!1===l[e].def)&&(l[e]=u[e],u[e].uri=a);c.reflat=!1,t.globalsymbolcache=l;let p=c.document.uri;return s.symbolcache[a]=function e(t,n={},r=!1){var a,u;const f=[],p=[];let m;return n.isset=s.ahkvars.isset,null===(a=t.children)||void 0===a||a.map((e=>{var t;if(e.children&&p.push(e),e.name)if(e.kind===o.SymbolKind.Function||e.kind===o.SymbolKind.Variable||e.kind===o.SymbolKind.Class){let i=e.name.toLowerCase();n[i]?e.kind===o.SymbolKind.Variable?e!==n[i]&&(n[i].kind!==o.SymbolKind.TypeParameter||n[i].selectionRange.start.character!==n[i].selectionRange.end.character?h(e,n[i]===s.ahkvars[i],n[i].kind):(m=c.tokens[c.document.offsetAt(e.selectionRange.start)])&&m.semantic&&delete m.semantic):e!==n[i]?(f.push(e),n[i]=e,h(e,e===s.ahkvars[i])):e===l[i]&&(f.push(e),h(e,e===s.ahkvars[i])):e.kind===o.SymbolKind.Variable&&!e.def&&l[i]?(n[i]=l[i],e===l[i]&&f.push(e),h(e,l[i]===s.ahkvars[i],l[i].kind)):(n[i]=e,f.push(e),e.kind===o.SymbolKind.Class&&e.parent||h(e,s.ahkvars[i]&&l[i]===s.ahkvars[i],(null===(t=l[i])||void 0===t?void 0:t.kind)||e.kind))}else e.kind!==o.SymbolKind.TypeParameter&&(f.push(e),e.kind!==o.SymbolKind.Method&&e.kind!==o.SymbolKind.Property||!e.name.match(/^__(new|init|enum|get|call|set|delete)$/i)||(m=c.tokens[c.document.offsetAt(e.selectionRange.start)])&&m.semantic&&delete m.semantic)})),null===(u=t.funccall)||void 0===u||u.map((e=>{e.kind===o.SymbolKind.Function&&d(c,n[e.name.toLowerCase()],e)})),p.map((t=>{var s,a,c;if(t.children){let d={},u=!1;if(t.kind===o.SymbolKind.Function||t.kind===o.SymbolKind.Method||t.kind===o.SymbolKind.Event){let e=t,p={},m="",g=t.kind===o.SymbolKind.Function&&t.static;for(const t in e.global)d[t]=e.global[t];null===(s=t.params)||void 0===s||s.map((e=>{d[m=e.name.toLowerCase()]=e,p[m]=!0,h(e,!1,o.SymbolKind.TypeParameter)}));for(const t in e.local)if(t&&!p[t]){let n=e.local[t];f.push(n),h(n),d[t]=n}if(e.assume===i.FuncScope.GLOBAL||r)u=!0;else{u=!1;let i=t.parent,r=e.declaration;if(i){if(i.kind===o.SymbolKind.Property&&(null===(a=i.children)||void 0===a?void 0:a.length)&&(null===(c=i.parent)||void 0===c?void 0:c.kind)===o.SymbolKind.Class&&(i=i.parent),i.kind===o.SymbolKind.Class){let e=o.Range.create(0,0,0,0);d.this=o.DocumentSymbol.create("this",void 0,o.SymbolKind.TypeParameter,e,e),i.extends&&(d.super=o.DocumentSymbol.create("super",void 0,o.SymbolKind.TypeParameter,e,e))}if(i.kind===o.SymbolKind.Function||i.kind===o.SymbolKind.Method||i.kind===o.SymbolKind.Event)if(g)for(const e in n)d[e]||!n[e].static&&n[e]!==l[e]||(d[e]=n[e]);else for(const e in n)d[e]||(d[e]=n[e])}for(const e in r)e&&(d[e]?r[e]!==d[e]?r[e].kind!==o.SymbolKind.Variable||d[e]===l[e]&&r[e].def?(d[e]=r[e],f.push(r[e]),h(r[e])):h(r[e],!1,d[e].kind):p[e]||h(r[e]):(d[e]=r[e],f.push(d[e]),h(r[e])))}}else if(t.kind===o.SymbolKind.Class){let e=o.Range.create(0,0,0,0);d.this=o.DocumentSymbol.create("this",void 0,o.SymbolKind.TypeParameter,e,e),t.extends&&(d.super=o.DocumentSymbol.create("super",void 0,o.SymbolKind.TypeParameter,e,e))}f.push(...e(t,d,u))}})),f}(c).map((e=>o.SymbolInformation.create(e.name,e.kind,e.children?e.range:e.selectionRange,p,e.kind===o.SymbolKind.Class&&e.extends?e.extends:void 0))),c.actived&&(function(e){var t;if(e.d)return;let n,a={...s.ahkvars},c={};Object.keys(e.labels).map((e=>c[e]=!0));for(const t in e.relevance)if(n=s.lexers[t]){n.diagnostics.splice(n.diags),(0,i.checksamenameerr)(a,Object.values(n.declaration).filter((e=>e.kind!==o.SymbolKind.Variable)),n.diagnostics);for(const e in n.labels)n.labels[e][0].def&&(c[e]?n.diagnostics.push({message:r.diagnostic.duplabel(),range:n.labels[e][0].selectionRange,severity:1}):c[e]=!0)}let l=Object.values(e.declaration);(0,i.checksamenameerr)(a,l,e.diagnostics);for(const t in e.relevance)(n=s.lexers[t])&&(0,i.checksamenameerr)(a,Object.values(n.declaration).filter((e=>e.kind===o.SymbolKind.Variable)),n.diagnostics);l.map((t=>{var n;if(t.kind===o.SymbolKind.Class){let o=null===(n=t.extends)||void 0===n?void 0:n.toLowerCase();o===t.name.toLowerCase()?u(e,t,!1):o&&!d(o)&&u(e,t)}}));for(const i in e.relevance)if(n=s.lexers[i])for(const e of Object.values(n.declaration))if(e.kind===o.SymbolKind.Class){let o=null===(t=e.extends)||void 0===t?void 0:t.toLowerCase();o===e.name.toLowerCase()?u(n,e,!1):o&&!d(o)&&u(n,e)}function d(e){let t,n=e.toLowerCase().split(".");for(let e of n)if(t=t?t.staticdeclaration[e]:a[e],!t||t.kind!==o.SymbolKind.Class||!1===t.def)return!1;return!0}function u(e,t,n=!0){let i,s=e.document.offsetAt(t.selectionRange.start),a=e.tokens;if(!(i=a[a[s].next_token_offset])||!(i=a[i.next_token_offset]))return;s=i.offset;let c={start:e.document.positionAt(s),end:e.document.positionAt(s+t.extends.length)};e.diagnostics.push({message:n?r.diagnostic.unknown("class '"+t.extends)+"'":r.diagnostic.unexpected(t.extends),range:c,severity:o.DiagnosticSeverity.Warning})}}(c),setTimeout(s.sendDiagnostics,200)),s.symbolcache[a];function h(e,t=!1,n){let s,a,l,d;switch(n||e.kind){case o.SymbolKind.TypeParameter:if(0===e.range.start.line&&0===e.range.start.character)return;l=i.SemanticTokenTypes.parameter;break;case o.SymbolKind.Variable:l=i.SemanticTokenTypes.variable;break;case o.SymbolKind.Class:l=i.SemanticTokenTypes.class;break;case o.SymbolKind.Function:l=i.SemanticTokenTypes.function}if(void 0!==l&&(s=c.tokens[d=c.document.offsetAt(e.selectionRange.start)])){if(void 0===(a=s.semantic)){if(s.semantic=a={type:l},e.kind!==o.SymbolKind.Variable||!e.def||n!==o.SymbolKind.Class&&n!==o.SymbolKind.Function||(c.addDiagnostic((0,i.samenameerr)(e,{kind:n}),d,e.name.length),delete e.def),!s.callinfo&&l===i.SemanticTokenTypes.function){let e=c.tokens[s.next_token_offset];e&&e.topofline<1&&!":?.+-*/=%<>,)]}".includes(e.content.charAt(0))&&c.addDiagnostic(r.diagnostic.funccallerr2(),s.offset,s.length,2)}}else void 0!==n&&(a.type=l);l<3&&(a.modifier=(a.modifier||0)|1<<i.SemanticTokenModifiers.readonly|(t?1<<i.SemanticTokenModifiers.defaultLibrary:0))}}}function d(e,t,n){var a,c,l,d;let u=n.paraminfo;if(s.extsettings.Diagnostics.ParamsCheck&&u){if(t&&t.kind===o.SymbolKind.Class){let n=t;if(!(t=null!==(a=n.staticdeclaration.call)&&void 0!==a?a:n.declaration.__new)&&n.extends){let o=(0,i.getClassMembers)(e,n,!0);t=o.call&&!1!==o.call.def?o.call:null!==(c=o.__new)&&void 0!==c?c:o.call}}if(t&&(t.kind===o.SymbolKind.Function||t.kind===o.SymbolKind.Method)){let o=t.params.length,i=!1,a=u.count,c={};if(i=t.full.includes("*")){for(o>0&&t.params[o-1].arr&&o--;o>0&&void 0!==t.params[o-1].defaultVal;)--o;for(let e=0;e<o;++e)!1===t.params[e].defaultVal&&--o;a<o&&!u.unknown&&e.diagnostics.push({message:r.diagnostic.paramcounterr(o+"+",a),range:n.range,severity:1}),u.miss.map((i=>{var s;c[i]=!0,i<o&&void 0===t.params[i].defaultVal&&e.addDiagnostic(r.diagnostic.missingparam(),null!==(s=u.comma[i])&&void 0!==s?s:e.document.offsetAt(n.range.end),1)}))}else{let i=o,s=u.miss.length,d=0;for(;o>0&&void 0!==t.params[o-1].defaultVal;)--o;for(let e=0;e<o;++e)!1===t.params[e].defaultVal&&--o;for(;s>0;)(d=u.miss[s-1])>=i?d+1===a&&--a:void 0===t.params[d].defaultVal&&e.addDiagnostic(r.diagnostic.missingparam(),null!==(l=u.comma[d])&&void 0!==l?l:e.document.offsetAt(n.range.end),1),c[d]=!0,--s;(a<o&&!u.unknown||a>i)&&e.diagnostics.push({message:r.diagnostic.paramcounterr(o===i?i:o+"-"+i,a),range:n.range,severity:1})}if(t.hasref&&t.params.map(((t,o)=>{if(o<a&&t.ref&&!c[o]){let t,i;t=0===o?n.offset+n.name.length+1:u.comma[o-1]+1,"&"!==(i=e.find_token(t)).content&&e.addDiagnostic(r.diagnostic.typemaybenot("VarRef"),i.offset,i.length,2)}})),!t.returntypes){let t=e.tokens[n.offset];if("TK_EQUALS"===(null===(d=null==t?void 0:t.previous_token)||void 0===d?void 0:d.type)){let o=e.get_token(e.document.offsetAt(n.range.end),!0);o&&(0,s.is_line_continue)(o.previous_token,o)&&"??"===o.content||e.addDiagnostic(r.diagnostic.missingretval(),t.offset,t.length,2)}}}}}t.globalsymbolcache={},t.symbolProvider=l,t.checkParams=d,t.workspaceSymbolProvider=async function(e){let t=[],n=0,o=e.query;if(!o||!o.match(/^(\w|[^\x00-\x7f])+$/))return t;let r=new RegExp(o.replace(/(?<=[^A-Z])([A-Z])/g,".*$1"),"i");for(let e in s.lexers)if(await d(e))return t;if(s.inBrowser){let e=await s.connection.sendRequest("ahk2.getWorkspaceFiles",[])||[];for(let n of e){let e,o=n.toLowerCase();if(!s.lexers[o]){let r=await s.connection.sendRequest("ahk2.getWorkspaceFileContent",[n]);if(e=new i.Lexer(c.TextDocument.create(n,"ahk2",-10,r)),e.parseScript(),s.lexers[o]=e,await d(o))return t}}}else{let e,n,o;for(let r of s.workspaceFolders){r=a.URI.parse(r).fsPath;for(let c of(0,s.getallahkfiles)(r))if(e=a.URI.file(c).toString().toLowerCase(),!s.lexers[e]&&(o=(0,s.openFile)(c))&&(n=new i.Lexer(o),n.parseScript(),s.lexers[e]=n,await d(e)))return t}}return t;async function d(e){for(let o of await l({textDocument:{uri:e}}))if(r.test(o.name)&&(t.push(o),++n>=1e3))return!0;return!1}}},5748:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFormat=t.TraceValues=t.Trace=t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0,t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=void 0;const o=n(5285);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return o.Message}}),Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return o.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return o.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return o.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return o.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return o.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return o.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return o.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return o.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return o.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return o.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return o.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return o.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return o.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return o.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return o.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return o.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return o.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return o.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return o.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return o.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return o.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return o.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return o.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return o.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return o.ParameterStructures}});const i=n(5164);Object.defineProperty(t,"LinkedMap",{enumerable:!0,get:function(){return i.LinkedMap}}),Object.defineProperty(t,"LRUCache",{enumerable:!0,get:function(){return i.LRUCache}}),Object.defineProperty(t,"Touch",{enumerable:!0,get:function(){return i.Touch}});const r=n(8159);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return r.Disposable}});const s=n(345);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return s.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return s.Emitter}});const a=n(7770);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return a.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return a.CancellationToken}});const c=n(4806);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return c.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return c.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return c.ReadableStreamMessageReader}});const l=n(9248);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return l.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return l.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return l.WriteableStreamMessageWriter}});const d=n(6336);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return d.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return d.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return d.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return d.createMessageConnection}}),Object.defineProperty(t,"ProgressToken",{enumerable:!0,get:function(){return d.ProgressToken}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return d.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return d.Trace}}),Object.defineProperty(t,"TraceValues",{enumerable:!0,get:function(){return d.TraceValues}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return d.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return d.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return d.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return d.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return d.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return d.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return d.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return d.CancellationStrategy}});const u=n(8094);t.RAL=u.default},7770:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const o=n(8094),i=n(8472),r=n(345);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None}),e.is=function(t){const n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(s=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze((function(e,t){const n=(0,o.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}));class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof c&&this._token.dispose():this._token=s.None}}},6336:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const o=n(8094),i=n(8472),r=n(5285),s=n(5164),a=n(345),c=n(7770);var l,d,u,f,p,h,m,g,y,v,b,_,k,T,R;!function(e){e.type=new r.NotificationType("$/cancelRequest")}(l||(l={})),function(e){e.is=function(e){return"string"==typeof e||"number"==typeof e}}(d=t.ProgressToken||(t.ProgressToken={})),function(e){e.type=new r.NotificationType("$/progress")}(u||(u={})),t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return i.func(e)}}(f||(f={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Compact=2]="Compact",e[e.Verbose=3]="Verbose"}(p=t.Trace||(t.Trace={})),(R=t.TraceValues||(t.TraceValues={})).Off="off",R.Messages="messages",R.Compact="compact",R.Verbose="verbose",function(e){e.fromString=function(t){if(!i.string(t))return e.Off;switch(t=t.toLowerCase()){default:return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}}(p=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return i.string(t)&&"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(h=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new r.NotificationType("$/setTrace")}(m=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new r.NotificationType("$/logTrace")}(g=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(y=t.ConnectionErrors||(t.ConnectionErrors={}));class S extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,S.prototype)}}t.ConnectionError=S,function(e){e.is=function(e){const t=e;return t&&i.func(t.cancelUndispatched)}}(v=t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new c.CancellationTokenSource}),e.is=function(e){const t=e;return t&&i.func(t.createCancellationTokenSource)}}(b=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({sendCancellation:(e,t)=>e.sendNotification(l.type,{id:t}),cleanup(e){}}),e.is=function(e){const t=e;return t&&i.func(t.sendCancellation)&&i.func(t.cleanup)}}(_=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={})),function(e){e.Message=Object.freeze({receiver:b.Message,sender:_.Message}),e.is=function(e){const t=e;return t&&b.is(t.receiver)&&_.is(t.sender)}}(k=t.CancellationStrategy||(t.CancellationStrategy={})),(t.ConnectionOptions||(t.ConnectionOptions={})).is=function(e){const t=e;return t&&(k.is(t.cancellationStrategy)||v.is(t.connectionStrategy))},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(T||(T={})),t.createMessageConnection=function(e,n,v,b){const _=void 0!==v?v:t.NullLogger;let R=0,w=0,D=0;const C="2.0";let x;const K=new Map;let O;const P=new Map,E=new Map;let M,A,N=new s.LinkedMap,q=new Map,L=new Set,j=new Map,F=p.Off,I=h.Text,W=T.New;const $=new a.Emitter,V=new a.Emitter,U=new a.Emitter,H=new a.Emitter,B=new a.Emitter,z=b&&b.cancellationStrategy?b.cancellationStrategy:k.Message;function X(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function G(e){}function Q(){return W===T.Listening}function J(){return W===T.Closed}function Y(){return W===T.Disposed}function Z(){W!==T.New&&W!==T.Listening||(W=T.Closed,V.fire(void 0))}function ee(){M||0===N.size||(M=(0,o.default)().timer.setImmediate((()=>{M=void 0,function(){if(0===N.size)return;const e=N.shift();try{r.Message.isRequest(e)?function(e){if(Y())return;function t(t,o,i){const s={jsonrpc:C,id:e.id};t instanceof r.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,oe(s,o,i),n.write(s).catch((()=>_.error("Sending response failed.")))}function o(t,o,i){const r={jsonrpc:C,id:e.id,error:t.toJson()};oe(r,o,i),n.write(r).catch((()=>_.error("Sending response failed.")))}!function(e){if(F!==p.Off&&A)if(I===h.Text){let t;F!==p.Verbose&&F!==p.Compact||!e.params||(t=`Params: ${ne(e.params)}\n\n`),A.log(`Received request '${e.method} - (${e.id})'.`,t)}else re("receive-request",e)}(e);const s=K.get(e.method);let a,c;s&&(a=s.type,c=s.handler);const l=Date.now();if(c||x){const s=e.id??String(Date.now()),d=z.receiver.createCancellationTokenSource(s);null!==e.id&&L.has(e.id)&&d.cancel(),null!==e.id&&j.set(s,d);try{let u;if(c)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void o(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but received none.`),e.method,l);u=c(d.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===r.ParameterStructures.byName)return void o(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,l);u=c(...e.params,d.token)}else{if(void 0!==a&&a.parameterStructures===r.ParameterStructures.byPosition)return void o(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,l);u=c(e.params,d.token)}else x&&(u=x(e.method,e.params,d.token));const f=u;u?f.then?f.then((n=>{j.delete(s),t(n,e.method,l)}),(t=>{j.delete(s),t instanceof r.ResponseError?o(t,e.method,l):t&&i.string(t.message)?o(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):o(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)})):(j.delete(s),t(u,e.method,l)):(j.delete(s),function(t,o,i){void 0===t&&(t=null);const r={jsonrpc:C,id:e.id,result:t};oe(r,o,i),n.write(r).catch((()=>_.error("Sending response failed.")))}(u,e.method,l))}catch(n){j.delete(s),n instanceof r.ResponseError?t(n,e.method,l):n&&i.string(n.message)?o(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${n.message}`),e.method,l):o(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else o(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):r.Message.isNotification(e)?function(e){if(Y())return;let t,n;if(e.method===l.type.method){const t=e.params.id;return L.delete(t),void ie(e)}{const o=P.get(e.method);o&&(n=o.handler,t=o.type)}if(n||O)try{if(ie(e),n)if(void 0===e.params)void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==r.ParameterStructures.byName&&_.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`),n();else if(Array.isArray(e.params)){const o=e.params;e.method===u.type.method&&2===o.length&&d.is(o[0])?n({token:o[0],value:o[1]}):(void 0!==t&&(t.parameterStructures===r.ParameterStructures.byName&&_.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&_.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${o.length} arguments`)),n(...o))}else void 0!==t&&t.parameterStructures===r.ParameterStructures.byPosition&&_.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params);else O&&O(e.method,e.params)}catch(t){t.message?_.error(`Notification handler '${e.method}' failed with message: ${t.message}`):_.error(`Notification handler '${e.method}' failed unexpectedly.`)}else U.fire(e)}(e):r.Message.isResponse(e)?function(e){if(!Y())if(null===e.id)e.error?_.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):_.error("Received response message without id. No further error information provided.");else{const t=e.id,n=q.get(t);if(function(e,t){if(F!==p.Off&&A)if(I===h.Text){let n;if(F!==p.Verbose&&F!==p.Compact||(e.error&&e.error.data?n=`Error data: ${ne(e.error.data)}\n\n`:e.result?n=`Result: ${ne(e.result)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const o=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";A.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${o}`,n)}else A.log(`Received response ${e.id} without active response promise.`,n)}else re("receive-response",e)}(e,n),void 0!==n){q.delete(t);try{if(e.error){const t=e.error;n.reject(new r.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?_.error(`Response handler '${n.method}' failed with message: ${e.message}`):_.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void _.error("Received empty message.");_.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(i.string(t.id)||i.number(t.id)){const e=t.id,n=q.get(e);n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{ee()}}()})))}e.onClose(Z),e.onError((function(e){$.fire([e,void 0,void 0])})),n.onClose(Z),n.onError((function(e){$.fire(e)}));const te=e=>{try{if(r.Message.isNotification(e)&&e.method===l.type.method){const t=e.params.id,o=X(t),i=N.get(o);if(r.Message.isRequest(i)){const r=b?.connectionStrategy,s=r&&r.cancelUndispatched?r.cancelUndispatched(i,G):void 0;if(s&&(void 0!==s.error||void 0!==s.result))return N.delete(o),j.delete(t),s.id=i.id,oe(s,e.method,Date.now()),void n.write(s).catch((()=>_.error("Sending response for canceled message failed.")))}const s=j.get(t);if(void 0!==s)return s.cancel(),void ie(e);L.add(t)}!function(e,t){var n;r.Message.isRequest(t)?e.set(X(t.id),t):r.Message.isResponse(t)?e.set(null===(n=t.id)?"res-unknown-"+(++D).toString():"res-"+n.toString(),t):e.set("not-"+(++w).toString(),t)}(N,e)}finally{ee()}};function ne(e){if(null!=e)switch(F){case p.Verbose:return JSON.stringify(e,null,4);case p.Compact:return JSON.stringify(e);default:return}}function oe(e,t,n){if(F!==p.Off&&A)if(I===h.Text){let o;F!==p.Verbose&&F!==p.Compact||(e.error&&e.error.data?o=`Error data: ${ne(e.error.data)}\n\n`:e.result?o=`Result: ${ne(e.result)}\n\n`:void 0===e.error&&(o="No result returned.\n\n")),A.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,o)}else re("send-response",e)}function ie(e){if(F!==p.Off&&A&&e.method!==g.type.method)if(I===h.Text){let t;F!==p.Verbose&&F!==p.Compact||(t=e.params?`Params: ${ne(e.params)}\n\n`:"No parameters provided.\n\n"),A.log(`Received notification '${e.method}'.`,t)}else re("receive-notification",e)}function re(e,t){if(!A||F===p.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};A.log(n)}function se(){if(J())throw new S(y.Closed,"Connection is closed.");if(Y())throw new S(y.Disposed,"Connection is disposed.")}function ae(e){return void 0===e?null:e}function ce(e){return null===e?void 0:e}function le(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function de(e,t){switch(e){case r.ParameterStructures.auto:return le(t)?ce(t):[ae(t)];case r.ParameterStructures.byName:if(!le(t))throw new Error("Received parameters by name but param is not an object literal.");return ce(t);case r.ParameterStructures.byPosition:return[ae(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function ue(e,t){let n;const o=e.numberOfParams;switch(o){case 0:n=void 0;break;case 1:n=de(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<o;e++)n.push(ae(t[e]));if(t.length<o)for(let e=t.length;e<o;e++)n.push(null)}return n}const fe={sendNotification:(e,...t)=>{let o,s;if(se(),i.string(e)){o=e;const n=t[0];let i=0,a=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(i=1,a=n);let c=t.length;const l=c-i;switch(l){case 0:s=void 0;break;case 1:s=de(a,t[i]);break;default:if(a===r.ParameterStructures.byName)throw new Error(`Received ${l} parameters for 'by Name' notification parameter structure.`);s=t.slice(i,c).map((e=>ae(e)))}}else{const n=t;o=e.method,s=ue(e,n)}const a={jsonrpc:C,method:o,params:s};return function(e){if(F!==p.Off&&A)if(I===h.Text){let t;F!==p.Verbose&&F!==p.Compact||(t=e.params?`Params: ${ne(e.params)}\n\n`:"No parameters provided.\n\n"),A.log(`Sending notification '${e.method}'.`,t)}else re("send-notification",e)}(a),n.write(a).catch((()=>_.error("Sending notification failed.")))},onNotification:(e,t)=>{let n;return se(),i.func(e)?O=e:t&&(i.string(e)?(n=e,P.set(e,{type:void 0,handler:t})):(n=e.method,P.set(e.method,{type:e,handler:t}))),{dispose:()=>{void 0!==n?P.delete(n):O=void 0}}},onProgress:(e,t,n)=>{if(E.has(t))throw new Error(`Progress handler for token ${t} already registered`);return E.set(t,n),{dispose:()=>{E.delete(t)}}},sendProgress:(e,t,n)=>fe.sendNotification(u.type,{token:t,value:n}),onUnhandledProgress:H.event,sendRequest:(e,...t)=>{let o,s,a;if(se(),function(){if(!Q())throw new Error("Call listen() first.")}(),i.string(e)){o=e;const n=t[0],i=t[t.length-1];let l=0,d=r.ParameterStructures.auto;r.ParameterStructures.is(n)&&(l=1,d=n);let u=t.length;c.CancellationToken.is(i)&&(u-=1,a=i);const f=u-l;switch(f){case 0:s=void 0;break;case 1:s=de(d,t[l]);break;default:if(d===r.ParameterStructures.byName)throw new Error(`Received ${f} parameters for 'by Name' request parameter structure.`);s=t.slice(l,u).map((e=>ae(e)))}}else{const n=t;o=e.method,s=ue(e,n);const i=e.numberOfParams;a=c.CancellationToken.is(n[i])?n[i]:void 0}const l=R++;let d;return a&&(d=a.onCancellationRequested((()=>{const e=z.sender.sendCancellation(fe,l);return void 0===e?(_.log(`Received no promise from cancellation strategy when cancelling id ${l}`),Promise.resolve()):e.catch((()=>{_.log(`Sending cancellation messages for id ${l} failed`)}))}))),new Promise(((e,t)=>{const i={jsonrpc:C,id:l,method:o,params:s};let a={method:o,timerStart:Date.now(),resolve:t=>{e(t),z.sender.cleanup(l),d?.dispose()},reject:e=>{t(e),z.sender.cleanup(l),d?.dispose()}};!function(e){if(F!==p.Off&&A)if(I===h.Text){let t;F!==p.Verbose&&F!==p.Compact||!e.params||(t=`Params: ${ne(e.params)}\n\n`),A.log(`Sending request '${e.method} - (${e.id})'.`,t)}else re("send-request",e)}(i);try{n.write(i).catch((()=>_.error("Sending request failed.")))}catch(e){a.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),a=null}a&&q.set(l,a)}))},onRequest:(e,t)=>{se();let n=null;return f.is(e)?(n=void 0,x=e):i.string(e)?(n=null,void 0!==t&&(n=e,K.set(e,{handler:t,type:void 0}))):void 0!==t&&(n=e.method,K.set(e.method,{type:e,handler:t})),{dispose:()=>{null!==n&&(void 0!==n?K.delete(n):x=void 0)}}},hasPendingResponse:()=>q.size>0,trace:async(e,t,n)=>{let o=!1,r=h.Text;void 0!==n&&(i.boolean(n)?o=n:(o=n.sendNotification||!1,r=n.traceFormat||h.Text)),F=e,I=r,A=F===p.Off?void 0:t,!o||J()||Y()||await fe.sendNotification(m.type,{value:p.toString(e)})},onError:$.event,onClose:V.event,onUnhandledNotification:U.event,onDispose:B.event,end:()=>{n.end()},dispose:()=>{if(Y())return;W=T.Disposed,B.fire(void 0);const t=new r.ResponseError(r.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const e of q.values())e.reject(t);q=new Map,j=new Map,L=new Set,N=new s.LinkedMap,i.func(n.dispose)&&n.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{se(),function(){if(Q())throw new S(y.AlreadyListening,"Connection is already listening")}(),W=T.Listening,e.listen(te)},inspect:()=>{(0,o.default)().console.log("inspect")}};return fe.onNotification(g.type,(e=>{if(F===p.Off||!A)return;const t=F===p.Verbose||F===p.Compact;A.log(e.message,t?e.verbose:void 0)})),fe.onNotification(u.type,(e=>{const t=E.get(e.token);t?t(e.value):H.fire(e)})),fe}},8159:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}}},345:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const o=n(8094);!function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class i{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let o=0,i=this._callbacks.length;o<i;o++)if(this._callbacks[o]===e){if(this._contexts[o]===t)return this._callbacks.splice(o,1),void this._contexts.splice(o,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let r=0,s=n.length;r<s;r++)try{t.push(n[r].apply(i[r],e))}catch(e){(0,o.default)().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const o={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),o.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(o),o}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=r,r._noop=function(){}},8472:(e,t)=>{function n(e){return"string"==typeof e||e instanceof String}function o(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=o,t.stringArray=function(e){return o(e)&&e.every((e=>n(e)))}},5164:(e,t)=>{var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(o=t.Touch||(t.Touch={}));class i{constructor(){this[n]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=o.None){const n=this._map.get(e);if(n)return t!==o.None&&this.touch(n,t),n.value}set(e,t,n=o.None){let i=this._map.get(e);if(i)i.value=t,n!==o.None&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case o.None:this.addItemLast(i);break;case o.First:this.addItemFirst(i);break;case o.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let o=this._head;for(;o;){if(t?e.bind(t)(o.value,o.key,this):e(o.value,o.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.key,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}values(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:t.value,done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}entries(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(t){const e={value:[t.key,t.value],done:!1};return t=t.next,e}return{value:void 0,done:!0}}};return n}[(n=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===o.First||t===o.Last)if(t===o.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===o.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}t.LinkedMap=i,t.LRUCache=class extends i{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=o.AsNew){return super.get(e,t)}peek(e){return super.get(e,o.None)}set(e,t){return super.set(e,t,o.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},5506:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0,t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(0===this._chunks.length)return;let e=0,t=0,n=0,o=0;e:for(;t<this._chunks.length;){const i=this._chunks[t];for(n=0;n<i.length;){switch(i[n]){case 13:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case 10:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}o+=i.byteLength,t++}if(4!==e)return;const i=this._read(o+n),r=new Map,s=this.toString(i,"ascii").split("\r\n");if(s.length<2)return r;for(let e=0;e<s.length-2;e++){const t=s[e],n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");const o=t.substr(0,n),i=t.substr(n+1).trim();r.set(o,i)}return r}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const o=this._chunks[0];if(o.byteLength>e){const i=o.slice(0,e);t.set(i,n),n+=e,this._chunks[0]=o.slice(e),this._totalLength-=e,e-=e}else t.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return t}}},4806:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const o=n(8094),i=n(8472),r=n(345);var s;(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)};class a{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=a,function(e){e.fromOptions=function(e){let t,n;const i=new Map;let r;const s=new Map;if(void 0===e||"string"==typeof e)t=e??"utf-8";else{if(t=e.charset??"utf-8",void 0!==e.contentDecoder&&(n=e.contentDecoder,i.set(n.name,n)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)i.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(r=e.contentTypeDecoder,s.set(r.name,r)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)s.set(t.name,t)}return void 0===r&&(r=(0,o.default)().applicationJson.decoder,s.set(r.name,r)),{charset:t,contentDecoder:n,contentDecoders:i,contentTypeDecoder:r,contentTypeDecoders:s}}}(s||(s={})),t.ReadableStreamMessageReader=class extends a{constructor(e,t){super(),this.readable=e,this.options=s.fromOptions(t),this.buffer=(0,o.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders();if(!e)return;const t=e.get("Content-Length");if(!t)throw new Error("Header must provide a Content-Length property.");const n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();let t;this.clearPartialMessageTimer(),this.nextMessageLength=-1,t=void 0!==this.options.contentDecoder?this.options.contentDecoder.decode(e):Promise.resolve(e),t.then((e=>{this.options.contentTypeDecoder.decode(e,this.options).then((e=>{this.callback(e)}),(e=>{this.fireError(e)}))}),(e=>{this.fireError(e)}))}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=(0,o.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},9248:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const o=n(8094),i=n(8472),r=n(6791),s=n(345);var a;(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)};class c{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=c,function(e){e.fromOptions=function(e){return void 0===e||"string"==typeof e?{charset:e??"utf-8",contentTypeEncoder:(0,o.default)().applicationJson.encoder}:{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,o.default)().applicationJson.encoder}}}(a||(a={})),t.WriteableStreamMessageWriter=class extends c{constructor(e,t){super(),this.writable=e,this.options=a.fromOptions(t),this.errorCount=0,this.writeSemaphore=new r.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},5285:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const o=n(8472);var i,r;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=-32099,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.PendingResponseRejected=-32097,e.ConnectionInactive=-32096,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=-32e3}(i=t.ErrorCodes||(t.ErrorCodes={}));class s extends Error{constructor(e,t,n){super(t),this.code=o.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,s.prototype)}toJson(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),e}}t.ResponseError=s;class a{constructor(e){this.kind=e}static is(e){return e===a.auto||e===a.byName||e===a.byPosition}toString(){return this.kind}}t.ParameterStructures=a,a.auto=new a("auto"),a.byPosition=new a("byPosition"),a.byName=new a("byName");class c{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return a.auto}}t.AbstractMessageSignature=c,t.RequestType0=class extends c{constructor(e){super(e,0)}},t.RequestType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType2=class extends c{constructor(e){super(e,2)}},t.RequestType3=class extends c{constructor(e){super(e,3)}},t.RequestType4=class extends c{constructor(e){super(e,4)}},t.RequestType5=class extends c{constructor(e){super(e,5)}},t.RequestType6=class extends c{constructor(e){super(e,6)}},t.RequestType7=class extends c{constructor(e){super(e,7)}},t.RequestType8=class extends c{constructor(e){super(e,8)}},t.RequestType9=class extends c{constructor(e){super(e,9)}},t.NotificationType=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType0=class extends c{constructor(e){super(e,0)}},t.NotificationType1=class extends c{constructor(e,t=a.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType2=class extends c{constructor(e){super(e,2)}},t.NotificationType3=class extends c{constructor(e){super(e,3)}},t.NotificationType4=class extends c{constructor(e){super(e,4)}},t.NotificationType5=class extends c{constructor(e){super(e,5)}},t.NotificationType6=class extends c{constructor(e){super(e,6)}},t.NotificationType7=class extends c{constructor(e){super(e,7)}},t.NotificationType8=class extends c{constructor(e){super(e,8)}},t.NotificationType9=class extends c{constructor(e){super(e,9)}},(r=t.Message||(t.Message={})).isRequest=function(e){const t=e;return t&&o.string(t.method)&&(o.string(t.id)||o.number(t.id))},r.isNotification=function(e){const t=e;return t&&o.string(t.method)&&void 0===e.id},r.isResponse=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(o.string(t.id)||o.number(t.id)||null===t.id)}},8094:(e,t)=>{let n;function o(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e}}(o||(o={})),t.default=o},6791:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const o=n(8094);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&(0,o.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},1694:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.createServerSocketTransport=t.createClientSocketTransport=t.createServerPipeTransport=t.createClientPipeTransport=t.generateRandomPipeName=t.StreamMessageWriter=t.StreamMessageReader=t.SocketMessageWriter=t.SocketMessageReader=t.IPCMessageWriter=t.IPCMessageReader=void 0;const r=n(3590);r.default.install();const s=n(5748),a=n(1017),c=n(2037),l=n(6113),d=n(1808);i(n(5748),t);class u extends s.AbstractMessageReader{constructor(e){super(),this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose()))}listen(e){return this.process.on("message",e),s.Disposable.create((()=>this.process.off("message",e)))}}t.IPCMessageReader=u;class f extends s.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let t=this.process;t.on("error",(e=>this.fireError(e))),t.on("close",(()=>this.fireClose))}write(e){try{return"function"==typeof this.process.send&&this.process.send(e,void 0,void 0,(t=>{t?(this.errorCount++,this.handleError(t,e)):this.errorCount=0})),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.IPCMessageWriter=f;class p extends s.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,r.default)().stream.asReadableStream(e),t)}}t.SocketMessageReader=p;class h extends s.WriteableStreamMessageWriter{constructor(e,t){super((0,r.default)().stream.asWritableStream(e),t),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}}t.SocketMessageWriter=h;class m extends s.ReadableStreamMessageReader{constructor(e,t){super((0,r.default)().stream.asReadableStream(e),t)}}t.StreamMessageReader=m;class g extends s.WriteableStreamMessageWriter{constructor(e,t){super((0,r.default)().stream.asWritableStream(e),t)}}t.StreamMessageWriter=g;const y=process.env.XDG_RUNTIME_DIR,v=new Map([["linux",107],["darwin",103]]);t.generateRandomPipeName=function(){const e=(0,l.randomBytes)(21).toString("hex");if("win32"===process.platform)return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`;let t;t=y?a.join(y,`vscode-ipc-${e}.sock`):a.join(c.tmpdir(),`vscode-${e}.sock`);const n=v.get(process.platform);return void 0!==n&&t.length>=n&&(0,r.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`),t},t.createClientPipeTransport=function(e,t="utf-8"){let n;const o=new Promise(((e,t)=>{n=e}));return new Promise(((i,r)=>{let s=(0,d.createServer)((e=>{s.close(),n([new p(e,t),new h(e,t)])}));s.on("error",r),s.listen(e,(()=>{s.removeListener("error",r),i({onConnected:()=>o})}))}))},t.createServerPipeTransport=function(e,t="utf-8"){const n=(0,d.createConnection)(e);return[new p(n,t),new h(n,t)]},t.createClientSocketTransport=function(e,t="utf-8"){let n;const o=new Promise(((e,t)=>{n=e}));return new Promise(((i,r)=>{const s=(0,d.createServer)((e=>{s.close(),n([new p(e,t),new h(e,t)])}));s.on("error",r),s.listen(e,"127.0.0.1",(()=>{s.removeListener("error",r),i({onConnected:()=>o})}))}))},t.createServerSocketTransport=function(e,t="utf-8"){const n=(0,d.createConnection)(e,"127.0.0.1");return[new p(n,t),new h(n,t)]},t.createMessageConnection=function(e,t,n,o){n||(n=s.NullLogger);const i=function(e){const t=e;return void 0!==t.read&&void 0!==t.addListener}(e)?new m(e):e,r=function(e){const t=e;return void 0!==t.write&&void 0!==t.addListener}(t)?new g(t):t;return s.ConnectionStrategy.is(o)&&(o={connectionStrategy:o}),(0,s.createMessageConnection)(i,r,n,o)}},3590:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(8094),i=n(3837),r=n(8159),s=n(5506);class a extends s.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return a.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){return e instanceof Buffer?e.toString(t):new i.TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}allocNative(e){return Buffer.allocUnsafe(e)}}a.emptyBuffer=Buffer.allocUnsafe(0);class c{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),r.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),r.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),r.Disposable.create((()=>this.stream.off("end",e)))}onData(e){return this.stream.on("data",e),r.Disposable.create((()=>this.stream.off("data",e)))}}class l{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),r.Disposable.create((()=>this.stream.off("close",e)))}onError(e){return this.stream.on("error",e),r.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){return this.stream.on("end",e),r.Disposable.create((()=>this.stream.off("end",e)))}write(e,t){return new Promise(((n,o)=>{const i=e=>{null==e?n():o(e)};"string"==typeof e?this.stream.write(e,t,i):this.stream.write(e,i)}))}end(){this.stream.end()}}const d=Object.freeze({messageBuffer:Object.freeze({create:e=>new a(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(e){return Promise.reject(e)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new i.TextDecoder(t.charset).decode(e)))}catch(e){return Promise.reject(e)}}})}),stream:Object.freeze({asReadableStream:e=>new c(e),asWritableStream:e=>new l(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){const o=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(o)}},setImmediate(e,...t){const n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){const o=setInterval(e,t,...n);return{dispose:()=>clearInterval(o)}}})});function u(){return d}!function(e){e.install=function(){o.default.install(d)}}(u||(u={})),t.default=u},2659:(e,t,n)=>{e.exports=n(1694)},559:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,i(n(1694),t),i(n(2880),t),i(n(4742),t),i(n(7304),t);var r,s=n(7558);Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return s.createProtocolConnection}}),(r=t.LSPErrorCodes||(t.LSPErrorCodes={})).lspReservedErrorRangeStart=-32899,r.RequestFailed=-32803,r.ServerCancelled=-32802,r.ContentModified=-32801,r.RequestCancelled=-32800,r.lspReservedErrorRangeEnd=-32800},7558:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const o=n(1694);t.createProtocolConnection=function(e,t,n,i){return o.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,o.createMessageConnection)(e,t,n,i)}},4742:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolNotificationType=t.ProtocolNotificationType0=t.ProtocolRequestType=t.ProtocolRequestType0=t.RegistrationType=t.MessageDirection=void 0;const o=n(1694);var i;(i=t.MessageDirection||(t.MessageDirection={})).clientToServer="clientToServer",i.serverToClient="serverToClient",i.both="both",t.RegistrationType=class{constructor(e){this.method=e}};class r extends o.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=r;class s extends o.RequestType{constructor(e){super(e,o.ParameterStructures.byName)}}t.ProtocolRequestType=s;class a extends o.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=a;class c extends o.NotificationType{constructor(e){super(e,o.ParameterStructures.byName)}}t.ProtocolNotificationType=c},2565:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.CallHierarchyPrepareRequest=void 0;const o=n(4742);var i,r,s;(s=t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={})).method="textDocument/prepareCallHierarchy",s.messageDirection=o.MessageDirection.clientToServer,s.type=new o.ProtocolRequestType(s.method),(r=t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={})).method="callHierarchy/incomingCalls",r.messageDirection=o.MessageDirection.clientToServer,r.type=new o.ProtocolRequestType(r.method),(i=t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={})).method="callHierarchy/outgoingCalls",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method)},5509:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPresentationRequest=t.DocumentColorRequest=void 0;const o=n(4742);var i,r;(r=t.DocumentColorRequest||(t.DocumentColorRequest={})).method="textDocument/documentColor",r.messageDirection=o.MessageDirection.clientToServer,r.type=new o.ProtocolRequestType(r.method),(i=t.ColorPresentationRequest||(t.ColorPresentationRequest={})).method="textDocument/colorPresentation",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method)},7296:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationRequest=void 0;const o=n(4742);var i;(i=t.ConfigurationRequest||(t.ConfigurationRequest={})).method="workspace/configuration",i.messageDirection=o.MessageDirection.serverToClient,i.type=new o.ProtocolRequestType(i.method)},9137:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationRequest=void 0;const o=n(4742);var i;(i=t.DeclarationRequest||(t.DeclarationRequest={})).method="textDocument/declaration",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method)},8338:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=void 0;const o=n(1694),i=n(9348),r=n(4742);var s,a,c,l;(t.DiagnosticServerCancellationData||(t.DiagnosticServerCancellationData={})).is=function(e){const t=e;return t&&i.boolean(t.retriggerRequest)},(l=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={})).Full="full",l.Unchanged="unchanged",(c=t.DocumentDiagnosticRequest||(t.DocumentDiagnosticRequest={})).method="textDocument/diagnostic",c.messageDirection=r.MessageDirection.clientToServer,c.type=new r.ProtocolRequestType(c.method),c.partialResult=new o.ProgressType,(a=t.WorkspaceDiagnosticRequest||(t.WorkspaceDiagnosticRequest={})).method="workspace/diagnostic",a.messageDirection=r.MessageDirection.clientToServer,a.type=new r.ProtocolRequestType(a.method),a.partialResult=new o.ProgressType,(s=t.DiagnosticRefreshRequest||(t.DiagnosticRefreshRequest={})).method="workspace/diagnostic/refresh",s.messageDirection=r.MessageDirection.clientToServer,s.type=new r.ProtocolRequestType0(s.method)},2235:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.DidRenameFilesNotification=t.WillRenameFilesRequest=t.DidCreateFilesNotification=t.WillCreateFilesRequest=t.FileOperationPatternKind=void 0;const o=n(4742);var i,r,s,a,c,l,d;(d=t.FileOperationPatternKind||(t.FileOperationPatternKind={})).file="file",d.folder="folder",(l=t.WillCreateFilesRequest||(t.WillCreateFilesRequest={})).method="workspace/willCreateFiles",l.messageDirection=o.MessageDirection.clientToServer,l.type=new o.ProtocolRequestType(l.method),(c=t.DidCreateFilesNotification||(t.DidCreateFilesNotification={})).method="workspace/didCreateFiles",c.messageDirection=o.MessageDirection.clientToServer,c.type=new o.ProtocolNotificationType(c.method),(a=t.WillRenameFilesRequest||(t.WillRenameFilesRequest={})).method="workspace/willRenameFiles",a.messageDirection=o.MessageDirection.clientToServer,a.type=new o.ProtocolRequestType(a.method),(s=t.DidRenameFilesNotification||(t.DidRenameFilesNotification={})).method="workspace/didRenameFiles",s.messageDirection=o.MessageDirection.clientToServer,s.type=new o.ProtocolNotificationType(s.method),(r=t.DidDeleteFilesNotification||(t.DidDeleteFilesNotification={})).method="workspace/didDeleteFiles",r.messageDirection=o.MessageDirection.clientToServer,r.type=new o.ProtocolNotificationType(r.method),(i=t.WillDeleteFilesRequest||(t.WillDeleteFilesRequest={})).method="workspace/willDeleteFiles",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method)},5171:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeRequest=void 0;const o=n(4742);var i;(i=t.FoldingRangeRequest||(t.FoldingRangeRequest={})).method="textDocument/foldingRange",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method)},2441:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationRequest=void 0;const o=n(4742);var i;(i=t.ImplementationRequest||(t.ImplementationRequest={})).method="textDocument/implementation",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method)},4248:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=void 0;const o=n(4742);var i,r,s;(s=t.InlayHintRequest||(t.InlayHintRequest={})).method="textDocument/inlayHint",s.messageDirection=o.MessageDirection.clientToServer,s.type=new o.ProtocolRequestType(s.method),(r=t.InlayHintResolveRequest||(t.InlayHintResolveRequest={})).method="inlayHint/resolve",r.messageDirection=o.MessageDirection.clientToServer,r.type=new o.ProtocolRequestType(r.method),(i=t.InlayHintRefreshRequest||(t.InlayHintRefreshRequest={})).method="workspace/inlayHint/refresh",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType0(i.method)},1557:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValueRefreshRequest=t.InlineValueRequest=void 0;const o=n(4742);var i,r;(r=t.InlineValueRequest||(t.InlineValueRequest={})).method="textDocument/inlineValue",r.messageDirection=o.MessageDirection.clientToServer,r.type=new o.ProtocolRequestType(r.method),(i=t.InlineValueRefreshRequest||(t.InlineValueRefreshRequest={})).method="workspace/inlineValue/refresh",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType0(i.method)},7304:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.RelativePattern=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeErrorCodes=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.PositionEncodingKind=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.NotebookCellTextDocumentFilter=t.NotebookDocumentFilter=t.TextDocumentFilter=void 0,t.TypeHierarchySubtypesRequest=t.TypeHierarchyPrepareRequest=t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolResolveRequest=void 0,t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=t.InlineValueRefreshRequest=t.InlineValueRequest=t.TypeHierarchySupertypesRequest=void 0;const o=n(4742),i=n(2880),r=n(9348),s=n(2441);Object.defineProperty(t,"ImplementationRequest",{enumerable:!0,get:function(){return s.ImplementationRequest}});const a=n(8685);Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:!0,get:function(){return a.TypeDefinitionRequest}});const c=n(6098);Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return c.WorkspaceFoldersRequest}}),Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return c.DidChangeWorkspaceFoldersNotification}});const l=n(7296);Object.defineProperty(t,"ConfigurationRequest",{enumerable:!0,get:function(){return l.ConfigurationRequest}});const d=n(5509);Object.defineProperty(t,"DocumentColorRequest",{enumerable:!0,get:function(){return d.DocumentColorRequest}}),Object.defineProperty(t,"ColorPresentationRequest",{enumerable:!0,get:function(){return d.ColorPresentationRequest}});const u=n(5171);Object.defineProperty(t,"FoldingRangeRequest",{enumerable:!0,get:function(){return u.FoldingRangeRequest}});const f=n(9137);Object.defineProperty(t,"DeclarationRequest",{enumerable:!0,get:function(){return f.DeclarationRequest}});const p=n(2964);Object.defineProperty(t,"SelectionRangeRequest",{enumerable:!0,get:function(){return p.SelectionRangeRequest}});const h=n(7450);Object.defineProperty(t,"WorkDoneProgress",{enumerable:!0,get:function(){return h.WorkDoneProgress}}),Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return h.WorkDoneProgressCreateRequest}}),Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return h.WorkDoneProgressCancelNotification}});const m=n(2565);Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return m.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return m.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return m.CallHierarchyPrepareRequest}});const g=n(5402);Object.defineProperty(t,"TokenFormat",{enumerable:!0,get:function(){return g.TokenFormat}}),Object.defineProperty(t,"SemanticTokensRequest",{enumerable:!0,get:function(){return g.SemanticTokensRequest}}),Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return g.SemanticTokensDeltaRequest}}),Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return g.SemanticTokensRangeRequest}}),Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return g.SemanticTokensRefreshRequest}}),Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return g.SemanticTokensRegistrationType}});const y=n(903);Object.defineProperty(t,"ShowDocumentRequest",{enumerable:!0,get:function(){return y.ShowDocumentRequest}});const v=n(7323);Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return v.LinkedEditingRangeRequest}});const b=n(2235);Object.defineProperty(t,"FileOperationPatternKind",{enumerable:!0,get:function(){return b.FileOperationPatternKind}}),Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:!0,get:function(){return b.DidCreateFilesNotification}}),Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:!0,get:function(){return b.WillCreateFilesRequest}}),Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:!0,get:function(){return b.DidRenameFilesNotification}}),Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:!0,get:function(){return b.WillRenameFilesRequest}}),Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return b.DidDeleteFilesNotification}}),Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return b.WillDeleteFilesRequest}});const _=n(9219);Object.defineProperty(t,"UniquenessLevel",{enumerable:!0,get:function(){return _.UniquenessLevel}}),Object.defineProperty(t,"MonikerKind",{enumerable:!0,get:function(){return _.MonikerKind}}),Object.defineProperty(t,"MonikerRequest",{enumerable:!0,get:function(){return _.MonikerRequest}});const k=n(9970);Object.defineProperty(t,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return k.TypeHierarchyPrepareRequest}}),Object.defineProperty(t,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return k.TypeHierarchySubtypesRequest}}),Object.defineProperty(t,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return k.TypeHierarchySupertypesRequest}});const T=n(1557);Object.defineProperty(t,"InlineValueRequest",{enumerable:!0,get:function(){return T.InlineValueRequest}}),Object.defineProperty(t,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return T.InlineValueRefreshRequest}});const R=n(4248);Object.defineProperty(t,"InlayHintRequest",{enumerable:!0,get:function(){return R.InlayHintRequest}}),Object.defineProperty(t,"InlayHintResolveRequest",{enumerable:!0,get:function(){return R.InlayHintResolveRequest}}),Object.defineProperty(t,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return R.InlayHintRefreshRequest}});const S=n(8338);Object.defineProperty(t,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return S.DiagnosticServerCancellationData}}),Object.defineProperty(t,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return S.DocumentDiagnosticReportKind}}),Object.defineProperty(t,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return S.DocumentDiagnosticRequest}}),Object.defineProperty(t,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return S.WorkspaceDiagnosticRequest}}),Object.defineProperty(t,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return S.DiagnosticRefreshRequest}});const w=n(5626);var D,C,x,K,O,P,E,M,A,N,q,L,j,F,I,W,$,V,U,H,B,z,X,G,Q,J,Y,Z,ee,te,ne,oe,ie,re,se,ae,ce,le,de,ue,fe,pe,he,me,ge,ye,ve,be,_e,ke,Te,Re,Se,we,De,Ce,xe,Ke,Oe;Object.defineProperty(t,"NotebookCellKind",{enumerable:!0,get:function(){return w.NotebookCellKind}}),Object.defineProperty(t,"ExecutionSummary",{enumerable:!0,get:function(){return w.ExecutionSummary}}),Object.defineProperty(t,"NotebookCell",{enumerable:!0,get:function(){return w.NotebookCell}}),Object.defineProperty(t,"NotebookDocument",{enumerable:!0,get:function(){return w.NotebookDocument}}),Object.defineProperty(t,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return w.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(t,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return w.DidOpenNotebookDocumentNotification}}),Object.defineProperty(t,"NotebookCellArrayChange",{enumerable:!0,get:function(){return w.NotebookCellArrayChange}}),Object.defineProperty(t,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return w.DidChangeNotebookDocumentNotification}}),Object.defineProperty(t,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return w.DidSaveNotebookDocumentNotification}}),Object.defineProperty(t,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return w.DidCloseNotebookDocumentNotification}}),function(e){e.is=function(e){const t=e;return r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}}(D=t.TextDocumentFilter||(t.TextDocumentFilter={})),function(e){e.is=function(e){const t=e;return r.objectLiteral(t)&&(r.string(t.notebookType)||r.string(t.scheme)||r.string(t.pattern))}}(C=t.NotebookDocumentFilter||(t.NotebookDocumentFilter={})),function(e){e.is=function(e){const t=e;return r.objectLiteral(t)&&(r.string(t.notebook)||C.is(t.notebook))&&(void 0===t.language||r.string(t.language))}}(x=t.NotebookCellTextDocumentFilter||(t.NotebookCellTextDocumentFilter={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!r.string(t)&&!D.is(t)&&!x.is(t))return!1;return!0}}(K=t.DocumentSelector||(t.DocumentSelector={})),(Oe=t.RegistrationRequest||(t.RegistrationRequest={})).method="client/registerCapability",Oe.messageDirection=o.MessageDirection.serverToClient,Oe.type=new o.ProtocolRequestType(Oe.method),(Ke=t.UnregistrationRequest||(t.UnregistrationRequest={})).method="client/unregisterCapability",Ke.messageDirection=o.MessageDirection.serverToClient,Ke.type=new o.ProtocolRequestType(Ke.method),(xe=t.ResourceOperationKind||(t.ResourceOperationKind={})).Create="create",xe.Rename="rename",xe.Delete="delete",(Ce=t.FailureHandlingKind||(t.FailureHandlingKind={})).Abort="abort",Ce.Transactional="transactional",Ce.TextOnlyTransactional="textOnlyTransactional",Ce.Undo="undo",(De=t.PositionEncodingKind||(t.PositionEncodingKind={})).UTF8="utf-8",De.UTF16="utf-16",De.UTF32="utf-32",(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})).hasId=function(e){const t=e;return t&&r.string(t.id)&&t.id.length>0},(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})).is=function(e){const t=e;return t&&(null===t.documentSelector||K.is(t.documentSelector))},(we=t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})).is=function(e){const t=e;return r.objectLiteral(t)&&(void 0===t.workDoneProgress||r.boolean(t.workDoneProgress))},we.hasWorkDoneProgress=function(e){const t=e;return t&&r.boolean(t.workDoneProgress)},(Se=t.InitializeRequest||(t.InitializeRequest={})).method="initialize",Se.messageDirection=o.MessageDirection.clientToServer,Se.type=new o.ProtocolRequestType(Se.method),(t.InitializeErrorCodes||(t.InitializeErrorCodes={})).unknownProtocolVersion=1,(Re=t.InitializedNotification||(t.InitializedNotification={})).method="initialized",Re.messageDirection=o.MessageDirection.clientToServer,Re.type=new o.ProtocolNotificationType(Re.method),(Te=t.ShutdownRequest||(t.ShutdownRequest={})).method="shutdown",Te.messageDirection=o.MessageDirection.clientToServer,Te.type=new o.ProtocolRequestType0(Te.method),(ke=t.ExitNotification||(t.ExitNotification={})).method="exit",ke.messageDirection=o.MessageDirection.clientToServer,ke.type=new o.ProtocolNotificationType0(ke.method),(_e=t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})).method="workspace/didChangeConfiguration",_e.messageDirection=o.MessageDirection.clientToServer,_e.type=new o.ProtocolNotificationType(_e.method),(be=t.MessageType||(t.MessageType={})).Error=1,be.Warning=2,be.Info=3,be.Log=4,(ve=t.ShowMessageNotification||(t.ShowMessageNotification={})).method="window/showMessage",ve.messageDirection=o.MessageDirection.serverToClient,ve.type=new o.ProtocolNotificationType(ve.method),(ye=t.ShowMessageRequest||(t.ShowMessageRequest={})).method="window/showMessageRequest",ye.messageDirection=o.MessageDirection.serverToClient,ye.type=new o.ProtocolRequestType(ye.method),(ge=t.LogMessageNotification||(t.LogMessageNotification={})).method="window/logMessage",ge.messageDirection=o.MessageDirection.serverToClient,ge.type=new o.ProtocolNotificationType(ge.method),(me=t.TelemetryEventNotification||(t.TelemetryEventNotification={})).method="telemetry/event",me.messageDirection=o.MessageDirection.serverToClient,me.type=new o.ProtocolNotificationType(me.method),(he=t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})).None=0,he.Full=1,he.Incremental=2,(pe=t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})).method="textDocument/didOpen",pe.messageDirection=o.MessageDirection.clientToServer,pe.type=new o.ProtocolNotificationType(pe.method),(fe=t.TextDocumentContentChangeEvent||(t.TextDocumentContentChangeEvent={})).isIncremental=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},fe.isFull=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},(ue=t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})).method="textDocument/didChange",ue.messageDirection=o.MessageDirection.clientToServer,ue.type=new o.ProtocolNotificationType(ue.method),(de=t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})).method="textDocument/didClose",de.messageDirection=o.MessageDirection.clientToServer,de.type=new o.ProtocolNotificationType(de.method),(le=t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})).method="textDocument/didSave",le.messageDirection=o.MessageDirection.clientToServer,le.type=new o.ProtocolNotificationType(le.method),(ce=t.TextDocumentSaveReason||(t.TextDocumentSaveReason={})).Manual=1,ce.AfterDelay=2,ce.FocusOut=3,(ae=t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})).method="textDocument/willSave",ae.messageDirection=o.MessageDirection.clientToServer,ae.type=new o.ProtocolNotificationType(ae.method),(se=t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})).method="textDocument/willSaveWaitUntil",se.messageDirection=o.MessageDirection.clientToServer,se.type=new o.ProtocolRequestType(se.method),(re=t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})).method="workspace/didChangeWatchedFiles",re.messageDirection=o.MessageDirection.clientToServer,re.type=new o.ProtocolNotificationType(re.method),(ie=t.FileChangeType||(t.FileChangeType={})).Created=1,ie.Changed=2,ie.Deleted=3,(t.RelativePattern||(t.RelativePattern={})).is=function(e){const t=e;return r.objectLiteral(t)&&(i.URI.is(t.baseUri)||i.WorkspaceFolder.is(t.baseUri))&&r.string(t.pattern)},(oe=t.WatchKind||(t.WatchKind={})).Create=1,oe.Change=2,oe.Delete=4,(ne=t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})).method="textDocument/publishDiagnostics",ne.messageDirection=o.MessageDirection.serverToClient,ne.type=new o.ProtocolNotificationType(ne.method),(te=t.CompletionTriggerKind||(t.CompletionTriggerKind={})).Invoked=1,te.TriggerCharacter=2,te.TriggerForIncompleteCompletions=3,(ee=t.CompletionRequest||(t.CompletionRequest={})).method="textDocument/completion",ee.messageDirection=o.MessageDirection.clientToServer,ee.type=new o.ProtocolRequestType(ee.method),(Z=t.CompletionResolveRequest||(t.CompletionResolveRequest={})).method="completionItem/resolve",Z.messageDirection=o.MessageDirection.clientToServer,Z.type=new o.ProtocolRequestType(Z.method),(Y=t.HoverRequest||(t.HoverRequest={})).method="textDocument/hover",Y.messageDirection=o.MessageDirection.clientToServer,Y.type=new o.ProtocolRequestType(Y.method),(J=t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})).Invoked=1,J.TriggerCharacter=2,J.ContentChange=3,(Q=t.SignatureHelpRequest||(t.SignatureHelpRequest={})).method="textDocument/signatureHelp",Q.messageDirection=o.MessageDirection.clientToServer,Q.type=new o.ProtocolRequestType(Q.method),(G=t.DefinitionRequest||(t.DefinitionRequest={})).method="textDocument/definition",G.messageDirection=o.MessageDirection.clientToServer,G.type=new o.ProtocolRequestType(G.method),(X=t.ReferencesRequest||(t.ReferencesRequest={})).method="textDocument/references",X.messageDirection=o.MessageDirection.clientToServer,X.type=new o.ProtocolRequestType(X.method),(z=t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})).method="textDocument/documentHighlight",z.messageDirection=o.MessageDirection.clientToServer,z.type=new o.ProtocolRequestType(z.method),(B=t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})).method="textDocument/documentSymbol",B.messageDirection=o.MessageDirection.clientToServer,B.type=new o.ProtocolRequestType(B.method),(H=t.CodeActionRequest||(t.CodeActionRequest={})).method="textDocument/codeAction",H.messageDirection=o.MessageDirection.clientToServer,H.type=new o.ProtocolRequestType(H.method),(U=t.CodeActionResolveRequest||(t.CodeActionResolveRequest={})).method="codeAction/resolve",U.messageDirection=o.MessageDirection.clientToServer,U.type=new o.ProtocolRequestType(U.method),(V=t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})).method="workspace/symbol",V.messageDirection=o.MessageDirection.clientToServer,V.type=new o.ProtocolRequestType(V.method),($=t.WorkspaceSymbolResolveRequest||(t.WorkspaceSymbolResolveRequest={})).method="workspaceSymbol/resolve",$.messageDirection=o.MessageDirection.clientToServer,$.type=new o.ProtocolRequestType($.method),(W=t.CodeLensRequest||(t.CodeLensRequest={})).method="textDocument/codeLens",W.messageDirection=o.MessageDirection.clientToServer,W.type=new o.ProtocolRequestType(W.method),(I=t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})).method="codeLens/resolve",I.messageDirection=o.MessageDirection.clientToServer,I.type=new o.ProtocolRequestType(I.method),(F=t.CodeLensRefreshRequest||(t.CodeLensRefreshRequest={})).method="workspace/codeLens/refresh",F.messageDirection=o.MessageDirection.serverToClient,F.type=new o.ProtocolRequestType0(F.method),(j=t.DocumentLinkRequest||(t.DocumentLinkRequest={})).method="textDocument/documentLink",j.messageDirection=o.MessageDirection.clientToServer,j.type=new o.ProtocolRequestType(j.method),(L=t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})).method="documentLink/resolve",L.messageDirection=o.MessageDirection.clientToServer,L.type=new o.ProtocolRequestType(L.method),(q=t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})).method="textDocument/formatting",q.messageDirection=o.MessageDirection.clientToServer,q.type=new o.ProtocolRequestType(q.method),(N=t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})).method="textDocument/rangeFormatting",N.messageDirection=o.MessageDirection.clientToServer,N.type=new o.ProtocolRequestType(N.method),(A=t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})).method="textDocument/onTypeFormatting",A.messageDirection=o.MessageDirection.clientToServer,A.type=new o.ProtocolRequestType(A.method),(t.PrepareSupportDefaultBehavior||(t.PrepareSupportDefaultBehavior={})).Identifier=1,(M=t.RenameRequest||(t.RenameRequest={})).method="textDocument/rename",M.messageDirection=o.MessageDirection.clientToServer,M.type=new o.ProtocolRequestType(M.method),(E=t.PrepareRenameRequest||(t.PrepareRenameRequest={})).method="textDocument/prepareRename",E.messageDirection=o.MessageDirection.clientToServer,E.type=new o.ProtocolRequestType(E.method),(P=t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})).method="workspace/executeCommand",P.messageDirection=o.MessageDirection.clientToServer,P.type=new o.ProtocolRequestType(P.method),(O=t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={})).method="workspace/applyEdit",O.messageDirection=o.MessageDirection.serverToClient,O.type=new o.ProtocolRequestType("workspace/applyEdit")},7323:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeRequest=void 0;const o=n(4742);var i;(i=t.LinkedEditingRangeRequest||(t.LinkedEditingRangeRequest={})).method="textDocument/linkedEditingRange",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method)},9219:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=void 0;const o=n(4742);var i,r,s;(s=t.UniquenessLevel||(t.UniquenessLevel={})).document="document",s.project="project",s.group="group",s.scheme="scheme",s.global="global",(r=t.MonikerKind||(t.MonikerKind={})).$import="import",r.$export="export",r.local="local",(i=t.MonikerRequest||(t.MonikerRequest={})).method="textDocument/moniker",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method)},5626:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=void 0;const o=n(2880),i=n(9348),r=n(4742);var s,a,c,l,d,u,f,p,h,m;!function(e){e.Markup=1,e.Code=2,e.is=function(e){return 1===e||2===e}}(s=t.NotebookCellKind||(t.NotebookCellKind={})),function(e){e.create=function(e,t){const n={executionOrder:e};return!0!==t&&!1!==t||(n.success=t),n},e.is=function(e){const t=e;return i.objectLiteral(t)&&o.uinteger.is(t.executionOrder)&&(void 0===t.success||i.boolean(t.success))},e.equals=function(e,t){return e===t||null!=e&&null!=t&&e.executionOrder===t.executionOrder&&e.success===t.success}}(a=t.ExecutionSummary||(t.ExecutionSummary={})),function(e){function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(typeof e!=typeof n)return!1;if("object"!=typeof e)return!1;const o=Array.isArray(e),r=Array.isArray(n);if(o!==r)return!1;if(o&&r){if(e.length!==n.length)return!1;for(let o=0;o<e.length;o++)if(!t(e[o],n[o]))return!1}if(i.objectLiteral(e)&&i.objectLiteral(n)){const o=Object.keys(e),i=Object.keys(n);if(o.length!==i.length)return!1;if(o.sort(),i.sort(),!t(o,i))return!1;for(let i=0;i<o.length;i++){const r=o[i];if(!t(e[r],n[r]))return!1}}return!0}e.create=function(e,t){return{kind:e,document:t}},e.is=function(e){const t=e;return i.objectLiteral(t)&&s.is(t.kind)&&o.DocumentUri.is(t.document)&&(void 0===t.metadata||i.objectLiteral(t.metadata))},e.diff=function(e,n){const o=new Set;return e.document!==n.document&&o.add("document"),e.kind!==n.kind&&o.add("kind"),e.executionSummary!==n.executionSummary&&o.add("executionSummary"),void 0===e.metadata&&void 0===n.metadata||t(e.metadata,n.metadata)||o.add("metadata"),void 0===e.executionSummary&&void 0===n.executionSummary||a.equals(e.executionSummary,n.executionSummary)||o.add("executionSummary"),o}}(c=t.NotebookCell||(t.NotebookCell={})),(m=t.NotebookDocument||(t.NotebookDocument={})).create=function(e,t,n,o){return{uri:e,notebookType:t,version:n,cells:o}},m.is=function(e){const t=e;return i.objectLiteral(t)&&i.string(t.uri)&&o.integer.is(t.version)&&i.typedArray(t.cells,c.is)},function(e){e.method="notebookDocument/sync",e.messageDirection=r.MessageDirection.clientToServer,e.type=new r.RegistrationType(e.method)}(l=t.NotebookDocumentSyncRegistrationType||(t.NotebookDocumentSyncRegistrationType={})),(h=t.DidOpenNotebookDocumentNotification||(t.DidOpenNotebookDocumentNotification={})).method="notebookDocument/didOpen",h.messageDirection=r.MessageDirection.clientToServer,h.type=new r.ProtocolNotificationType(h.method),h.registrationMethod=l.method,(p=t.NotebookCellArrayChange||(t.NotebookCellArrayChange={})).is=function(e){const t=e;return i.objectLiteral(t)&&o.uinteger.is(t.start)&&o.uinteger.is(t.deleteCount)&&(void 0===t.cells||i.typedArray(t.cells,c.is))},p.create=function(e,t,n){const o={start:e,deleteCount:t};return void 0!==n&&(o.cells=n),o},(f=t.DidChangeNotebookDocumentNotification||(t.DidChangeNotebookDocumentNotification={})).method="notebookDocument/didChange",f.messageDirection=r.MessageDirection.clientToServer,f.type=new r.ProtocolNotificationType(f.method),f.registrationMethod=l.method,(u=t.DidSaveNotebookDocumentNotification||(t.DidSaveNotebookDocumentNotification={})).method="notebookDocument/didSave",u.messageDirection=r.MessageDirection.clientToServer,u.type=new r.ProtocolNotificationType(u.method),u.registrationMethod=l.method,(d=t.DidCloseNotebookDocumentNotification||(t.DidCloseNotebookDocumentNotification={})).method="notebookDocument/didClose",d.messageDirection=r.MessageDirection.clientToServer,d.type=new r.ProtocolNotificationType(d.method),d.registrationMethod=l.method},7450:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=void 0;const o=n(1694),i=n(4742);var r,s,a;(a=t.WorkDoneProgress||(t.WorkDoneProgress={})).type=new o.ProgressType,a.is=function(e){return e===a.type},(s=t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})).method="window/workDoneProgress/create",s.messageDirection=i.MessageDirection.serverToClient,s.type=new i.ProtocolRequestType(s.method),(r=t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={})).method="window/workDoneProgress/cancel",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolNotificationType(r.method)},2964:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeRequest=void 0;const o=n(4742);var i;(i=t.SelectionRangeRequest||(t.SelectionRangeRequest={})).method="textDocument/selectionRange",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method)},5402:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.SemanticTokensRegistrationType=t.TokenFormat=void 0;const o=n(4742);var i,r,s,a,c;(t.TokenFormat||(t.TokenFormat={})).Relative="relative",function(e){e.method="textDocument/semanticTokens",e.type=new o.RegistrationType(e.method)}(i=t.SemanticTokensRegistrationType||(t.SemanticTokensRegistrationType={})),(c=t.SemanticTokensRequest||(t.SemanticTokensRequest={})).method="textDocument/semanticTokens/full",c.messageDirection=o.MessageDirection.clientToServer,c.type=new o.ProtocolRequestType(c.method),c.registrationMethod=i.method,(a=t.SemanticTokensDeltaRequest||(t.SemanticTokensDeltaRequest={})).method="textDocument/semanticTokens/full/delta",a.messageDirection=o.MessageDirection.clientToServer,a.type=new o.ProtocolRequestType(a.method),a.registrationMethod=i.method,(s=t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={})).method="textDocument/semanticTokens/range",s.messageDirection=o.MessageDirection.clientToServer,s.type=new o.ProtocolRequestType(s.method),s.registrationMethod=i.method,(r=t.SemanticTokensRefreshRequest||(t.SemanticTokensRefreshRequest={})).method="workspace/semanticTokens/refresh",r.messageDirection=o.MessageDirection.clientToServer,r.type=new o.ProtocolRequestType0(r.method)},903:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentRequest=void 0;const o=n(4742);var i;(i=t.ShowDocumentRequest||(t.ShowDocumentRequest={})).method="window/showDocument",i.messageDirection=o.MessageDirection.serverToClient,i.type=new o.ProtocolRequestType(i.method)},8685:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionRequest=void 0;const o=n(4742);var i;(i=t.TypeDefinitionRequest||(t.TypeDefinitionRequest={})).method="textDocument/typeDefinition",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method)},9970:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHierarchySubtypesRequest=t.TypeHierarchySupertypesRequest=t.TypeHierarchyPrepareRequest=void 0;const o=n(4742);var i,r,s;(s=t.TypeHierarchyPrepareRequest||(t.TypeHierarchyPrepareRequest={})).method="textDocument/prepareTypeHierarchy",s.messageDirection=o.MessageDirection.clientToServer,s.type=new o.ProtocolRequestType(s.method),(r=t.TypeHierarchySupertypesRequest||(t.TypeHierarchySupertypesRequest={})).method="typeHierarchy/supertypes",r.messageDirection=o.MessageDirection.clientToServer,r.type=new o.ProtocolRequestType(r.method),(i=t.TypeHierarchySubtypesRequest||(t.TypeHierarchySubtypesRequest={})).method="typeHierarchy/subtypes",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolRequestType(i.method)},6098:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=void 0;const o=n(4742);var i,r;(r=t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})).method="workspace/workspaceFolders",r.messageDirection=o.MessageDirection.serverToClient,r.type=new o.ProtocolRequestType0(r.method),(i=t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={})).method="workspace/didChangeWorkspaceFolders",i.messageDirection=o.MessageDirection.clientToServer,i.type=new o.ProtocolNotificationType(i.method)},9348:(e,t)=>{function n(e){return"string"==typeof e||e instanceof String}function o(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.objectLiteral=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=o,t.stringArray=function(e){return o(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},7745:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const r=n(2659);i(n(2659),t),i(n(559),t),t.createProtocolConnection=function(e,t,n,o){return(0,r.createMessageConnection)(e,t,n,o)}},4057:(e,t,n)=>{e.exports=n(7745)},6288:(e,t,n)=>{n.r(t),n.d(t,{TextDocument:()=>o});var o,i=function(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||(o||(o=Array.prototype.slice.call(t,0,i)),o[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))},r=function(){function e(e,t,n,o){this._uri=e,this._languageId=t,this._version=n,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(t,n){for(var o=0,r=t;o<r.length;o++){var s=r[o];if(e.isIncremental(s)){var l=c(s.range),d=this.offsetAt(l.start),u=this.offsetAt(l.end);this._content=this._content.substring(0,d)+s.text+this._content.substring(u,this._content.length);var f=Math.max(l.start.line,0),p=Math.max(l.end.line,0),h=this._lineOffsets,m=a(s.text,!1,d);if(p-f===m.length)for(var g=0,y=m.length;g<y;g++)h[g+f+1]=m[g];else m.length<1e4?h.splice.apply(h,i([f+1,p-f],m,!1)):this._lineOffsets=h=h.slice(0,f+1).concat(m,h.slice(p+1));var v=s.text.length-(u-d);if(0!==v)for(g=f+1+m.length,y=h.length;g<y;g++)h[g]=h[g]+v}else{if(!e.isFull(s))throw new Error("Unknown change event received");this._content=s.text,this._lineOffsets=void 0}}this._version=n},e.prototype.getLineOffsets=function(){return void 0===this._lineOffsets&&(this._lineOffsets=a(this._content,!0)),this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,o=t.length;if(0===o)return{line:0,character:e};for(;n<o;){var i=Math.floor((n+o)/2);t[i]>e?o=i:n=i+1}var r=n-1;return{line:r,character:e-t[r]}},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],o=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,o),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e.isIncremental=function(e){var t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},e.isFull=function(e){var t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},e}();function s(e,t){if(e.length<=1)return e;var n=e.length/2|0,o=e.slice(0,n),i=e.slice(n);s(o,t),s(i,t);for(var r=0,a=0,c=0;r<o.length&&a<i.length;){var l=t(o[r],i[a]);e[c++]=l<=0?o[r++]:i[a++]}for(;r<o.length;)e[c++]=o[r++];for(;a<i.length;)e[c++]=i[a++];return e}function a(e,t,n){void 0===n&&(n=0);for(var o=t?[n]:[],i=0;i<e.length;i++){var r=e.charCodeAt(i);13!==r&&10!==r||(13===r&&i+1<e.length&&10===e.charCodeAt(i+1)&&i++,o.push(n+i+1))}return o}function c(e){var t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function l(e){var t=c(e.range);return t!==e.range?{newText:e.newText,range:t}:e}!function(e){e.create=function(e,t,n,o){return new r(e,t,n,o)},e.update=function(e,t,n){if(e instanceof r)return e.update(t,n),e;throw new Error("TextDocument.update: document must be created by TextDocument.create")},e.applyEdits=function(e,t){for(var n=e.getText(),o=0,i=[],r=0,a=s(t.map(l),(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}));r<a.length;r++){var c=a[r],d=e.offsetAt(c.range.start);if(d<o)throw new Error("Overlapping edit");d>o&&i.push(n.substring(o,d)),c.newText.length&&i.push(c.newText),o=e.offsetAt(c.range.end)}return i.push(n.substr(o)),i.join("")}}(o||(o={}))},2880:(e,t,n)=>{var o,i,r,s,a,c,l,d,u,f,p,h,m,g,y,v,b,_,k,T,R,S,w,D,C,x,K,O;n.r(t),n.d(t,{AnnotatedTextEdit:()=>w,ChangeAnnotation:()=>R,ChangeAnnotationIdentifier:()=>S,CodeAction:()=>re,CodeActionContext:()=>ie,CodeActionKind:()=>ne,CodeActionTriggerKind:()=>oe,CodeDescription:()=>b,CodeLens:()=>se,Color:()=>u,ColorInformation:()=>f,ColorPresentation:()=>p,Command:()=>k,CompletionItem:()=>V,CompletionItemKind:()=>L,CompletionItemLabelDetails:()=>$,CompletionItemTag:()=>F,CompletionList:()=>U,CreateFile:()=>C,DeleteFile:()=>K,Diagnostic:()=>_,DiagnosticRelatedInformation:()=>g,DiagnosticSeverity:()=>y,DiagnosticTag:()=>v,DocumentHighlight:()=>Q,DocumentHighlightKind:()=>G,DocumentLink:()=>ce,DocumentSymbol:()=>te,DocumentUri:()=>o,EOL:()=>we,FoldingRange:()=>m,FoldingRangeKind:()=>h,FormattingOptions:()=>ae,Hover:()=>B,InlayHint:()=>be,InlayHintKind:()=>ye,InlayHintLabelPart:()=>ve,InlineValueContext:()=>ge,InlineValueEvaluatableExpression:()=>me,InlineValueText:()=>pe,InlineValueVariableLookup:()=>he,InsertReplaceEdit:()=>I,InsertTextFormat:()=>j,InsertTextMode:()=>W,Location:()=>l,LocationLink:()=>d,MarkedString:()=>H,MarkupContent:()=>q,MarkupKind:()=>N,OptionalVersionedTextDocumentIdentifier:()=>M,ParameterInformation:()=>z,Position:()=>a,Range:()=>c,RenameFile:()=>x,SelectionRange:()=>le,SemanticTokenModifiers:()=>ue,SemanticTokenTypes:()=>de,SemanticTokens:()=>fe,SignatureInformation:()=>X,SymbolInformation:()=>Z,SymbolKind:()=>J,SymbolTag:()=>Y,TextDocument:()=>Se,TextDocumentEdit:()=>D,TextDocumentIdentifier:()=>P,TextDocumentItem:()=>A,TextEdit:()=>T,URI:()=>i,VersionedTextDocumentIdentifier:()=>E,WorkspaceChange:()=>Re,WorkspaceEdit:()=>O,WorkspaceFolder:()=>_e,WorkspaceSymbol:()=>ee,integer:()=>r,uinteger:()=>s}),function(e){e.is=function(e){return"string"==typeof e}}(o||(o={})),function(e){e.is=function(e){return"string"==typeof e}}(i||(i={})),function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(r||(r={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647,e.is=function(t){return"number"==typeof t&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}}(s||(s={})),function(e){e.create=function(e,t){return e===Number.MAX_VALUE&&(e=s.MAX_VALUE),t===Number.MAX_VALUE&&(t=s.MAX_VALUE),{line:e,character:t}},e.is=function(e){var t=e;return De.objectLiteral(t)&&De.uinteger(t.line)&&De.uinteger(t.character)}}(a||(a={})),function(e){e.create=function(e,t,n,o){if(De.uinteger(e)&&De.uinteger(t)&&De.uinteger(n)&&De.uinteger(o))return{start:a.create(e,t),end:a.create(n,o)};if(a.is(e)&&a.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments[".concat(e,", ").concat(t,", ").concat(n,", ").concat(o,"]"))},e.is=function(e){var t=e;return De.objectLiteral(t)&&a.is(t.start)&&a.is(t.end)}}(c||(c={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return De.objectLiteral(t)&&c.is(t.range)&&(De.string(t.uri)||De.undefined(t.uri))}}(l||(l={})),function(e){e.create=function(e,t,n,o){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:o}},e.is=function(e){var t=e;return De.objectLiteral(t)&&c.is(t.targetRange)&&De.string(t.targetUri)&&c.is(t.targetSelectionRange)&&(c.is(t.originSelectionRange)||De.undefined(t.originSelectionRange))}}(d||(d={})),function(e){e.create=function(e,t,n,o){return{red:e,green:t,blue:n,alpha:o}},e.is=function(e){var t=e;return De.objectLiteral(t)&&De.numberRange(t.red,0,1)&&De.numberRange(t.green,0,1)&&De.numberRange(t.blue,0,1)&&De.numberRange(t.alpha,0,1)}}(u||(u={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return De.objectLiteral(t)&&c.is(t.range)&&u.is(t.color)}}(f||(f={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return De.objectLiteral(t)&&De.string(t.label)&&(De.undefined(t.textEdit)||T.is(t))&&(De.undefined(t.additionalTextEdits)||De.typedArray(t.additionalTextEdits,T.is))}}(p||(p={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(h||(h={})),function(e){e.create=function(e,t,n,o,i,r){var s={startLine:e,endLine:t};return De.defined(n)&&(s.startCharacter=n),De.defined(o)&&(s.endCharacter=o),De.defined(i)&&(s.kind=i),De.defined(r)&&(s.collapsedText=r),s},e.is=function(e){var t=e;return De.objectLiteral(t)&&De.uinteger(t.startLine)&&De.uinteger(t.startLine)&&(De.undefined(t.startCharacter)||De.uinteger(t.startCharacter))&&(De.undefined(t.endCharacter)||De.uinteger(t.endCharacter))&&(De.undefined(t.kind)||De.string(t.kind))}}(m||(m={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return De.defined(t)&&l.is(t.location)&&De.string(t.message)}}(g||(g={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(y||(y={})),function(e){e.Unnecessary=1,e.Deprecated=2}(v||(v={})),function(e){e.is=function(e){var t=e;return De.objectLiteral(t)&&De.string(t.href)}}(b||(b={})),function(e){e.create=function(e,t,n,o,i,r){var s={range:e,message:t};return De.defined(n)&&(s.severity=n),De.defined(o)&&(s.code=o),De.defined(i)&&(s.source=i),De.defined(r)&&(s.relatedInformation=r),s},e.is=function(e){var t,n=e;return De.defined(n)&&c.is(n.range)&&De.string(n.message)&&(De.number(n.severity)||De.undefined(n.severity))&&(De.integer(n.code)||De.string(n.code)||De.undefined(n.code))&&(De.undefined(n.codeDescription)||De.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(De.string(n.source)||De.undefined(n.source))&&(De.undefined(n.relatedInformation)||De.typedArray(n.relatedInformation,g.is))}}(_||(_={})),function(e){e.create=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i={title:e,command:t};return De.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return De.defined(t)&&De.string(t.title)&&De.string(t.command)}}(k||(k={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return De.objectLiteral(t)&&De.string(t.newText)&&c.is(t.range)}}(T||(T={})),function(e){e.create=function(e,t,n){var o={label:e};return void 0!==t&&(o.needsConfirmation=t),void 0!==n&&(o.description=n),o},e.is=function(e){var t=e;return De.objectLiteral(t)&&De.string(t.label)&&(De.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(De.string(t.description)||void 0===t.description)}}(R||(R={})),function(e){e.is=function(e){var t=e;return De.string(t)}}(S||(S={})),function(e){e.replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},e.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},e.del=function(e,t){return{range:e,newText:"",annotationId:t}},e.is=function(e){var t=e;return T.is(t)&&(R.is(t.annotationId)||S.is(t.annotationId))}}(w||(w={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return De.defined(t)&&M.is(t.textDocument)&&Array.isArray(t.edits)}}(D||(D={})),function(e){e.create=function(e,t,n){var o={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(o.options=t),void 0!==n&&(o.annotationId=n),o},e.is=function(e){var t=e;return t&&"create"===t.kind&&De.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||De.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||De.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||S.is(t.annotationId))}}(C||(C={})),function(e){e.create=function(e,t,n,o){var i={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(i.options=n),void 0!==o&&(i.annotationId=o),i},e.is=function(e){var t=e;return t&&"rename"===t.kind&&De.string(t.oldUri)&&De.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||De.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||De.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||S.is(t.annotationId))}}(x||(x={})),function(e){e.create=function(e,t,n){var o={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(o.options=t),void 0!==n&&(o.annotationId=n),o},e.is=function(e){var t=e;return t&&"delete"===t.kind&&De.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||De.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||De.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||S.is(t.annotationId))}}(K||(K={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return De.string(e.kind)?C.is(e)||x.is(e)||K.is(e):D.is(e)})))}}(O||(O={}));var P,E,M,A,N,q,L,j,F,I,W,$,V,U,H,B,z,X,G,Q,J,Y,Z,ee,te,ne,oe,ie,re,se,ae,ce,le,de,ue,fe,pe,he,me,ge,ye,ve,be,_e,ke=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var o,i;if(void 0===n?o=T.insert(e,t):S.is(n)?(i=n,o=w.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),o=w.insert(e,t,i)),this.edits.push(o),void 0!==i)return i},e.prototype.replace=function(e,t,n){var o,i;if(void 0===n?o=T.replace(e,t):S.is(n)?(i=n,o=w.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),o=w.replace(e,t,i)),this.edits.push(o),void 0!==i)return i},e.prototype.delete=function(e,t){var n,o;if(void 0===t?n=T.del(e):S.is(t)?(o=t,n=w.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(t),n=w.del(e,o)),this.edits.push(n),void 0!==o)return o},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),Te=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if(S.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error("Id ".concat(n," is already in use."));if(void 0===t)throw new Error("No annotation provided for id ".concat(n));return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),Re=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new Te(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((function(e){if(D.is(e)){var n=new ke(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}}))):e.changes&&Object.keys(e.changes).forEach((function(n){var o=new ke(e.changes[n]);t._textEditChanges[n]=o}))):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(M.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version};if(!(o=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),o=new ke(i,this._changeAnnotations),this._textEditChanges[t.uri]=o}return o}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var o;if(!(o=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,o=new ke(i),this._textEditChanges[e]=o}return o},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new Te,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var o,i,r;if(R.is(t)||S.is(t)?o=t:n=t,void 0===o?i=C.create(e,n):(r=S.is(o)?o:this._changeAnnotations.manage(o),i=C.create(e,n,r)),this._workspaceEdit.documentChanges.push(i),void 0!==r)return r},e.prototype.renameFile=function(e,t,n,o){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,r,s;if(R.is(n)||S.is(n)?i=n:o=n,void 0===i?r=x.create(e,t,o):(s=S.is(i)?i:this._changeAnnotations.manage(i),r=x.create(e,t,o,s)),this._workspaceEdit.documentChanges.push(r),void 0!==s)return s},e.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var o,i,r;if(R.is(t)||S.is(t)?o=t:n=t,void 0===o?i=K.create(e,n):(r=S.is(o)?o:this._changeAnnotations.manage(o),i=K.create(e,n,r)),this._workspaceEdit.documentChanges.push(i),void 0!==r)return r},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return De.defined(t)&&De.string(t.uri)}}(P||(P={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return De.defined(t)&&De.string(t.uri)&&De.integer(t.version)}}(E||(E={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return De.defined(t)&&De.string(t.uri)&&(null===t.version||De.integer(t.version))}}(M||(M={})),function(e){e.create=function(e,t,n,o){return{uri:e,languageId:t,version:n,text:o}},e.is=function(e){var t=e;return De.defined(t)&&De.string(t.uri)&&De.string(t.languageId)&&De.integer(t.version)&&De.string(t.text)}}(A||(A={})),function(e){e.PlainText="plaintext",e.Markdown="markdown",e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(N||(N={})),function(e){e.is=function(e){var t=e;return De.objectLiteral(e)&&N.is(t.kind)&&De.string(t.value)}}(q||(q={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(L||(L={})),function(e){e.PlainText=1,e.Snippet=2}(j||(j={})),function(e){e.Deprecated=1}(F||(F={})),function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){var t=e;return t&&De.string(t.newText)&&c.is(t.insert)&&c.is(t.replace)}}(I||(I={})),function(e){e.asIs=1,e.adjustIndentation=2}(W||(W={})),function(e){e.is=function(e){var t=e;return t&&(De.string(t.detail)||void 0===t.detail)&&(De.string(t.description)||void 0===t.description)}}($||($={})),function(e){e.create=function(e){return{label:e}}}(V||(V={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(U||(U={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return De.string(t)||De.objectLiteral(t)&&De.string(t.language)&&De.string(t.value)}}(H||(H={})),function(e){e.is=function(e){var t=e;return!!t&&De.objectLiteral(t)&&(q.is(t.contents)||H.is(t.contents)||De.typedArray(t.contents,H.is))&&(void 0===e.range||c.is(e.range))}}(B||(B={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(z||(z={})),function(e){e.create=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i={label:e};return De.defined(t)&&(i.documentation=t),De.defined(n)?i.parameters=n:i.parameters=[],i}}(X||(X={})),function(e){e.Text=1,e.Read=2,e.Write=3}(G||(G={})),function(e){e.create=function(e,t){var n={range:e};return De.number(t)&&(n.kind=t),n}}(Q||(Q={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(J||(J={})),function(e){e.Deprecated=1}(Y||(Y={})),function(e){e.create=function(e,t,n,o,i){var r={name:e,kind:t,location:{uri:o,range:n}};return i&&(r.containerName=i),r}}(Z||(Z={})),function(e){e.create=function(e,t,n,o){return void 0!==o?{name:e,kind:t,location:{uri:n,range:o}}:{name:e,kind:t,location:{uri:n}}}}(ee||(ee={})),function(e){e.create=function(e,t,n,o,i,r){var s={name:e,detail:t,kind:n,range:o,selectionRange:i};return void 0!==r&&(s.children=r),s},e.is=function(e){var t=e;return t&&De.string(t.name)&&De.number(t.kind)&&c.is(t.range)&&c.is(t.selectionRange)&&(void 0===t.detail||De.string(t.detail))&&(void 0===t.deprecated||De.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(te||(te={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(ne||(ne={})),function(e){e.Invoked=1,e.Automatic=2}(oe||(oe={})),function(e){e.create=function(e,t,n){var o={diagnostics:e};return null!=t&&(o.only=t),null!=n&&(o.triggerKind=n),o},e.is=function(e){var t=e;return De.defined(t)&&De.typedArray(t.diagnostics,_.is)&&(void 0===t.only||De.typedArray(t.only,De.string))&&(void 0===t.triggerKind||t.triggerKind===oe.Invoked||t.triggerKind===oe.Automatic)}}(ie||(ie={})),function(e){e.create=function(e,t,n){var o={title:e},i=!0;return"string"==typeof t?(i=!1,o.kind=t):k.is(t)?o.command=t:o.edit=t,i&&void 0!==n&&(o.kind=n),o},e.is=function(e){var t=e;return t&&De.string(t.title)&&(void 0===t.diagnostics||De.typedArray(t.diagnostics,_.is))&&(void 0===t.kind||De.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||k.is(t.command))&&(void 0===t.isPreferred||De.boolean(t.isPreferred))&&(void 0===t.edit||O.is(t.edit))}}(re||(re={})),function(e){e.create=function(e,t){var n={range:e};return De.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return De.defined(t)&&c.is(t.range)&&(De.undefined(t.command)||k.is(t.command))}}(se||(se={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return De.defined(t)&&De.uinteger(t.tabSize)&&De.boolean(t.insertSpaces)}}(ae||(ae={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return De.defined(t)&&c.is(t.range)&&(De.undefined(t.target)||De.string(t.target))}}(ce||(ce={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return De.objectLiteral(n)&&c.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(le||(le={})),function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"}(de||(de={})),function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"}(ue||(ue={})),function(e){e.is=function(e){var t=e;return De.objectLiteral(t)&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])}}(fe||(fe={})),function(e){e.create=function(e,t){return{range:e,text:t}},e.is=function(e){var t=e;return null!=t&&c.is(t.range)&&De.string(t.text)}}(pe||(pe={})),function(e){e.create=function(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}},e.is=function(e){var t=e;return null!=t&&c.is(t.range)&&De.boolean(t.caseSensitiveLookup)&&(De.string(t.variableName)||void 0===t.variableName)}}(he||(he={})),function(e){e.create=function(e,t){return{range:e,expression:t}},e.is=function(e){var t=e;return null!=t&&c.is(t.range)&&(De.string(t.expression)||void 0===t.expression)}}(me||(me={})),function(e){e.create=function(e,t){return{frameId:e,stoppedLocation:t}},e.is=function(e){var t=e;return De.defined(t)&&c.is(e.stoppedLocation)}}(ge||(ge={})),function(e){e.Type=1,e.Parameter=2,e.is=function(e){return 1===e||2===e}}(ye||(ye={})),function(e){e.create=function(e){return{value:e}},e.is=function(e){var t=e;return De.objectLiteral(t)&&(void 0===t.tooltip||De.string(t.tooltip)||q.is(t.tooltip))&&(void 0===t.location||l.is(t.location))&&(void 0===t.command||k.is(t.command))}}(ve||(ve={})),function(e){e.create=function(e,t,n){var o={position:e,label:t};return void 0!==n&&(o.kind=n),o},e.is=function(e){var t=e;return De.objectLiteral(t)&&a.is(t.position)&&(De.string(t.label)||De.typedArray(t.label,ve.is))&&(void 0===t.kind||ye.is(t.kind))&&void 0===t.textEdits||De.typedArray(t.textEdits,T.is)&&(void 0===t.tooltip||De.string(t.tooltip)||q.is(t.tooltip))&&(void 0===t.paddingLeft||De.boolean(t.paddingLeft))&&(void 0===t.paddingRight||De.boolean(t.paddingRight))}}(be||(be={})),function(e){e.is=function(e){var t=e;return De.objectLiteral(t)&&i.is(t.uri)&&De.string(t.name)}}(_e||(_e={}));var Se,we=["\n","\r\n","\r"];!function(e){function t(e,n){if(e.length<=1)return e;var o=e.length/2|0,i=e.slice(0,o),r=e.slice(o);t(i,n),t(r,n);for(var s=0,a=0,c=0;s<i.length&&a<r.length;){var l=n(i[s],r[a]);e[c++]=l<=0?i[s++]:r[a++]}for(;s<i.length;)e[c++]=i[s++];for(;a<r.length;)e[c++]=r[a++];return e}e.create=function(e,t,n,o){return new Ce(e,t,n,o)},e.is=function(e){var t=e;return!!(De.defined(t)&&De.string(t.uri)&&(De.undefined(t.languageId)||De.string(t.languageId))&&De.uinteger(t.lineCount)&&De.func(t.getText)&&De.func(t.positionAt)&&De.func(t.offsetAt))},e.applyEdits=function(e,n){for(var o=e.getText(),i=t(n,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),r=o.length,s=i.length-1;s>=0;s--){var a=i[s],c=e.offsetAt(a.range.start),l=e.offsetAt(a.range.end);if(!(l<=r))throw new Error("Overlapping edit");o=o.substring(0,c)+a.newText+o.substring(l,o.length),r=c}return o}}(Se||(Se={}));var De,Ce=function(){function e(e,t,n,o){this._uri=e,this._languageId=t,this._version=n,this._content=o,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,o=0;o<t.length;o++){n&&(e.push(o),n=!1);var i=t.charAt(o);n="\r"===i||"\n"===i,"\r"===i&&o+1<t.length&&"\n"===t.charAt(o+1)&&o++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,o=t.length;if(0===o)return a.create(0,e);for(;n<o;){var i=Math.floor((n+o)/2);t[i]>e?o=i:n=i+1}var r=n-1;return a.create(r,e-t[r])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],o=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,o),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,o){return"[object Number]"===t.call(e)&&n<=e&&e<=o},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(De||(De={}))},9936:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProposedFeatures=t.NotebookDocuments=t.TextDocuments=t.SemanticTokensBuilder=void 0;const r=n(7255);Object.defineProperty(t,"SemanticTokensBuilder",{enumerable:!0,get:function(){return r.SemanticTokensBuilder}}),i(n(7745),t);const s=n(7086);Object.defineProperty(t,"TextDocuments",{enumerable:!0,get:function(){return s.TextDocuments}});const a=n(5083);Object.defineProperty(t,"NotebookDocuments",{enumerable:!0,get:function(){return a.NotebookDocuments}}),i(n(6717),t),(t.ProposedFeatures||(t.ProposedFeatures={})).all={__brand:"features"}},4225:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyFeature=void 0;const o=n(7745);t.CallHierarchyFeature=e=>class extends e{get callHierarchy(){return{onPrepare:e=>this.connection.onRequest(o.CallHierarchyPrepareRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0))),onIncomingCalls:e=>{const t=o.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onOutgoingCalls:e=>{const t=o.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}}},3606:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationFeature=void 0;const o=n(7745),i=n(6960);t.ConfigurationFeature=e=>class extends e{getConfiguration(e){return e?i.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(o.ConfigurationRequest.type,t).then((t=>Array.isArray(t)?Array.isArray(e)?t:t[0]:Array.isArray(e)?[]:null))}}},2473:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticFeature=void 0;const o=n(7745);t.DiagnosticFeature=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(o.DiagnosticRefreshRequest.type),on:e=>this.connection.onRequest(o.DocumentDiagnosticRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(o.DocumentDiagnosticRequest.partialResult,t)))),onWorkspace:e=>this.connection.onRequest(o.WorkspaceDiagnosticRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),this.attachPartialResultProgress(o.WorkspaceDiagnosticRequest.partialResult,t))))}}}},7695:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FileOperationsFeature=void 0;const o=n(7745);t.FileOperationsFeature=e=>class extends e{onDidCreateFiles(e){return this.connection.onNotification(o.DidCreateFilesNotification.type,(t=>{e(t)}))}onDidRenameFiles(e){return this.connection.onNotification(o.DidRenameFilesNotification.type,(t=>{e(t)}))}onDidDeleteFiles(e){return this.connection.onNotification(o.DidDeleteFilesNotification.type,(t=>{e(t)}))}onWillCreateFiles(e){return this.connection.onRequest(o.WillCreateFilesRequest.type,((t,n)=>e(t,n)))}onWillRenameFiles(e){return this.connection.onRequest(o.WillRenameFilesRequest.type,((t,n)=>e(t,n)))}onWillDeleteFiles(e){return this.connection.onRequest(o.WillDeleteFilesRequest.type,((t,n)=>e(t,n)))}}},8339:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InlayHintFeature=void 0;const o=n(7745);t.InlayHintFeature=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(o.InlayHintRefreshRequest.type),on:e=>this.connection.onRequest(o.InlayHintRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t)))),resolve:e=>this.connection.onRequest(o.InlayHintResolveRequest.type,((t,n)=>e(t,n)))}}}},8714:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InlineValueFeature=void 0;const o=n(7745);t.InlineValueFeature=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(o.InlineValueRefreshRequest.type),on:e=>this.connection.onRequest(o.InlineValueRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t))))}}}},7129:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeFeature=void 0;const o=n(7745);t.LinkedEditingRangeFeature=e=>class extends e{onLinkedEditingRange(e){return this.connection.onRequest(o.LinkedEditingRangeRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)))}}},8535:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerFeature=void 0;const o=n(7745);t.MonikerFeature=e=>class extends e{get moniker(){return{on:e=>{const t=o.MonikerRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}}},5083:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NotebookDocuments=t.NotebookSyncFeature=void 0;const o=n(7745),i=n(7086);t.NotebookSyncFeature=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:e=>this.connection.onNotification(o.DidOpenNotebookDocumentNotification.type,(t=>{e(t)})),onDidChangeNotebookDocument:e=>this.connection.onNotification(o.DidChangeNotebookDocumentNotification.type,(t=>{e(t)})),onDidSaveNotebookDocument:e=>this.connection.onNotification(o.DidSaveNotebookDocumentNotification.type,(t=>{e(t)})),onDidCloseNotebookDocument:e=>this.connection.onNotification(o.DidCloseNotebookDocumentNotification.type,(t=>{e(t)}))}}};class r{onDidOpenTextDocument(e){return this.openHandler=e,o.Disposable.create((()=>{this.openHandler=void 0}))}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,o.Disposable.create((()=>{this.changeHandler=e}))}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,o.Disposable.create((()=>{this.closeHandler=void 0}))}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return r.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return r.NULL_DISPOSE}onDidSaveTextDocument(){return r.NULL_DISPOSE}}r.NULL_DISPOSE=Object.freeze({dispose:()=>{}}),t.NotebookDocuments=class{constructor(e){e instanceof i.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new i.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new o.Emitter,this._onDidChange=new o.Emitter,this._onDidSave=new o.Emitter,this._onDidClose=new o.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){const t=this.notebookCellMap.get(e);return t&&t[0]}findNotebookDocumentForCell(e){const t="string"==typeof e?e:e.document,n=this.notebookCellMap.get(t);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){const t=new r,n=[];return n.push(this.cellTextDocuments.listen(t)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument((e=>{this.notebookDocuments.set(e.notebookDocument.uri,e.notebookDocument);for(const n of e.cellTextDocuments)t.openTextDocument({textDocument:n});this.updateCellMap(e.notebookDocument),this._onDidOpen.fire(e.notebookDocument)}))),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument((e=>{const n=this.notebookDocuments.get(e.notebookDocument.uri);if(void 0===n)return;n.version=e.notebookDocument.version;const o=n.metadata;let i=!1;const r=e.change;void 0!==r.metadata&&(i=!0,n.metadata=r.metadata);const s=[],a=[],c=[],l=[];if(void 0!==r.cells){const e=r.cells;if(void 0!==e.structure){const o=e.structure.array;if(n.cells.splice(o.start,o.deleteCount,...void 0!==o.cells?o.cells:[]),void 0!==e.structure.didOpen)for(const n of e.structure.didOpen)t.openTextDocument({textDocument:n}),s.push(n.uri);if(e.structure.didClose)for(const n of e.structure.didClose)t.closeTextDocument({textDocument:n}),a.push(n.uri)}if(void 0!==e.data){const t=new Map(e.data.map((e=>[e.document,e])));for(let e=0;e<=n.cells.length;e++){const o=t.get(n.cells[e].document);if(void 0!==o){const i=n.cells.splice(e,1,o);if(c.push({old:i[0],new:o}),t.delete(o.document),0===t.size)break}}}if(void 0!==e.textContent)for(const n of e.textContent)t.changeTextDocument({textDocument:n.document,contentChanges:n.changes}),l.push(n.document.uri)}this.updateCellMap(n);const d={notebookDocument:n};i&&(d.metadata={old:o,new:n.metadata});const u=[];for(const e of s)u.push(this.getNotebookCell(e));const f=[];for(const e of a)f.push(this.getNotebookCell(e));const p=[];for(const e of l)p.push(this.getNotebookCell(e));(u.length>0||f.length>0||c.length>0||p.length>0)&&(d.cells={added:u,removed:f,changed:{data:c,textContent:p}}),void 0===d.metadata&&void 0===d.cells||this._onDidChange.fire(d)}))),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument((e=>{const t=this.notebookDocuments.get(e.notebookDocument.uri);void 0!==t&&this._onDidSave.fire(t)}))),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument((e=>{const n=this.notebookDocuments.get(e.notebookDocument.uri);if(void 0!==n){this._onDidClose.fire(n);for(const n of e.cellTextDocuments)t.closeTextDocument({textDocument:n});this.notebookDocuments.delete(e.notebookDocument.uri);for(const e of n.cells)this.notebookCellMap.delete(e.document)}}))),o.Disposable.create((()=>{n.forEach((e=>e.dispose()))}))}updateCellMap(e){for(const t of e.cells)this.notebookCellMap.set(t.document,[t,e])}}},3787:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.attachPartialResult=t.ProgressFeature=t.attachWorkDone=void 0;const o=n(7745),i=n(7867);class r{constructor(e,t){this._connection=e,this._token=t,r.Instances.set(this._token,this)}begin(e,t,n,i){let r={kind:"begin",title:e,percentage:t,message:n,cancellable:i};this._connection.sendProgress(o.WorkDoneProgress.type,this._token,r)}report(e,t){let n={kind:"report"};"number"==typeof e?(n.percentage=e,void 0!==t&&(n.message=t)):n.message=e,this._connection.sendProgress(o.WorkDoneProgress.type,this._token,n)}done(){r.Instances.delete(this._token),this._connection.sendProgress(o.WorkDoneProgress.type,this._token,{kind:"end"})}}r.Instances=new Map;class s extends r{constructor(e,t){super(e,t),this._source=new o.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class a{constructor(){}begin(){}report(){}done(){}}class c extends a{constructor(){super(),this._source=new o.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}var l;t.attachWorkDone=function(e,t){if(void 0===t||void 0===t.workDoneToken)return new a;const n=t.workDoneToken;return delete t.workDoneToken,new r(e,n)},t.ProgressFeature=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),!0===e?.window?.workDoneProgress&&(this._progressSupported=!0,this.connection.onNotification(o.WorkDoneProgressCancelNotification.type,(e=>{let t=r.Instances.get(e.token);(t instanceof s||t instanceof c)&&t.cancel()})))}attachWorkDoneProgress(e){return void 0===e?new a:new r(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){const e=(0,i.generateUuid)();return this.connection.sendRequest(o.WorkDoneProgressCreateRequest.type,{token:e}).then((()=>new s(this.connection,e)))}return Promise.resolve(new c)}},function(e){e.type=new o.ProgressType}(l||(l={}));class d{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(l.type,this._token,e)}}t.attachPartialResult=function(e,t){if(void 0===t||void 0===t.partialResultToken)return;const n=t.partialResultToken;return delete t.partialResultToken,new d(e,n)}},7255:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensBuilder=t.SemanticTokensDiff=t.SemanticTokensFeature=void 0;const o=n(7745);t.SemanticTokensFeature=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(o.SemanticTokensRefreshRequest.type),on:e=>{const t=o.SemanticTokensRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onDelta:e=>{const t=o.SemanticTokensDeltaRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onRange:e=>{const t=o.SemanticTokensRangeRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}};class i{constructor(e,t){this.originalSequence=e,this.modifiedSequence=t}computeDiff(){const e=this.originalSequence.length,t=this.modifiedSequence.length;let n=0;for(;n<t&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<t&&n<e){let o=e-1,i=t-1;for(;o>=n&&i>=n&&this.originalSequence[o]===this.modifiedSequence[i];)o--,i--;(o<n||i<n)&&(o++,i++);const r=o-n+1,s=this.modifiedSequence.slice(n,i+1);return 1===s.length&&s[0]===this.originalSequence[o]?[{start:n,deleteCount:r-1}]:[{start:n,deleteCount:r,data:s}]}return n<t?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}}t.SemanticTokensDiff=i,t.SemanticTokensBuilder=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,n,o,i){let r=e,s=t;this._dataLen>0&&(r-=this._prevLine,0===r&&(s-=this._prevChar)),this._data[this._dataLen++]=r,this._data[this._dataLen++]=s,this._data[this._dataLen++]=n,this._data[this._dataLen++]=o,this._data[this._dataLen++]=i,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return void 0!==this._prevData}buildEdits(){return void 0!==this._prevData?{resultId:this.id,edits:new i(this._prevData,this._data).computeDiff()}:this.build()}}},6717:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=t.combineFeatures=t.combineNotebooksFeatures=t.combineLanguagesFeatures=t.combineWorkspaceFeatures=t.combineWindowFeatures=t.combineClientFeatures=t.combineTracerFeatures=t.combineTelemetryFeatures=t.combineConsoleFeatures=t._NotebooksImpl=t._LanguagesImpl=t.BulkUnregistration=t.BulkRegistration=t.ErrorMessageTracker=void 0;const o=n(7745),i=n(6960),r=n(7867),s=n(3787),a=n(3606),c=n(2268),l=n(4225),d=n(7255),u=n(9283),f=n(7695),p=n(7129),h=n(7350),m=n(8714),g=n(8339),y=n(2473),v=n(5083),b=n(8535);function _(e){if(null!==e)return e}t.ErrorMessageTracker=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach((t=>{e.window.showErrorMessage(t)}))}};class k{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(o.MessageType.Error,e)}warn(e){this.send(o.MessageType.Warning,e)}info(e){this.send(o.MessageType.Info,e)}log(e){this.send(o.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(o.LogMessageNotification.type,{type:e,message:t}).catch((()=>{(0,o.RAL)().console.error("Sending log message failed")}))}}const T=(0,u.ShowDocumentFeature)((0,s.ProgressFeature)(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let n={type:o.MessageType.Error,message:e,actions:t};return this.connection.sendRequest(o.ShowMessageRequest.type,n).then(_)}showWarningMessage(e,...t){let n={type:o.MessageType.Warning,message:e,actions:t};return this.connection.sendRequest(o.ShowMessageRequest.type,n).then(_)}showInformationMessage(e,...t){let n={type:o.MessageType.Info,message:e,actions:t};return this.connection.sendRequest(o.ShowMessageRequest.type,n).then(_)}}));(t.BulkRegistration||(t.BulkRegistration={})).create=function(){return new R};class R{constructor(){this._registrations=[],this._registered=new Set}add(e,t){const n=i.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);const o=r.generateUuid();this._registrations.push({id:o,method:n,registerOptions:t||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}}(t.BulkUnregistration||(t.BulkUnregistration={})).create=function(){return new S(void 0,[])};class S{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach((e=>{this._unregistrations.set(e.method,e)}))}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let t={unregisterations:e};this._connection.sendRequest(o.UnregistrationRequest.type,t).catch((()=>{this._connection.console.info("Bulk unregistration failed.")}))}disposeSingle(e){const t=i.string(e)?e:e.method,n=this._unregistrations.get(t);if(!n)return!1;let r={unregisterations:[n]};return this._connection.sendRequest(o.UnregistrationRequest.type,r).then((()=>{this._unregistrations.delete(t)}),(e=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)})),!0}}class w{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof R?this.registerMany(e):e instanceof S?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(e,t,n){const s=i.string(t)?t:t.method,a=r.generateUuid();let c={registrations:[{id:a,method:s,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(o.RegistrationRequest.type,c).then((t=>(e.add({id:a,method:s}),e)),(e=>(this.connection.console.info(`Registering request handler for ${s} failed.`),Promise.reject(e))))}registerSingle2(e,t){const n=i.string(e)?e:e.method,s=r.generateUuid();let a={registrations:[{id:s,method:n,registerOptions:t||{}}]};return this.connection.sendRequest(o.RegistrationRequest.type,a).then((e=>o.Disposable.create((()=>{this.unregisterSingle(s,n).catch((()=>{this.connection.console.info(`Un-registering capability with id ${s} failed.`)}))}))),(e=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(e))))}unregisterSingle(e,t){let n={unregisterations:[{id:e,method:t}]};return this.connection.sendRequest(o.UnregistrationRequest.type,n).catch((()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)}))}registerMany(e){let t=e.asRegistrationParams();return this.connection.sendRequest(o.RegistrationRequest.type,t).then((()=>new S(this._connection,t.registrations.map((e=>({id:e.id,method:e.method}))))),(e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e))))}}const D=(0,f.FileOperationsFeature)((0,c.WorkspaceFoldersFeature)((0,a.ConfigurationFeature)(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){let t=(n=e)&&n.edit?e:{edit:e};var n;return this.connection.sendRequest(o.ApplyWorkspaceEditRequest.type,t)}})));class C{constructor(){this._trace=o.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==o.Trace.Off&&this.connection.sendNotification(o.LogTraceNotification.type,{message:e,verbose:this._trace===o.Trace.Verbose?t:void 0}).catch((()=>{}))}}class x{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(o.TelemetryEventNotification.type,e).catch((()=>{this.connection.console.log("Sending TelemetryEventNotification failed")}))}}class K{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,s.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,s.attachPartialResult)(this.connection,t)}}t._LanguagesImpl=K;const O=(0,b.MonikerFeature)((0,y.DiagnosticFeature)((0,g.InlayHintFeature)((0,m.InlineValueFeature)((0,h.TypeHierarchyFeature)((0,p.LinkedEditingRangeFeature)((0,d.SemanticTokensFeature)((0,l.CallHierarchyFeature)(K))))))));class P{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,s.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,t){return(0,s.attachPartialResult)(this.connection,t)}}t._NotebooksImpl=P;const E=(0,v.NotebookSyncFeature)(P);function M(e,t){return function(n){return t(e(n))}}function A(e,t){return function(n){return t(e(n))}}function N(e,t){return function(n){return t(e(n))}}function q(e,t){return function(n){return t(e(n))}}function L(e,t){return function(n){return t(e(n))}}function j(e,t){return function(n){return t(e(n))}}function F(e,t){return function(n){return t(e(n))}}function I(e,t){return function(n){return t(e(n))}}t.combineConsoleFeatures=M,t.combineTelemetryFeatures=A,t.combineTracerFeatures=N,t.combineClientFeatures=q,t.combineWindowFeatures=L,t.combineWorkspaceFeatures=j,t.combineLanguagesFeatures=F,t.combineNotebooksFeatures=I,t.combineFeatures=function(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}return{__brand:"features",console:n(e.console,t.console,M),tracer:n(e.tracer,t.tracer,N),telemetry:n(e.telemetry,t.telemetry,A),client:n(e.client,t.client,q),window:n(e.window,t.window,L),workspace:n(e.workspace,t.workspace,j),languages:n(e.languages,t.languages,F),notebooks:n(e.notebooks,t.notebooks,I)}},t.createConnection=function(e,t,n){const r=n&&n.console?new(n.console(k)):new k,a=e(r);r.rawAttach(a);const c=n&&n.tracer?new(n.tracer(C)):new C,l=n&&n.telemetry?new(n.telemetry(x)):new x,d=n&&n.client?new(n.client(w)):new w,u=n&&n.window?new(n.window(T)):new T,f=n&&n.workspace?new(n.workspace(D)):new D,p=n&&n.languages?new(n.languages(O)):new O,h=n&&n.notebooks?new(n.notebooks(E)):new E,m=[r,c,l,d,u,f,p,h];function g(e){return e instanceof Promise?e:i.thenable(e)?new Promise(((t,n)=>{e.then((e=>t(e)),(e=>n(e)))})):Promise.resolve(e)}let y,v,b,_={listen:()=>a.listen(),sendRequest:(e,...t)=>a.sendRequest(i.string(e)?e:e.method,...t),onRequest:(e,t)=>a.onRequest(e,t),sendNotification:(e,t)=>{const n=i.string(e)?e:e.method;return 1===arguments.length?a.sendNotification(n):a.sendNotification(n,t)},onNotification:(e,t)=>a.onNotification(e,t),onProgress:a.onProgress,sendProgress:a.sendProgress,onInitialize:e=>(v=e,{dispose:()=>{v=void 0}}),onInitialized:e=>a.onNotification(o.InitializedNotification.type,e),onShutdown:e=>(y=e,{dispose:()=>{y=void 0}}),onExit:e=>(b=e,{dispose:()=>{b=void 0}}),get console(){return r},get telemetry(){return l},get tracer(){return c},get client(){return d},get window(){return u},get workspace(){return f},get languages(){return p},get notebooks(){return h},onDidChangeConfiguration:e=>a.onNotification(o.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>a.onNotification(o.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>a.onNotification(o.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>a.onNotification(o.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>a.onNotification(o.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>a.onNotification(o.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>a.onRequest(o.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>a.onNotification(o.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>a.sendNotification(o.PublishDiagnosticsNotification.type,e),onHover:e=>a.onRequest(o.HoverRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),void 0))),onCompletion:e=>a.onRequest(o.CompletionRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onCompletionResolve:e=>a.onRequest(o.CompletionResolveRequest.type,e),onSignatureHelp:e=>a.onRequest(o.SignatureHelpRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),void 0))),onDeclaration:e=>a.onRequest(o.DeclarationRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onDefinition:e=>a.onRequest(o.DefinitionRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onTypeDefinition:e=>a.onRequest(o.TypeDefinitionRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onImplementation:e=>a.onRequest(o.ImplementationRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onReferences:e=>a.onRequest(o.ReferencesRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onDocumentHighlight:e=>a.onRequest(o.DocumentHighlightRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onDocumentSymbol:e=>a.onRequest(o.DocumentSymbolRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onWorkspaceSymbol:e=>a.onRequest(o.WorkspaceSymbolRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onWorkspaceSymbolResolve:e=>a.onRequest(o.WorkspaceSymbolResolveRequest.type,e),onCodeAction:e=>a.onRequest(o.CodeActionRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onCodeActionResolve:e=>a.onRequest(o.CodeActionResolveRequest.type,((t,n)=>e(t,n))),onCodeLens:e=>a.onRequest(o.CodeLensRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onCodeLensResolve:e=>a.onRequest(o.CodeLensResolveRequest.type,((t,n)=>e(t,n))),onDocumentFormatting:e=>a.onRequest(o.DocumentFormattingRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),void 0))),onDocumentRangeFormatting:e=>a.onRequest(o.DocumentRangeFormattingRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),void 0))),onDocumentOnTypeFormatting:e=>a.onRequest(o.DocumentOnTypeFormattingRequest.type,((t,n)=>e(t,n))),onRenameRequest:e=>a.onRequest(o.RenameRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),void 0))),onPrepareRename:e=>a.onRequest(o.PrepareRenameRequest.type,((t,n)=>e(t,n))),onDocumentLinks:e=>a.onRequest(o.DocumentLinkRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onDocumentLinkResolve:e=>a.onRequest(o.DocumentLinkResolveRequest.type,((t,n)=>e(t,n))),onDocumentColor:e=>a.onRequest(o.DocumentColorRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onColorPresentation:e=>a.onRequest(o.ColorPresentationRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onFoldingRanges:e=>a.onRequest(o.FoldingRangeRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onSelectionRanges:e=>a.onRequest(o.SelectionRangeRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),(0,s.attachPartialResult)(a,t)))),onExecuteCommand:e=>a.onRequest(o.ExecuteCommandRequest.type,((t,n)=>e(t,n,(0,s.attachWorkDone)(a,t),void 0))),dispose:()=>a.dispose()};for(let e of m)e.attach(_);return a.onRequest(o.InitializeRequest.type,(e=>{t.initialize(e),i.string(e.trace)&&(c.trace=o.Trace.fromString(e.trace));for(let t of m)t.initialize(e.capabilities);if(v)return g(v(e,(new o.CancellationTokenSource).token,(0,s.attachWorkDone)(a,e),void 0)).then((e=>{if(e instanceof o.ResponseError)return e;let t=e;t||(t={capabilities:{}});let n=t.capabilities;n||(n={},t.capabilities=n),void 0===n.textDocumentSync||null===n.textDocumentSync?n.textDocumentSync=i.number(_.__textDocumentSync)?_.__textDocumentSync:o.TextDocumentSyncKind.None:i.number(n.textDocumentSync)||i.number(n.textDocumentSync.change)||(n.textDocumentSync.change=i.number(_.__textDocumentSync)?_.__textDocumentSync:o.TextDocumentSyncKind.None);for(let e of m)e.fillServerCapabilities(n);return t}));{let e={capabilities:{textDocumentSync:o.TextDocumentSyncKind.None}};for(let t of m)t.fillServerCapabilities(e.capabilities);return e}})),a.onRequest(o.ShutdownRequest.type,(()=>(t.shutdownReceived=!0,y?y((new o.CancellationTokenSource).token):void 0))),a.onNotification(o.ExitNotification.type,(()=>{try{b&&b()}finally{t.shutdownReceived?t.exit(0):t.exit(1)}})),a.onNotification(o.SetTraceNotification.type,(e=>{c.trace=o.Trace.fromString(e.value)})),_}},9283:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentFeature=void 0;const o=n(7745);t.ShowDocumentFeature=e=>class extends e{showDocument(e){return this.connection.sendRequest(o.ShowDocumentRequest.type,e)}}},7086:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocuments=void 0;const o=n(7745);t.TextDocuments=class{constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new o.Emitter,this._onDidOpen=new o.Emitter,this._onDidClose=new o.Emitter,this._onDidSave=new o.Emitter,this._onWillSave=new o.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=o.TextDocumentSyncKind.Incremental;const t=[];return t.push(e.onDidOpenTextDocument((e=>{const t=e.textDocument,n=this._configuration.create(t.uri,t.languageId,t.version,t.text);this._syncedDocuments.set(t.uri,n);const o=Object.freeze({document:n});this._onDidOpen.fire(o),this._onDidChangeContent.fire(o)}))),t.push(e.onDidChangeTextDocument((e=>{const t=e.textDocument,n=e.contentChanges;if(0===n.length)return;const{version:o}=t;if(null==o)throw new Error(`Received document change event for ${t.uri} without valid version identifier`);let i=this._syncedDocuments.get(t.uri);void 0!==i&&(i=this._configuration.update(i,n,o),this._syncedDocuments.set(t.uri,i),this._onDidChangeContent.fire(Object.freeze({document:i})))}))),t.push(e.onDidCloseTextDocument((e=>{let t=this._syncedDocuments.get(e.textDocument.uri);void 0!==t&&(this._syncedDocuments.delete(e.textDocument.uri),this._onDidClose.fire(Object.freeze({document:t})))}))),t.push(e.onWillSaveTextDocument((e=>{let t=this._syncedDocuments.get(e.textDocument.uri);void 0!==t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))}))),t.push(e.onWillSaveTextDocumentWaitUntil(((e,t)=>{let n=this._syncedDocuments.get(e.textDocument.uri);return void 0!==n&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]}))),t.push(e.onDidSaveTextDocument((e=>{let t=this._syncedDocuments.get(e.textDocument.uri);void 0!==t&&this._onDidSave.fire(Object.freeze({document:t}))}))),o.Disposable.create((()=>{t.forEach((e=>e.dispose()))}))}}},7350:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHierarchyFeature=void 0;const o=n(7745);t.TypeHierarchyFeature=e=>class extends e{get typeHierarchy(){return{onPrepare:e=>this.connection.onRequest(o.TypeHierarchyPrepareRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0))),onSupertypes:e=>{const t=o.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onSubtypes:e=>{const t=o.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(t,((n,o)=>e(n,o,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}}},6960:(e,t)=>{function n(e){return"string"==typeof e||e instanceof String}function o(e){return"function"==typeof e}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.thenable=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=o,t.array=i,t.stringArray=function(e){return i(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&o(e.then)}},7867:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateUuid=t.parse=t.isUUID=t.v4=t.empty=void 0;class n{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class o extends n{constructor(){super([o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),"-",o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),"-","4",o._randomHex(),o._randomHex(),o._randomHex(),"-",o._oneOf(o._timeHighBits),o._randomHex(),o._randomHex(),o._randomHex(),"-",o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex(),o._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return o._oneOf(o._chars)}}function i(){return new o}o._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],o._timeHighBits=["8","9","a","b"],t.empty=new n("00000000-0000-0000-0000-000000000000"),t.v4=i;const r=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function s(e){return r.test(e)}t.isUUID=s,t.parse=function(e){if(!s(e))throw new Error("invalid uuid");return new n(e)},t.generateUuid=function(){return i().asHex()}},2268:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFoldersFeature=void 0;const o=n(7745);t.WorkspaceFoldersFeature=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new o.Emitter,this.connection.onNotification(o.DidChangeWorkspaceFoldersNotification.type,(e=>{this._onDidChangeWorkspaceFolders.fire(e.event)})))}fillServerCapabilities(e){super.fillServerCapabilities(e);const t=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=!0===t||"string"==typeof t}getWorkspaceFolders(){return this.connection.sendRequest(o.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._notificationIsAutoRegistered||this._unregistration||(this._unregistration=this.connection.client.register(o.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}}},1507:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resolveModulePath=t.FileSystem=t.resolveGlobalYarnPath=t.resolveGlobalNodePath=t.resolve=t.uriToFilePath=void 0;const o=n(7310),i=n(1017),r=n(7147),s=n(2081);function a(){return"win32"===process.platform}function c(e,t,n,o){const a=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise(((c,l)=>{let d=process.env,u=Object.create(null);Object.keys(d).forEach((e=>u[e]=d[e])),t&&r.existsSync(t)&&(u.NODE_PATH?u.NODE_PATH=t+i.delimiter+u.NODE_PATH:u.NODE_PATH=t,o&&o(`NODE_PATH value is: ${u.NODE_PATH}`)),u.ELECTRON_RUN_AS_NODE="1";try{let t=(0,s.fork)("",[],{cwd:n,env:u,execArgv:["-e",a]});if(void 0===t.pid)return void l(new Error(`Starting process to resolve node module  ${e} failed`));t.on("error",(e=>{l(e)})),t.on("message",(n=>{"r"===n.c&&(t.send({c:"e"}),n.s?c(n.r):l(new Error(`Failed to resolve module: ${e}`)))}));let o={c:"rs",a:e};t.send(o)}catch(e){l(e)}}))}function l(e){let t="npm";const n=Object.create(null);Object.keys(process.env).forEach((e=>n[e]=process.env[e])),n.NO_UPDATE_NOTIFIER="true";const o={encoding:"utf8",env:n};a()&&(t="npm.cmd",o.shell=!0);let r=()=>{};try{process.on("SIGPIPE",r);let n=(0,s.spawnSync)(t,["config","get","prefix"],o).stdout;if(!n)return void(e&&e("'npm config get prefix' didn't return a value."));let c=n.trim();return e&&e(`'npm config get prefix' value is: ${c}`),c.length>0?a()?i.join(c,"node_modules"):i.join(c,"lib","node_modules"):void 0}catch(e){return}finally{process.removeListener("SIGPIPE",r)}}var d;t.uriToFilePath=function(e){let t=o.parse(e);if("file:"!==t.protocol||!t.path)return;let n=t.path.split("/");for(var r=0,s=n.length;r<s;r++)n[r]=decodeURIComponent(n[r]);if("win32"===process.platform&&n.length>1){let e=n[0],t=n[1];0===e.length&&t.length>1&&":"===t[1]&&n.shift()}return i.normalize(n.join("/"))},t.resolve=c,t.resolveGlobalNodePath=l,t.resolveGlobalYarnPath=function(e){let t="yarn",n={encoding:"utf8"};a()&&(t="yarn.cmd",n.shell=!0);let o=()=>{};try{process.on("SIGPIPE",o);let r=(0,s.spawnSync)(t,["global","dir","--json"],n),a=r.stdout;if(!a)return void(e&&(e("'yarn global dir' didn't return a value."),r.stderr&&e(r.stderr)));let c=a.trim().split(/\r?\n/);for(let e of c)try{let t=JSON.parse(e);if("log"===t.type)return i.join(t.data,"node_modules")}catch(e){}return}catch(e){return}finally{process.removeListener("SIGPIPE",o)}},function(e){let t;function n(){return void 0!==t||(t=!("win32"===process.platform||r.existsSync(__filename.toUpperCase())&&r.existsSync(__filename.toLowerCase()))),t}e.isCaseSensitive=n,e.isParent=function(e,t){return n()?0===i.normalize(t).indexOf(i.normalize(e)):0===i.normalize(t).toLowerCase().indexOf(i.normalize(e).toLowerCase())}}(d=t.FileSystem||(t.FileSystem={})),t.resolveModulePath=function(e,t,n,o){return n?(i.isAbsolute(n)||(n=i.join(e,n)),c(t,n,n,o).then((e=>d.isParent(n,e)?e:Promise.reject(new Error(`Failed to load ${t} from node path location.`)))).then(void 0,(n=>c(t,l(o),e,o)))):c(t,l(o),e,o)}},2374:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,i)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=t.Files=void 0;const r=n(6960),s=n(6717),a=n(1507),c=n(4057);var l;i(n(4057),t),i(n(9936),t),(l=t.Files||(t.Files={})).uriToFilePath=a.uriToFilePath,l.resolveGlobalNodePath=a.resolveGlobalNodePath,l.resolveGlobalYarnPath=a.resolveGlobalYarnPath,l.resolve=a.resolve,l.resolveModulePath=a.resolveModulePath;let d,u=!1;!function(){const e="--clientProcessId";function t(e){try{let t=parseInt(e);isNaN(t)||(d=setInterval((()=>{try{process.kill(t,0)}catch(e){process.exit(u?0:1)}}),3e3))}catch(e){}}for(let n=2;n<process.argv.length;n++){let o=process.argv[n];if(o===e&&n+1<process.argv.length)return void t(process.argv[n+1]);{let n=o.split("=");n[0]===e&&t(n[1])}}}();const f={initialize:e=>{const t=e.processId;r.number(t)&&void 0===d&&setInterval((()=>{try{process.kill(t,0)}catch(e){process.exit(u?0:1)}}),3e3)},get shutdownReceived(){return u},set shutdownReceived(e){u=e},exit:e=>{process.exit(e)}};t.createConnection=function(e,t,n,o){let i,a,l,d;return void 0!==e&&"features"===e.__brand&&(i=e,e=t,t=n,n=o),c.ConnectionStrategy.is(e)||c.ConnectionOptions.is(e)?d=e:(a=e,l=t,d=n),function(e,t,n,o){if(!e&&!t&&process.argv.length>2){let n,o,r=process.argv.slice(2);for(let s=0;s<r.length;s++){let a=r[s];if("--node-ipc"===a){e=new c.IPCMessageReader(process),t=new c.IPCMessageWriter(process);break}if("--stdio"===a){e=process.stdin,t=process.stdout;break}if("--socket"===a){n=parseInt(r[s+1]);break}if("--pipe"===a){o=r[s+1];break}var i=a.split("=");if("--socket"===i[0]){n=parseInt(i[1]);break}if("--pipe"===i[0]){o=i[1];break}}if(n){let o=(0,c.createServerSocketTransport)(n);e=o[0],t=o[1]}else if(o){let n=(0,c.createServerPipeTransport)(o);e=n[0],t=n[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!e)throw new Error("Connection input stream is not set. "+a);if(!t)throw new Error("Connection output stream is not set. "+a);if(r.func(e.read)&&r.func(e.on)){let t=e;t.on("end",(()=>{process.exit(u?0:1)})),t.on("close",(()=>{process.exit(u?0:1)}))}return(0,s.createConnection)((o=>(0,c.createProtocolConnection)(e,t,o,n)),f,o)}(a,l,d,i)}},6630:(e,t,n)=>{var o;n.r(t),n.d(t,{URI:()=>i,Utils:()=>r}),o=(()=>{var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,o="",i=0,r=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(r===a-1||1===s);else if(r!==a-1&&2===s){if(o.length<2||2!==i||46!==o.charCodeAt(o.length-1)||46!==o.charCodeAt(o.length-2))if(o.length>2){var c=o.lastIndexOf("/");if(c!==o.length-1){-1===c?(o="",i=0):i=(o=o.slice(0,c)).length-1-o.lastIndexOf("/"),r=a,s=0;continue}}else if(2===o.length||1===o.length){o="",i=0,r=a,s=0;continue}t&&(o.length>0?o+="/..":o="..",i=2)}else o.length>0?o+="/"+e.slice(r+1,a):o=e.slice(r+1,a),i=a-r-1;r=a,s=0}else 46===n&&-1!==s?++s:s=-1}return o}var o={resolve:function(){for(var e,o="",i=!1,r=arguments.length-1;r>=-1&&!i;r--){var s;r>=0?s=arguments[r]:(void 0===e&&(e=process.cwd()),s=e),t(s),0!==s.length&&(o=s+"/"+o,i=47===s.charCodeAt(0))}return o=n(o,!i),i?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(e){if(t(e),0===e.length)return".";var o=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!o)).length||o||(e="."),e.length>0&&i&&(e+="/"),o?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var i=arguments[n];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":o.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=o.resolve(e))===(n=o.resolve(n)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var r=e.length,s=r-i,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var c=n.length-a,l=s<c?s:c,d=-1,u=0;u<=l;++u){if(u===l){if(c>l){if(47===n.charCodeAt(a+u))return n.slice(a+u+1);if(0===u)return n.slice(a+u)}else s>l&&(47===e.charCodeAt(i+u)?d=u:0===u&&(d=0));break}var f=e.charCodeAt(i+u);if(f!==n.charCodeAt(a+u))break;47===f&&(d=u)}var p="";for(u=i+d+1;u<=r;++u)u!==r&&47!==e.charCodeAt(u)||(0===p.length?p+="..":p+="/..");return p.length>0?p+n.slice(a+d):(a+=d,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),o=47===n,i=-1,r=!0,s=e.length-1;s>=1;--s)if(47===(n=e.charCodeAt(s))){if(!r){i=s;break}}else r=!1;return-1===i?o?"/":".":o&&1===i?"//":e.slice(0,i)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var o,i=0,r=-1,s=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,c=-1;for(o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(47===l){if(!s){i=o+1;break}}else-1===c&&(s=!1,c=o+1),a>=0&&(l===n.charCodeAt(a)?-1==--a&&(r=o):(a=-1,r=c))}return i===r?r=c:-1===r&&(r=e.length),e.slice(i,r)}for(o=e.length-1;o>=0;--o)if(47===e.charCodeAt(o)){if(!s){i=o+1;break}}else-1===r&&(s=!1,r=o+1);return-1===r?"":e.slice(i,r)},extname:function(e){t(e);for(var n=-1,o=0,i=-1,r=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===i&&(r=!1,i=a+1),46===c?-1===n?n=a:1!==s&&(s=1):-1!==n&&(s=-1);else if(!r){o=a+1;break}}return-1===n||-1===i||0===s||1===s&&n===i-1&&n===o+1?"":e.slice(n,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,o=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+o:n+"/"+o:o}(0,e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var o,i=e.charCodeAt(0),r=47===i;r?(n.root="/",o=1):o=0;for(var s=-1,a=0,c=-1,l=!0,d=e.length-1,u=0;d>=o;--d)if(47!==(i=e.charCodeAt(d)))-1===c&&(l=!1,c=d+1),46===i?-1===s?s=d:1!==u&&(u=1):-1!==s&&(u=-1);else if(!l){a=d+1;break}return-1===s||-1===c||0===u||1===u&&s===c-1&&s===a+1?-1!==c&&(n.base=n.name=0===a&&r?e.slice(1,c):e.slice(a,c)):(0===a&&r?(n.name=e.slice(1,s),n.base=e.slice(1,c)):(n.name=e.slice(a,s),n.base=e.slice(a,c)),n.ext=e.slice(s,c)),a>0?n.dir=e.slice(0,a-1):r&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,e.exports=o},447:(e,t,n)=>{var o;if(n.r(t),n.d(t,{URI:()=>h,Utils:()=>w}),"object"==typeof process)o="win32"===process.platform;else if("object"==typeof navigator){var i=navigator.userAgent;o=i.indexOf("Windows")>=0}var r,s,a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=/^\w[\w\d+.-]*$/,l=/^\//,d=/^\/\//,u="",f="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,h=function(){function e(e,t,n,o,i,r){void 0===r&&(r=!1),"object"==typeof e?(this.scheme=e.scheme||u,this.authority=e.authority||u,this.path=e.path||u,this.query=e.query||u,this.fragment=e.fragment||u):(this.scheme=function(e,t){return e||t?e:"file"}(e,r),this.authority=t||u,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==f&&(t=f+t):t=f}return t}(this.scheme,n||u),this.query=o||u,this.fragment=i||u,function(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+e.authority+'", path: "'+e.path+'", query: "'+e.query+'", fragment: "'+e.fragment+'"}');if(e.scheme&&!c.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!l.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(d.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,r))}return e.isUri=function(t){return t instanceof e||!!t&&"string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"function"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString},Object.defineProperty(e.prototype,"fsPath",{get:function(){return _(this,!1)},enumerable:!1,configurable:!0}),e.prototype.with=function(e){if(!e)return this;var t=e.scheme,n=e.authority,o=e.path,i=e.query,r=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=u),void 0===n?n=this.authority:null===n&&(n=u),void 0===o?o=this.path:null===o&&(o=u),void 0===i?i=this.query:null===i&&(i=u),void 0===r?r=this.fragment:null===r&&(r=u),t===this.scheme&&n===this.authority&&o===this.path&&i===this.query&&r===this.fragment?this:new g(t,n,o,i,r)},e.parse=function(e,t){void 0===t&&(t=!1);var n=p.exec(e);return n?new g(n[2]||u,S(n[4]||u),S(n[5]||u),S(n[7]||u),S(n[9]||u),t):new g(u,u,u,u,u)},e.file=function(e){var t=u;if(o&&(e=e.replace(/\\/g,f)),e[0]===f&&e[1]===f){var n=e.indexOf(f,2);-1===n?(t=e.substring(2),e=f):(t=e.substring(2,n),e=e.substring(n)||f)}return new g("file",t,e,u,u)},e.from=function(e){return new g(e.scheme,e.authority,e.path,e.query,e.fragment)},e.prototype.toString=function(e){return void 0===e&&(e=!1),k(this,e)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var n=new g(t);return n._formatted=t.external,n._fsPath=t._sep===m?t.fsPath:null,n}return t},e}(),m=o?1:void 0,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return a(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=_(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?k(this,!0):(this._formatted||(this._formatted=k(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=m),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(h),y=((s={})[58]="%3A",s[47]="%2F",s[63]="%3F",s[35]="%23",s[91]="%5B",s[93]="%5D",s[64]="%40",s[33]="%21",s[36]="%24",s[38]="%26",s[39]="%27",s[40]="%28",s[41]="%29",s[42]="%2A",s[43]="%2B",s[44]="%2C",s[59]="%3B",s[61]="%3D",s[32]="%20",s);function v(e,t){for(var n=void 0,o=-1,i=0;i<e.length;i++){var r=e.charCodeAt(i);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||45===r||46===r||95===r||126===r||t&&47===r)-1!==o&&(n+=encodeURIComponent(e.substring(o,i)),o=-1),void 0!==n&&(n+=e.charAt(i));else{void 0===n&&(n=e.substr(0,i));var s=y[r];void 0!==s?(-1!==o&&(n+=encodeURIComponent(e.substring(o,i)),o=-1),n+=s):-1===o&&(o=i)}}return-1!==o&&(n+=encodeURIComponent(e.substring(o))),void 0!==n?n:e}function b(e){for(var t=void 0,n=0;n<e.length;n++){var o=e.charCodeAt(n);35===o||63===o?(void 0===t&&(t=e.substr(0,n)),t+=y[o]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function _(e,t){var n;return n=e.authority&&e.path.length>1&&"file"===e.scheme?"//"+e.authority+e.path:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,o&&(n=n.replace(/\//g,"\\")),n}function k(e,t){var n=t?b:v,o="",i=e.scheme,r=e.authority,s=e.path,a=e.query,c=e.fragment;if(i&&(o+=i,o+=":"),(r||"file"===i)&&(o+=f,o+=f),r){var l=r.indexOf("@");if(-1!==l){var d=r.substr(0,l);r=r.substr(l+1),-1===(l=d.indexOf(":"))?o+=n(d,!1):(o+=n(d.substr(0,l),!1),o+=":",o+=n(d.substr(l+1),!1)),o+="@"}-1===(l=(r=r.toLowerCase()).indexOf(":"))?o+=n(r,!1):(o+=n(r.substr(0,l),!1),o+=r.substr(l))}if(s){if(s.length>=3&&47===s.charCodeAt(0)&&58===s.charCodeAt(2))(u=s.charCodeAt(1))>=65&&u<=90&&(s="/"+String.fromCharCode(u+32)+":"+s.substr(3));else if(s.length>=2&&58===s.charCodeAt(1)){var u;(u=s.charCodeAt(0))>=65&&u<=90&&(s=String.fromCharCode(u+32)+":"+s.substr(2))}o+=n(s,!0)}return a&&(o+="?",o+=n(a,!1)),c&&(o+="#",o+=t?c:v(c,!1)),o}function T(e){try{return decodeURIComponent(e)}catch(t){return e.length>3?e.substr(0,3)+T(e.substr(3)):e}}var R=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function S(e){return e.match(R)?e.replace(R,(function(e){return T(e)})):e}var w,D=n(470),C=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],s=0,a=r.length;s<a;s++,i++)o[i]=r[s];return o},x=D.posix||D;!function(e){e.joinPath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.with({path:x.join.apply(x,C([e.path],t))})},e.resolvePath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=e.path||"/";return e.with({path:x.resolve.apply(x,C([o],t))})},e.dirname=function(e){var t=x.dirname(e.path);return 1===t.length&&46===t.charCodeAt(0)?e:e.with({path:t})},e.basename=function(e){return x.basename(e.path)},e.extname=function(e){return x.extname(e.path)}}(w||(w={}))}},t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(447)})();const{URI:i,Utils:r}=o},2081:e=>{e.exports=require("child_process")},6113:e=>{e.exports=require("crypto")},7147:e=>{e.exports=require("fs")},1808:e=>{e.exports=require("net")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},7282:e=>{e.exports=require("process")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0});const t=n(3939),i=n(6169);!function(){var e;let n={};process.argv.slice(2).map((e=>{let t=e.split("=");n[t[0]]=t[1]}));let o=null!==(e=n.path)&&void 0!==e?e:"";if(o=o.replace(/^(['"])(.*)\1$/,"$2"),o)try{let e=(0,t.openFile)(o,!1);if(!e)return;let n=new i.Lexer(e).beautify();console.log(n)}catch(e){console.error(e)}}()})();var i=exports;for(var r in o)i[r]=o[r];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();